/*! For license information please see 4079.70c46518.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmultichain_poc=self.webpackChunkmultichain_poc||[]).push([[4079],{4079:(e,t,r)=>{r.r(t),r.d(t,{BUTTON_POSITION:()=>pg,LOGIN_PROVIDER:()=>gg,TORUS_BUILD_ENV:()=>hg,TorusInPageProvider:()=>Bg,default:()=>zg});var n=r(7126),o=r(1561),i=function(e){var t=(e=e||{}).max||Number.MAX_SAFE_INTEGER,r=typeof e.start<"u"?e.start:Math.floor(Math.random()*t);return function(){return r%=t,r++}};const s=(0,n.g)(i);var a,l,c={exports:{}};function u(){if(l)return a;l=1;var e=1e3,t=60*e,r=60*t,n=24*r,o=7*n,i=365.25*n;function s(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}return a=function(a,l){l=l||{};var c=typeof a;if("string"===c&&a.length>0)return function(s){if(s=String(s),!(s.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(a){var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(a);if("number"===c&&isFinite(a))return l.long?function(o){var i=Math.abs(o);return i>=n?s(o,i,n,"day"):i>=r?s(o,i,r,"hour"):i>=t?s(o,i,t,"minute"):i>=e?s(o,i,e,"second"):o+" ms"}(a):function(o){var i=Math.abs(o);return i>=n?Math.round(o/n)+"d":i>=r?Math.round(o/r)+"h":i>=t?Math.round(o/t)+"m":i>=e?Math.round(o/e)+"s":o+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}}var d=function(e){function t(e){let n,o,i,s=null;function a(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(!a.enabled)return;const i=a,s=Number(new Date),l=s-(n||s);i.diff=l,i.prev=n,i.curr=s,n=s,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");let c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";c++;const o=t.formatters[n];if("function"==typeof o){const t=r[c];e=o.call(i,t),r.splice(c,1),c--}return e})),t.formatArgs.call(i,r),(i.log||t.log).apply(i,r)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){const n=t(this.namespace+(typeof r>"u"?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=u(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch{}return!e&&typeof n.d.process<"u"&&"env"in n.d.process&&(e=n.d.process.env.DEBUG),e},t.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=d(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(c,c.exports);var f=c.exports,h={},p={},g=v;v.default=v,v.stable=A,v.stableStringify=A;var b="[...]",m="[Circular]",y=[],w=[];function _(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function v(e,t,r,n){var o;typeof n>"u"&&(n=_()),S(e,"",0,[],void 0,0,n);try{o=0===w.length?JSON.stringify(e,t,r):JSON.stringify(e,T(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==y.length;){var i=y.pop();4===i.length?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return o}function E(e,t,r,n){var o=Object.getOwnPropertyDescriptor(n,r);void 0!==o.get?o.configurable?(Object.defineProperty(n,r,{value:e}),y.push([n,r,t,o])):w.push([t,r,e]):(n[r]=e,y.push([n,r,t]))}function S(e,t,r,n,o,i,s){var a;if(i+=1,"object"==typeof e&&null!==e){for(a=0;a<n.length;a++)if(n[a]===e)return void E(m,e,t,o);if(typeof s.depthLimit<"u"&&i>s.depthLimit)return void E(b,e,t,o);if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit)return void E(b,e,t,o);if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)S(e[a],a,a,n,e,i,s);else{var l=Object.keys(e);for(a=0;a<l.length;a++){var c=l[a];S(e[c],c,a,n,e,i,s)}}n.pop()}}function R(e,t){return e<t?-1:e>t?1:0}function A(e,t,r,n){typeof n>"u"&&(n=_());var o,i=I(e,"",0,[],void 0,0,n)||e;try{o=0===w.length?JSON.stringify(i,t,r):JSON.stringify(i,T(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==y.length;){var s=y.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function I(e,t,r,n,o,i,s){var a;if(i+=1,"object"==typeof e&&null!==e){for(a=0;a<n.length;a++)if(n[a]===e)return void E(m,e,t,o);try{if("function"==typeof e.toJSON)return}catch{return}if(typeof s.depthLimit<"u"&&i>s.depthLimit)return void E(b,e,t,o);if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit)return void E(b,e,t,o);if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)I(e[a],a,a,n,e,i,s);else{var l={},c=Object.keys(e).sort(R);for(a=0;a<c.length;a++){var u=c[a];I(e[u],u,a,n,e,i,s),l[u]=e[u]}if(!(typeof o<"u"))return l;y.push([o,t,e]),o[t]=l}n.pop()}}function T(e){return e=typeof e<"u"?e:function(e,t){return t},function(t,r){if(w.length>0)for(var n=0;n<w.length;n++){var o=w[n];if(o[1]===t&&o[0]===r){r=o[2],w.splice(n,1);break}}return e.call(this,t,r)}}const x=(0,n.g)(g);Object.defineProperty(p,"__esModule",{value:!0}),p.EthereumProviderError=p.EthereumRpcError=void 0;const O=g;class k extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return O.default(this.serialize(),L,2)}}p.EthereumRpcError=k;function L(e,t){if("[Circular]"!==t)return t}p.EthereumProviderError=class extends k{constructor(e,t,r){if(n=e,!(Number.isInteger(n)&&n>=1e3&&n<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');var n;super(e,t,r)}};var P={},B={};Object.defineProperty(B,"__esModule",{value:!0}),B.errorValues=B.errorCodes=void 0,B.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},B.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=B,r=p,n=t.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",i={code:n,message:s(n)};function s(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if(Number.isInteger(r)){const n=r.toString();if(u(t.errorValues,n))return t.errorValues[n].message;if(l(r))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function a(e){if(!Number.isInteger(e))return!1;const r=e.toString();return!(!t.errorValues[r]&&!l(e))}function l(e){return e>=-32099&&e<=-32e3}function c(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=s,e.isValidCode=a,e.serializeError=function(e){let{fallbackError:t=i,shouldIncludeStack:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o,l;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof r.EthereumRpcError)return e.serialize();const d={};if(e&&"object"==typeof e&&!Array.isArray(e)&&u(e,"code")&&a(e.code)){const t=e;d.code=t.code,t.message&&"string"==typeof t.message?(d.message=t.message,u(t,"data")&&(d.data=t.data)):(d.message=s(d.code),d.data={originalError:c(e)})}else{d.code=t.code;const r=null===(o=e)||void 0===o?void 0:o.message;d.message=r&&"string"==typeof r?r:t.message,d.data={originalError:c(e)}}const f=null===(l=e)||void 0===l?void 0:l.stack;return n&&e&&f&&"string"==typeof f&&(d.stack=f),d}}(P);var C={};Object.defineProperty(C,"__esModule",{value:!0}),C.ethErrors=void 0;const N=p,j=P,$=B;function M(e,t){const[r,n]=D(t);return new N.EthereumRpcError(e,r||j.getMessageFromCode(e),n)}function F(e,t){const[r,n]=D(t);return new N.EthereumProviderError(e,r||j.getMessageFromCode(e),n)}function D(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}C.ethErrors={rpc:{parse:e=>M($.errorCodes.rpc.parse,e),invalidRequest:e=>M($.errorCodes.rpc.invalidRequest,e),invalidParams:e=>M($.errorCodes.rpc.invalidParams,e),methodNotFound:e=>M($.errorCodes.rpc.methodNotFound,e),internal:e=>M($.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return M(t,e)},invalidInput:e=>M($.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>M($.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>M($.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>M($.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>M($.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>M($.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>F($.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>F($.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>F($.errorCodes.provider.unsupportedMethod,e),disconnected:e=>F($.errorCodes.provider.disconnected,e),chainDisconnected:e=>F($.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new N.EthereumProviderError(t,r,n)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=p;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=P;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=C;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const o=B;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}(h);var U,z={exports:{}},H={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return e.call(t,...n)},FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean:Boolean,Uint8Array:Uint8Array},W={exports:{}},q={exports:{}};function V(){if(U)return q.exports;U=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return q.exports=e,q.exports.AbortSignal=t,q.exports.default=e,q.exports}!function(e){const t=n.n,{kResistStopPropagation:r,SymbolDispose:o}=H,i=globalThis.AbortSignal||V().AbortSignal,s=globalThis.AbortController||V().AbortController,a=Object.getPrototypeOf((async function(){})).constructor,l=globalThis.Blob||t.Blob,c=typeof l<"u"?function(e){return e instanceof l}:function(e){return!1},u=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new ERR_INVALID_ARG_TYPE(t,"AbortSignal",e)};class d extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:d,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},promisify:e=>new Promise(((t,r)=>{e((function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e?r(e):t(...o)}))})),debuglog:()=>function(){},format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.replace(/%([sdifj])/g,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let[o,i]=t;const s=r.shift();return"f"===i?s.toFixed(6):"j"===i?JSON.stringify(s):"s"===i&&"object"==typeof s?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()}))},inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof a,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:c,deprecate:(e,t)=>e,addAbortListener:n.y.addAbortListener||function(e,t){if(void 0===e)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);let n;return u(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new ERR_INVALID_ARG_TYPE(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask((()=>t())):(e.addEventListener("abort",t,{__proto__:null,once:!0,[r]:!0}),n=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[o](){var e;null===(e=n)||void 0===e||e()}}},AbortSignalAny:i.any||function(e){if(1===e.length)return e[0];const t=new s,r=()=>t.abort();return e.forEach((e=>{u(e,"signals"),e.addEventListener("abort",r,{once:!0})})),t.signal.addEventListener("abort",(()=>{e.forEach((e=>e.removeEventListener("abort",r)))}),{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(W);var Z=W.exports,G={};const{format:J,inspect:K,AggregateError:X}=Z,Y=globalThis.AggregateError||X,Q=Symbol("kIsNodeError"),ee=["string","function","number","object","Function","Object","boolean","bigint","symbol"],te=/^([A-Z][a-z0-9]*)+$/,re={};function ne(e,t){if(!e)throw new re.ERR_INTERNAL_ASSERTION(t)}function oe(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function ie(e,t,r){r||(r=Error);class n extends r{constructor(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];super(function(e,t,r){if("function"==typeof t)return ne(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return ne(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),0===r.length?t:J(t,...r)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[Q]=!0,re[e]=n}function se(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}let ae=class extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==t&&"object"!=typeof t)throw new re.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}};ie("ERR_ASSERTION","%s",Error),ie("ERR_INVALID_ARG_TYPE",((e,t,r)=>{ne("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],i=[],s=[];for(const l of t)ne("string"==typeof l,"All expected entries have to be of type string"),ee.includes(l)?o.push(l.toLowerCase()):te.test(l)?i.push(l):(ne("object"!==l,'The value "object" should be written as "Object"'),s.push(l));if(i.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),i.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(i.length>0||s.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{const e=i.pop();n+=`an instance of ${i.join(", ")}, or ${e}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`one of ${s.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var a;if(null!==(a=r.constructor)&&void 0!==a&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${K(r,{depth:-1})}`}}else{let e=K(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n}),TypeError),ie("ERR_INVALID_ARG_VALUE",(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid",n=K(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`}),TypeError),ie("ERR_INVALID_RETURN_VALUE",((e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`}),TypeError),ie("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n;ne(t.length>0,"At least one arg needs to be specified");const o=t.length;switch(t=(Array.isArray(t)?t:[t]).map((e=>`"${e}"`)).join(" or "),o){case 1:n+=`The ${t[0]} argument`;break;case 2:n+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const e=t.pop();n+=`The ${t.join(", ")}, and ${e} arguments`}}return`${n} must be specified`}),TypeError),ie("ERR_OUT_OF_RANGE",((e,t,r)=>{let n;return ne(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32?n=oe(String(r)):"bigint"==typeof r?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=oe(n)),n+="n"):n=K(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`}),RangeError),ie("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),ie("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),ie("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),ie("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),ie("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),ie("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ie("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),ie("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),ie("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),ie("ERR_STREAM_WRITE_AFTER_END","write after end",Error),ie("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var le={AbortError:ae,aggregateTwoErrors:se((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new Y([t,e],t.message);return r.code=t.code,r}return e||t})),hideStackFrames:se,codes:re};const{ArrayIsArray:ce,ArrayPrototypeIncludes:ue,ArrayPrototypeJoin:de,ArrayPrototypeMap:fe,NumberIsInteger:he,NumberIsNaN:pe,NumberMAX_SAFE_INTEGER:ge,NumberMIN_SAFE_INTEGER:be,NumberParseInt:me,ObjectPrototypeHasOwnProperty:ye,RegExpPrototypeExec:we,String:_e,StringPrototypeToUpperCase:ve,StringPrototypeTrim:Ee}=H,{hideStackFrames:Se,codes:{ERR_SOCKET_BAD_PORT:Re,ERR_INVALID_ARG_TYPE:Ae,ERR_INVALID_ARG_VALUE:Ie,ERR_OUT_OF_RANGE:Te,ERR_UNKNOWN_SIGNAL:xe}}=le,{normalizeEncoding:Oe}=Z,{isAsyncFunction:ke,isArrayBufferView:Le}=Z.types,Pe={};const Be=/^[0-7]+$/;const Ce=Se((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:be,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ge;if("number"!=typeof e)throw new Ae(t,"number",e);if(!he(e))throw new Te(t,"an integer",e);if(e<r||e>n)throw new Te(t,`>= ${r} && <= ${n}`,e)})),Ne=Se((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-2147483648,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2147483647;if("number"!=typeof e)throw new Ae(t,"number",e);if(!he(e))throw new Te(t,"an integer",e);if(e<r||e>n)throw new Te(t,`>= ${r} && <= ${n}`,e)})),je=Se((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!=typeof e)throw new Ae(t,"number",e);if(!he(e))throw new Te(t,"an integer",e);const n=r?1:0,o=4294967295;if(e<n||e>o)throw new Te(t,`>= ${n} && <= ${o}`,e)}));function $e(e,t){if("string"!=typeof e)throw new Ae(t,"string",e)}const Me=Se(((e,t,r)=>{if(!ue(r,e)){const n="must be one of: "+de(fe(r,(e=>"string"==typeof e?`'${e}'`:_e(e))),", ");throw new Ie(t,e,n)}}));function Fe(e,t){if("boolean"!=typeof e)throw new Ae(t,"boolean",e)}function De(e,t,r){return null!=e&&ye(e,t)?e[t]:r}const Ue=Se((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=De(r,"allowArray",!1),o=De(r,"allowFunction",!1);if(!De(r,"nullable",!1)&&null===e||!n&&ce(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new Ae(t,"Object",e)})),ze=Se(((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new Ae(t,"a dictionary",e)})),He=Se((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!ce(e))throw new Ae(t,"Array",e);if(e.length<r){throw new Ie(t,e,`must be longer than ${r}`)}}));const We=Se((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buffer";if(!Le(e))throw new Ae(t,["Buffer","TypedArray","DataView"],e)}));const qe=Se(((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new Ae(t,"AbortSignal",e)})),Ve=Se(((e,t)=>{if("function"!=typeof e)throw new Ae(t,"Function",e)})),Ze=Se(((e,t)=>{if("function"!=typeof e||ke(e))throw new Ae(t,"Function",e)})),Ge=Se(((e,t)=>{if(void 0!==e)throw new Ae(t,"undefined",e)}));const Je=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ke(e,t){if(typeof e>"u"||!we(Je,e))throw new Ie(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Xe={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(typeof e>"u"&&(e=r),"string"==typeof e){if(null===we(Be,e))throw new Ie(t,e,"must be a 32-bit unsigned integer or an octal string");e=me(e,8)}return je(e,t),e},validateArray:He,validateStringArray:function(e,t){He(e,t);for(let r=0;r<e.length;r++)$e(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){He(e,t);for(let r=0;r<e.length;r++)Fe(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){He(e,t);for(let r=0;r<e.length;r++){const n=e[r],o=`${t}[${r}]`;if(null==n)throw new Ae(o,"AbortSignal",n);qe(n,o)}},validateBoolean:Fe,validateBuffer:We,validateDictionary:ze,validateEncoding:function(e,t){const r=Oe(t),n=e.length;if("hex"===r&&n%2!==0)throw new Ie("encoding",t,`is invalid for data of length ${n}`)},validateFunction:Ve,validateInt32:Ne,validateInteger:Ce,validateNumber:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if("number"!=typeof e)throw new Ae(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&pe(e))throw new Te(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:Ue,validateOneOf:Me,validatePlainFunction:Ze,validatePort:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Port",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===Ee(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new Re(t,e,r);return 0|e},validateSignalName:function(e){if($e(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"signal"),void 0===Pe[e])throw void 0!==Pe[ve(e)]?new xe(e+" (signals must use all capital letters)"):new xe(e)},validateString:$e,validateUint32:je,validateUndefined:Ge,validateUnion:function(e,t,r){if(!ue(r,e))throw new Ae(t,`('${de(r,"|")}')`,e)},validateAbortSignal:qe,validateLinkHeaderValue:function(e){if("string"==typeof e)return Ke(e,"hints"),e;if(ce(e)){const t=e.length;let r="";if(0===t)return r;for(let n=0;n<t;n++){const o=e[n];Ke(o,"hints"),r+=o,n!==t-1&&(r+=", ")}return r}throw new Ie("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}},Ye={exports:{}};const{SymbolAsyncIterator:Qe,SymbolIterator:et,SymbolFor:tt}=H,rt=tt("nodejs.stream.destroyed"),nt=tt("nodejs.stream.errored"),ot=tt("nodejs.stream.readable"),it=tt("nodejs.stream.writable"),st=tt("nodejs.stream.disturbed"),at=tt("nodejs.webstream.isClosedPromise"),lt=tt("nodejs.webstream.controllerErrorFunction");function ct(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function ut(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function dt(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function ft(e){return!(!e||dt(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function ht(e){return!(!e||dt(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function pt(e){return!(!e||dt(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function gt(e){if(!dt(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[rt]||null!=n&&n.destroyed)}function bt(e){if(!ut(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function mt(e,t){if(!ct(e))return null;const r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function yt(e){return e&&null!=e[ot]?e[ot]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!gt(e)&&(ct(e)&&e.readable&&!mt(e))}function wt(e){return e&&null!=e[it]?e[it]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!gt(e)&&(ut(e)&&e.writable&&!bt(e))}function _t(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function vt(e){return"boolean"==typeof e._sent100&&_t(e)}var Et={isDestroyed:gt,kIsDestroyed:rt,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[st])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:st,isErrored:function(e){var t,r,n,o,i,s,a,l,c,u;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(o=null!==(i=null!==(s=e[nt])&&void 0!==s?s:e.readableErrored)&&void 0!==i?i:e.writableErrored)&&void 0!==o?o:null===(a=e._readableState)||void 0===a?void 0:a.errorEmitted)&&void 0!==n?n:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null!==(u=e._writableState)&&void 0!==u&&u.errored))},kIsErrored:nt,isReadable:yt,kIsReadable:ot,kIsClosedPromise:at,kControllerErrorFunction:lt,kIsWritable:it,isClosed:function(e){if(!dt(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&_t(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return dt(e)?!!gt(e)||!(!1!==(null==t?void 0:t.readable)&&yt(e)||!1!==(null==t?void 0:t.writable)&&wt(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[Qe]:!1===t?"function"==typeof e[et]:"function"==typeof e[Qe]||"function"==typeof e[et])},isReadableNodeStream:ct,isReadableStream:ft,isReadableEnded:function(e){if(!ct(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:mt,isReadableErrored:function(e){var t,r;return dt(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:dt,isWebStream:function(e){return ft(e)||ht(e)||pt(e)},isWritable:wt,isWritableNodeStream:ut,isWritableStream:ht,isWritableEnded:bt,isWritableFinished:function(e,t){if(!ut(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return dt(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:vt,willEmitClose:function(e){if(!dt(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&vt(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:pt};const St=n.cl,{AbortError:Rt,codes:At}=le,{ERR_INVALID_ARG_TYPE:It,ERR_STREAM_PREMATURE_CLOSE:Tt}=At,{kEmptyObject:xt,once:Ot}=Z,{validateAbortSignal:kt,validateFunction:Lt,validateObject:Pt,validateBoolean:Bt}=Xe,{Promise:Ct,PromisePrototypeThen:Nt,SymbolDispose:jt}=H,{isClosed:$t,isReadable:Mt,isReadableNodeStream:Ft,isReadableStream:Dt,isReadableFinished:Ut,isReadableErrored:zt,isWritable:Ht,isWritableNodeStream:Wt,isWritableStream:qt,isWritableFinished:Vt,isWritableErrored:Zt,isNodeStream:Gt,willEmitClose:Jt,kIsClosedPromise:Kt}=Et;let Xt;const Yt=()=>{};function Qt(e,t,r){var n,o;if(2===arguments.length?(r=t,t=xt):null==t?t=xt:Pt(t,"options"),Lt(r,"callback"),kt(t.signal,"options.signal"),r=Ot(r),Dt(e)||qt(e))return function(e,t,r){let n=!1,o=Yt;if(t.signal)if(o=()=>{n=!0,r.call(e,new Rt(void 0,{cause:t.signal.reason}))},t.signal.aborted)St.nextTick(o);else{Xt=Xt||Z.addAbortListener;const n=Xt(t.signal,o),i=r;r=Ot((function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];n[jt](),i.apply(e,r)}))}const i=function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];n||St.nextTick((()=>r.apply(e,o)))};return Nt(e[Kt].promise,i,i),Yt}(e,t,r);if(!Gt(e))throw new It("stream",["ReadableStream","WritableStream","Stream"],e);const i=null!==(n=t.readable)&&void 0!==n?n:Ft(e),s=null!==(o=t.writable)&&void 0!==o?o:Wt(e),a=e._writableState,l=e._readableState,c=()=>{e.writable||f()};let u=Jt(e)&&Ft(e)===i&&Wt(e)===s,d=Vt(e,!1);const f=()=>{d=!0,e.destroyed&&(u=!1),(!u||e.readable&&!i)&&(!i||h)&&r.call(e)};let h=Ut(e,!1);const p=()=>{h=!0,e.destroyed&&(u=!1),(!u||e.writable&&!s)&&(!s||d)&&r.call(e)},g=t=>{r.call(e,t)};let b=$t(e);const m=()=>{b=!0;const t=Zt(e)||zt(e);return t&&"boolean"!=typeof t?r.call(e,t):i&&!h&&Ft(e,!0)&&!Ut(e,!1)?r.call(e,new Tt):!s||d||Vt(e,!1)?void r.call(e):r.call(e,new Tt)},y=()=>{b=!0;const t=Zt(e)||zt(e);if(t&&"boolean"!=typeof t)return r.call(e,t);r.call(e)},w=()=>{e.req.on("finish",f)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?s&&!a&&(e.on("end",c),e.on("close",c)):(e.on("complete",f),u||e.on("abort",m),e.req?w():e.on("request",w)),!u&&"boolean"==typeof e.aborted&&e.on("aborted",m),e.on("end",p),e.on("finish",f),!1!==t.error&&e.on("error",g),e.on("close",m),b?St.nextTick(m):null!=a&&a.errorEmitted||null!=l&&l.errorEmitted?u||St.nextTick(y):(!i&&(!u||Mt(e))&&(d||!1===Ht(e))||!s&&(!u||Ht(e))&&(h||!1===Mt(e))||l&&e.req&&e.aborted)&&St.nextTick(y);const _=()=>{r=Yt,e.removeListener("aborted",m),e.removeListener("complete",f),e.removeListener("abort",m),e.removeListener("request",w),e.req&&e.req.removeListener("finish",f),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",m)};if(t.signal&&!b){const n=()=>{const n=r;_(),n.call(e,new Rt(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)St.nextTick(n);else{Xt=Xt||Z.addAbortListener;const o=Xt(t.signal,n),i=r;r=Ot((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];o[jt](),i.apply(e,r)}))}}return _}Ye.exports=Qt,Ye.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=xt),null!==(r=t)&&void 0!==r&&r.cleanup&&(Bt(t.cleanup,"cleanup"),n=t.cleanup),new Ct(((r,o)=>{const i=Qt(e,t,(e=>{n&&i(),e?o(e):r()}))}))};var er=Ye.exports;const tr=n.cl,{aggregateTwoErrors:rr,codes:{ERR_MULTIPLE_CALLBACK:nr},AbortError:or}=le,{Symbol:ir}=H,{kIsDestroyed:sr,isDestroyed:ar,isFinished:lr,isServerRequest:cr}=Et,ur=ir("kDestroy"),dr=ir("kConstruct");function fr(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function hr(e,t,r){let n=!1;function o(t){if(n)return;n=!0;const o=e._readableState,i=e._writableState;fr(t,i,o),i&&(i.closed=!0),o&&(o.closed=!0),"function"==typeof r&&r(t),t?tr.nextTick(pr,e,t):tr.nextTick(gr,e)}try{e._destroy(t||null,o)}catch(i){o(i)}}function pr(e,t){br(e,t),gr(e)}function gr(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function br(e,t){const r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function mr(e,t,r){const n=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=n&&n.destroyed)return this;null!=n&&n.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),n&&!n.errored&&(n.errored=t),r?tr.nextTick(br,e,t):br(e,t))}function yr(e){let t=!1;function r(r){if(t)return void mr(e,r??new nr);t=!0;const n=e._readableState,o=e._writableState,i=o||n;n&&(n.constructed=!0),o&&(o.constructed=!0),i.destroyed?e.emit(ur,r):r?mr(e,r,!0):tr.nextTick(wr,e)}try{e._construct((e=>{tr.nextTick(r,e)}))}catch(n){tr.nextTick(r,n)}}function wr(e){e.emit(dr)}function _r(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function vr(e){e.emit("close")}function Er(e,t){e.emit("error",t),tr.nextTick(vr,e)}var Sr={construct:function(e,t){if("function"!=typeof e._construct)return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(dr,t),!(e.listenerCount(dr)>1)&&tr.nextTick(yr,e)},destroyer:function(e,t){!e||ar(e)||(!t&&!lr(e)&&(t=new or),cr(e)?(e.socket=null,e.destroy(t)):_r(e)?e.abort():_r(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?tr.nextTick(Er,e,t):tr.nextTick(vr,e),e.destroyed||(e[sr]=!0))},destroy:function(e,t){const r=this._readableState,n=this._writableState,o=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(fr(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?hr(this,e,t):this.once(ur,(function(r){hr(this,rr(r,e),t)})),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:mr};const{ArrayIsArray:Rr,ObjectSetPrototypeOf:Ar}=H,{EventEmitter:Ir}=n.y;function Tr(e){Ir.call(this,e)}function xr(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Rr(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}Ar(Tr.prototype,Ir.prototype),Ar(Tr,Ir),Tr.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",o),!e._isStdio&&(!t||!1!==t.end)&&(r.on("end",s),r.on("close",a));let i=!1;function s(){i||(i=!0,e.end())}function a(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){c(),0===Ir.listenerCount(this,"error")&&this.emit("error",e)}function c(){r.removeListener("data",n),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return xr(r,"error",l),xr(e,"error",l),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};var Or={Stream:Tr,prependListener:xr},kr={exports:{}};!function(e){const{SymbolDispose:t}=H,{AbortError:r,codes:n}=le,{isNodeStream:o,isWebStream:i,kControllerErrorFunction:s}=Et,a=er,{ERR_INVALID_ARG_TYPE:l}=n;let c;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new l(t,"AbortSignal",e)})(t,"signal"),!o(r)&&!i(r))throw new l("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,n){if("object"!=typeof e||!("aborted"in e))return n;const i=o(n)?()=>{n.destroy(new r(void 0,{cause:e.reason}))}:()=>{n[s](new r(void 0,{cause:e.reason}))};if(e.aborted)i();else{c=c||Z.addAbortListener;const r=c(e,i);a(n,r[t])}return n}}(kr);var Lr=kr.exports;const{StringPrototypeSlice:Pr,SymbolIterator:Br,TypedArrayPrototypeSet:Cr,Uint8Array:Nr}=H,{Buffer:jr}=n.n,{inspect:$r}=Z;var Mr=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return jr.alloc(0);const t=jr.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)Cr(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Br](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,n=0;do{const o=r.data;if(!(e>o.length)){e===o.length?(t+=o,++n,r.next?this.head=r.next:this.head=this.tail=null):(t+=Pr(o,0,e),this.head=r,r.data=Pr(o,e));break}t+=o,e-=o.length,++n}while(null!==(r=r.next));return this.length-=n,t}_getBuffer(e){const t=jr.allocUnsafe(e),r=e;let n=this.head,o=0;do{const i=n.data;if(!(e>i.length)){e===i.length?(Cr(t,i,r-e),++o,n.next?this.head=n.next:this.head=this.tail=null):(Cr(t,new Nr(i.buffer,i.byteOffset,e),r-e),this.head=n,n.data=i.slice(e));break}Cr(t,i,r-e),e-=i.length,++o}while(null!==(n=n.next));return this.length-=o,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return $r(this,{...t,depth:0,customInspect:!1})}};const{MathFloor:Fr,NumberIsInteger:Dr}=H,{validateInteger:Ur}=Xe,{ERR_INVALID_ARG_VALUE:zr}=le.codes;let Hr=16384,Wr=16;function qr(e){return e?Wr:Hr}var Vr={getHighWaterMark:function(e,t,r,n){const o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=o){if(!Dr(o)||o<0){throw new zr(n?`options.${r}`:"options.highWaterMark",o)}return Fr(o)}return qr(e.objectMode)},getDefaultHighWaterMark:qr,setDefaultHighWaterMark:function(e,t){Ur(t,"value",0),e?Wr=t:Hr=t}};const Zr=n.cl,{PromisePrototypeThen:Gr,SymbolAsyncIterator:Jr,SymbolIterator:Kr}=H,{Buffer:Xr}=n.n,{ERR_INVALID_ARG_TYPE:Yr,ERR_STREAM_NULL_VALUES:Qr}=le.codes;var en,tn,rn,nn,on,sn,an,ln,cn=function(e,t,r){let n,o;if("string"==typeof t||t instanceof Xr)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[Jr])o=!0,n=t[Jr]();else{if(!t||!t[Kr])throw new Yr("iterable",["Iterable"],t);o=!1,n=t[Kr]()}const i=new e({objectMode:!0,highWaterMark:1,...r});let s=!1;return i._read=function(){s||(s=!0,async function(){for(;;){try{const{value:e,done:t}=o?await n.next():n.next();if(t)i.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw s=!1,new Qr;if(i.push(t))continue;s=!1}}catch(e){i.destroy(e)}break}}())},i._destroy=function(e,t){Gr(async function(e){const t=null!=e,r="function"==typeof n.throw;if(t&&r){const{value:t,done:r}=await n.throw(e);if(await t,r)return}if("function"==typeof n.return){const{value:e}=await n.return();await e}}(e),(()=>Zr.nextTick(t,e)),(r=>Zr.nextTick(t,r||e)))},i};function un(){if(tn)return en;tn=1;const e=n.cl,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:o,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:a,ObjectSetPrototypeOf:l,Promise:c,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:f,Symbol:h}=H;en=J,J.ReadableState=G;const{EventEmitter:p}=n.y,{Stream:g,prependListener:b}=Or,{Buffer:m}=n.n,{addAbortSignal:y}=Lr,w=er;let _=Z.debuglog("stream",(e=>{_=e}));const v=Mr,E=Sr,{getHighWaterMark:S,getDefaultHighWaterMark:R}=Vr,{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:I,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_OUT_OF_RANGE:x,ERR_STREAM_PUSH_AFTER_EOF:O,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:k},AbortError:L}=le,{validateObject:P}=Xe,B=h("kPaused"),{StringDecoder:C}=(0,n.cm)(),N=cn;l(J.prototype,g.prototype),l(J,g);const j=()=>{},{errorOrDestroy:$}=E,M=1,F=16,D=32,U=64,z=2048,W=4096,q=65536;function V(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function G(e,t,r){"boolean"!=typeof r&&(r=t instanceof hn()),this.state=z|W|F|D,e&&e.objectMode&&(this.state|=M),r&&e&&e.readableObjectMode&&(this.state|=M),this.highWaterMark=e?S(this,e,"readableHighWaterMark",r):R(!1),this.buffer=new v,this.length=0,this.pipes=[],this.flowing=null,this[B]=null,e&&!1===e.emitClose&&(this.state&=~z),e&&!1===e.autoDestroy&&(this.state&=~W),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new C(e.encoding),this.encoding=e.encoding)}function J(e){if(!(this instanceof J))return new J(e);const t=this instanceof hn();this._readableState=new G(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&y(e.signal,this)),g.call(this,e),E.construct(this,(()=>{this._readableState.needReadable&&te(this,this._readableState)}))}function K(e,t,r,n){_("readableAddChunk",t);const o=e._readableState;let i;if(o.state&M||("string"==typeof t?(r=r||o.defaultEncoding,o.encoding!==r&&(n&&o.encoding?t=m.from(t,r).toString(o.encoding):(t=m.from(t,r),r=""))):t instanceof m?r="":g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),r=""):null!=t&&(i=new I("chunk",["string","Buffer","Uint8Array"],t))),i)$(e,i);else if(null===t)o.state&=-9,function(e,t){if(_("onEofChunk"),!t.ended){if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Q(e):(t.needReadable=!1,t.emittedReadable=!0,ee(e))}}(e,o);else if(o.state&M||t&&t.length>0)if(n)if(4&o.state)$(e,new k);else{if(o.destroyed||o.errored)return!1;X(e,o,t,!0)}else if(o.ended)$(e,new O);else{if(o.destroyed||o.errored)return!1;o.state&=-9,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?X(e,o,t,!1):te(e,o)):X(e,o,t,!1)}else n||(o.state&=-9,te(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function X(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.state&q?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.state&U&&Q(e)),te(e,t)}s(G.prototype,{objectMode:V(M),ended:V(2),endEmitted:V(4),reading:V(8),constructed:V(F),sync:V(D),needReadable:V(U),emittedReadable:V(128),readableListening:V(256),resumeScheduled:V(512),errorEmitted:V(1024),emitClose:V(z),autoDestroy:V(W),destroyed:V(8192),closed:V(16384),closeEmitted:V(32768),multiAwaitDrain:V(q),readingMore:V(1<<17),dataEmitted:V(1<<18)}),J.prototype.destroy=E.destroy,J.prototype._undestroy=E.undestroy,J.prototype._destroy=function(e,t){t(e)},J.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},J.prototype[d]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new L,this.destroy(e)),new c(((t,r)=>w(this,(n=>n&&n!==e?r(n):t(null)))))},J.prototype.push=function(e,t){return K(this,e,t,!1)},J.prototype.unshift=function(e,t){return K(this,e,t,!0)},J.prototype.isPaused=function(){const e=this._readableState;return!0===e[B]||!1===e.flowing},J.prototype.setEncoding=function(e){const t=new C(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let n="";for(const o of r)n+=t.write(o);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};function Y(e,t){return e<=0||0===t.length&&t.ended?0:t.state&M?1:o(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function Q(t){const r=t._readableState;_("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(_("emitReadable",r.flowing),r.emittedReadable=!0,e.nextTick(ee,t))}function ee(e){const t=e._readableState;_("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,se(e)}function te(t,r){!r.readingMore&&r.constructed&&(r.readingMore=!0,e.nextTick(re,t,r))}function re(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(_("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function ne(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[B]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function oe(e){_("readable nexttick read 0"),e.read(0)}function ie(e,t){_("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),se(e),t.flowing&&!t.reading&&e.read(0)}function se(e){const t=e._readableState;for(_("flow",t.flowing);t.flowing&&null!==e.read(););}function ae(e,t){"function"!=typeof e.read&&(e=J.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,n=j;function o(t){this===e?(n(),n=j):n=t}e.on("readable",o);const i=w(e,{writable:!1},(e=>{r=e?A(r,e):null,n(),n=j}));try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new c(o)}}}catch(s){throw r=A(r,s),r}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",o),i()):E.destroyer(e,null)}}(e,t);return r.stream=e,r}function ce(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ue(t){const r=t._readableState;_("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,e.nextTick(de,r,t))}function de(t,r){if(_("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&0===t.length)if(t.endEmitted=!0,r.emit("end"),r.writable&&!1===r.allowHalfOpen)e.nextTick(fe,r);else if(t.autoDestroy){const e=r._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&r.destroy()}}function fe(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let he;function pe(){return void 0===he&&(he={}),he}return J.prototype.read=function(e){_("read",e),void 0===e?e=NaN:r(e)||(e=i(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new x("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ue(this):Q(this),null;if(0===(e=Y(e,t))&&t.ended)return 0===t.length&&ue(this),null;let o,s=0!==(t.state&U);if(_("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&(s=!0,_("length less than watermark",s)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)s=!1,_("reading, ended or constructing",s);else if(s){_("do read"),t.state|=8|D,0===t.length&&(t.state|=U);try{this._read(t.highWaterMark)}catch(a){$(this,a)}t.state&=~D,t.reading||(e=Y(n,t))}return o=e>0?ce(e,t):null,null===o?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&ue(this)),null!==o&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",o)),o},J.prototype._read=function(e){throw new T("_read()")},J.prototype.pipe=function(t,r){const n=this,o=this._readableState;1===o.pipes.length&&(o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new u(o.awaitDrainWriters?[o.awaitDrainWriters]:[]))),o.pipes.push(t),_("pipe count=%d opts=%j",o.pipes.length,r);const i=r&&!1===r.end||t===e.stdout||t===e.stderr?m:a;function s(e,r){_("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,_("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),l&&t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",m),n.removeListener("data",f),c=!0,l&&o.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l())}function a(){_("onend"),t.end()}o.endEmitted?e.nextTick(i):n.once("end",i),t.on("unpipe",s);let l,c=!1;function d(){c||(1===o.pipes.length&&o.pipes[0]===t?(_("false write response, pause",0),o.awaitDrainWriters=t,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(t)&&(_("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(t)),n.pause()),l||(l=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(_("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(_("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),(!r.awaitDrainWriters||0===r.awaitDrainWriters.size)&&e.listenerCount("data")&&e.resume()}}(n,t),t.on("drain",l))}function f(e){_("ondata");const r=t.write(e);_("dest.write",r),!1===r&&d()}function h(e){if(_("onerror",e),m(),t.removeListener("error",h),0===t.listenerCount("error")){const r=t._writableState||t._readableState;r&&!r.errorEmitted?$(t,e):t.emit("error",e)}}function p(){t.removeListener("finish",g),m()}function g(){_("onfinish"),t.removeListener("close",p),m()}function m(){_("unpipe"),n.unpipe(t)}return n.on("data",f),b(t,"error",h),t.once("close",p),t.once("finish",g),t.emit("pipe",n),!0===t.writableNeedDrain?d():o.flowing||(_("pipe resume"),n.resume()),t},J.prototype.unpipe=function(e){const r=this._readableState;if(0===r.pipes.length)return this;if(!e){const e=r.pipes;r.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=t(r.pipes,e);return-1===n||(r.pipes.splice(n,1),0===r.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},J.prototype.on=function(t,r){const n=g.prototype.on.call(this,t,r),o=this._readableState;return"data"===t?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===t&&!o.endEmitted&&!o.readableListening&&(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,_("on readable",o.length,o.reading),o.length?Q(this):o.reading||e.nextTick(oe,this)),n},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(t,r){const n=g.prototype.removeListener.call(this,t,r);return"readable"===t&&e.nextTick(ne,this),n},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(t){const r=g.prototype.removeAllListeners.apply(this,arguments);return("readable"===t||void 0===t)&&e.nextTick(ne,this),r},J.prototype.resume=function(){const t=this._readableState;return t.flowing||(_("resume"),t.flowing=!t.readableListening,function(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(ie,t,r))}(this,t)),t[B]=!1,this},J.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[B]=!0,this},J.prototype.wrap=function(e){let t=!1;e.on("data",(r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{$(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=a(e);for(let n=1;n<r.length;n++){const t=r[n];void 0===this[t]&&"function"==typeof e[t]&&(this[t]=e[t].bind(e))}return this},J.prototype[f]=function(){return ae(this)},J.prototype.iterator=function(e){return void 0!==e&&P(e,"options"),ae(this,e)},s(J.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),s(G.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[B]},set(e){this[B]=!!e}}}),J._fromList=ce,J.from=function(e,t){return N(J,e,t)},J.fromWeb=function(e,t){return pe().newStreamReadableFromReadableStream(e,t)},J.toWeb=function(e,t){return pe().newReadableStreamFromStreamReadable(e,t)},J.wrap=function(e,t){var r,n;return new J({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){E.destroyer(e,t),r(t)}}).wrap(e)},en}function dn(){if(nn)return rn;nn=1;const e=n.cl,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:l,Symbol:c,SymbolHasInstance:u}=H;rn=P,P.WritableState=k;const{EventEmitter:d}=n.y,f=Or.Stream,{Buffer:h}=n.n,p=Sr,{addAbortSignal:g}=Lr,{getHighWaterMark:b,getDefaultHighWaterMark:m}=Vr,{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:_,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:I}=le.codes,{errorOrDestroy:T}=p;function x(){}a(P.prototype,f.prototype),a(P,f);const O=c("kOnFinished");function k(e,t,r){"boolean"!=typeof r&&(r=t instanceof hn()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?b(this,e,"writableHighWaterMark",r):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const n=!(!e||!1!==e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=j.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[O]=[]}function L(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function P(e){const t=this instanceof hn();if(!t&&!o(P,this))return new P(e);this._writableState=new k(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&g(e.signal,this)),f.call(this,e),p.construct(this,(()=>{const e=this._writableState;e.writing||D(this,e),W(this,e)}))}function B(t,r,n,o){const i=t._writableState;if("function"==typeof n)o=n,n=i.defaultEncoding;else{if(n){if("buffer"!==n&&!h.isEncoding(n))throw new I(n)}else n=i.defaultEncoding;"function"!=typeof o&&(o=x)}if(null===r)throw new R;if(!i.objectMode)if("string"==typeof r)!1!==i.decodeStrings&&(r=h.from(r,n),n="buffer");else if(r instanceof h)n="buffer";else{if(!f._isUint8Array(r))throw new y("chunk",["string","Buffer","Uint8Array"],r);r=f._uint8ArrayToBuffer(r),n="buffer"}let s;return i.ending?s=new A:i.destroyed&&(s=new E("write")),s?(e.nextTick(o,s),T(t,s,!0),s):(i.pendingcb++,function(e,t,r,n,o){const i=t.objectMode?1:r.length;t.length+=i;const s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:o}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&o!==x&&(t.allNoop=!1)):(t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}(t,i,r,n,o))}function C(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new E("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function N(e,t,r,n){--t.pendingcb,n(r),F(t),T(e,r)}function j(t,r){const n=t._writableState,o=n.sync,i=n.writecb;"function"==typeof i?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,r?(r.stack,n.errored||(n.errored=r),t._readableState&&!t._readableState.errored&&(t._readableState.errored=r),o?e.nextTick(N,t,n,r,i):N(t,n,r,i)):(n.buffered.length>n.bufferedIndex&&D(t,n),o?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},e.nextTick($,n.afterWriteTickInfo)):M(t,n,1,i))):T(t,new _)}function $(e){let{stream:t,state:r,count:n,cb:o}=e;return r.afterWriteTickInfo=null,M(t,r,n,o)}function M(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&F(t),W(e,t)}function F(e){if(e.writing)return;for(let o=e.bufferedIndex;o<e.buffered.length;++o){var t;const{chunk:r,callback:n}=e.buffered[o],i=e.objectMode?1:r.length;e.length-=i,n(null!==(t=e.errored)&&void 0!==t?t:new E("write"))}const r=e[O].splice(0);for(let o=0;o<r.length;o++){var n;r[o](null!==(n=e.errored)&&void 0!==n?n:new E("end"))}L(e)}function D(e,r){if(r.corked||r.bufferProcessing||r.destroyed||!r.constructed)return;const{buffered:n,bufferedIndex:o,objectMode:i}=r,s=n.length-o;if(!s)return;let a=o;if(r.bufferProcessing=!0,s>1&&e._writev){r.pendingcb-=s-1;const o=r.allNoop?x:e=>{for(let t=a;t<n.length;++t)n[t].callback(e)},i=r.allNoop&&0===a?n:t(n,a);i.allBuffers=r.allBuffers,C(e,r,!0,r.length,i,"",o),L(r)}else{do{const{chunk:t,encoding:o,callback:s}=n[a];n[a++]=null;C(e,r,!1,i?1:t.length,t,o,s)}while(a<n.length&&!r.writing);a===n.length?L(r):a>256?(n.splice(0,a),r.bufferedIndex=0):r.bufferedIndex=a}r.bufferProcessing=!1}function U(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function z(t,r){!r.prefinished&&!r.finalCalled&&("function"!=typeof t._final||r.destroyed?(r.prefinished=!0,t.emit("prefinish")):(r.finalCalled=!0,function(t,r){let n=!1;function o(o){if(n)T(t,o??_());else if(n=!0,r.pendingcb--,o){const e=r[O].splice(0);for(let t=0;t<e.length;t++)e[t](o);T(t,o,r.sync)}else U(r)&&(r.prefinished=!0,t.emit("prefinish"),r.pendingcb++,e.nextTick(q,t,r))}r.sync=!0,r.pendingcb++;try{t._final(o)}catch(i){o(i)}r.sync=!1}(t,r)))}function W(t,r,n){U(r)&&(z(t,r),0===r.pendingcb&&(n?(r.pendingcb++,e.nextTick(((e,t)=>{U(t)?q(e,t):t.pendingcb--}),t,r)):U(r)&&(r.pendingcb++,q(t,r))))}function q(e,t){t.pendingcb--,t.finished=!0;const r=t[O].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}k.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(k.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),i(P,u,{__proto__:null,value:function(e){return!!o(this,e)||this===P&&(e&&e._writableState instanceof k)}}),P.prototype.pipe=function(){T(this,new v)},P.prototype.write=function(e,t,r){return!0===B(this,e,t,r)},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||D(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=l(e)),!h.isEncoding(e))throw new I(e);return this._writableState.defaultEncoding=e,this},P.prototype._write=function(e,t,r){if(!this._writev)throw new w("_write()");this._writev([{chunk:e,encoding:t}],r)},P.prototype._writev=null,P.prototype.end=function(t,n,o){const i=this._writableState;let s;if("function"==typeof t?(o=t,t=null,n=null):"function"==typeof n&&(o=n,n=null),null!=t){const e=B(this,t,n);e instanceof r&&(s=e)}return i.corked&&(i.corked=1,this.uncork()),s||(i.errored||i.ending?i.finished?s=new S("end"):i.destroyed&&(s=new E("end")):(i.ending=!0,W(this,i,!0),i.ended=!0)),"function"==typeof o&&(s||i.finished?e.nextTick(o,s):i[O].push(o)),this},s(P.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const V=p.destroy;let Z;function G(){return void 0===Z&&(Z={}),Z}return P.prototype.destroy=function(t,r){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[O].length)&&e.nextTick(F,n),V.call(this,t,r),this},P.prototype._undestroy=p.undestroy,P.prototype._destroy=function(e,t){t(e)},P.prototype[d.captureRejectionSymbol]=function(e){this.destroy(e)},P.fromWeb=function(e,t){return G().newStreamWritableFromWritableStream(e,t)},P.toWeb=function(e){return G().newWritableStreamFromStreamWritable(e)},rn}function fn(){if(sn)return on;sn=1;const e=n.cl,t=n.n,{isReadable:r,isWritable:o,isIterable:i,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:l,isDuplexNodeStream:c,isReadableStream:u,isWritableStream:d}=Et,f=er,{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g}}=le,{destroyer:b}=Sr,m=hn(),y=un(),w=dn(),{createDeferredPromise:_}=Z,v=cn,E=globalThis.Blob||t.Blob,S=typeof E<"u"?function(e){return e instanceof E}:function(e){return!1},R=globalThis.AbortController||V().AbortController,{FunctionPrototypeCall:A}=H;class I extends m{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function T(e){const t=e.readable&&"function"!=typeof e.readable.read?y.wrap(e.readable):e.readable,n=e.writable;let i,s,a,l,c,u=!!r(t),d=!!o(n);function p(e){const t=l;l=null,t?t(e):e&&c.destroy(e)}return c=new I({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:u,writable:d}),d&&(f(n,(e=>{d=!1,e&&b(t,e),p(e)})),c._write=function(e,t,r){n.write(e,t)?r():i=r},c._final=function(e){n.end(),s=e},n.on("drain",(function(){if(i){const e=i;i=null,e()}})),n.on("finish",(function(){if(s){const e=s;s=null,e()}}))),u&&(f(t,(e=>{u=!1,e&&b(t,e),p(e)})),t.on("readable",(function(){if(a){const e=a;a=null,e()}})),t.on("end",(function(){c.push(null)})),c._read=function(){for(;;){const e=t.read();if(null===e)return void(a=c._read);if(!c.push(e))return}}),c._destroy=function(e,r){!e&&null!==l&&(e=new h),a=null,i=null,s=null,null===l?r(e):(l=r,b(n,e),b(t,e))},c}return on=function t(r,n){if(c(r))return r;if(a(r))return T({readable:r});if(l(r))return T({writable:r});if(s(r))return T({writable:!1,readable:!1});if(u(r))return T({readable:y.fromWeb(r)});if(d(r))return T({writable:w.fromWeb(r)});if("function"==typeof r){const{value:t,write:o,final:s,destroy:a}=function(t){let{promise:r,resolve:n}=_();const o=new R,i=o.signal;return{value:t(async function*(){for(;;){const t=r;r=null;const{chunk:o,done:s,cb:a}=await t;if(e.nextTick(a),s)return;if(i.aborted)throw new h(void 0,{cause:i.reason});({promise:r,resolve:n}=_()),yield o}}(),{signal:i}),write(e,t,r){const o=n;n=null,o({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){o.abort(),t(e)}}}(r);if(i(t))return v(I,t,{objectMode:!0,write:o,final:s,destroy:a});const l=null==t?void 0:t.then;if("function"==typeof l){let r;const n=A(l,t,(e=>{if(null!=e)throw new g("nully","body",e)}),(e=>{b(r,e)}));return r=new I({objectMode:!0,readable:!1,write:o,final(t){s((async()=>{try{await n,e.nextTick(t,null)}catch(r){e.nextTick(t,r)}}))},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,t)}if(S(r))return t(r.arrayBuffer());if(i(r))return v(I,r,{objectMode:!0,writable:!1});if(u(null==r?void 0:r.readable)&&d(null==r?void 0:r.writable))return I.fromWeb(r);if("object"==typeof(null==r?void 0:r.writable)||"object"==typeof(null==r?void 0:r.readable)){return T({readable:null!=r&&r.readable?a(null==r?void 0:r.readable)?null==r?void 0:r.readable:t(r.readable):void 0,writable:null!=r&&r.writable?l(null==r?void 0:r.writable)?null==r?void 0:r.writable:t(r.writable):void 0})}const o=null==r?void 0:r.then;if("function"==typeof o){let e;return A(o,r,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{b(e,t)})),e=new I({objectMode:!0,writable:!1,read(){}})}throw new p(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],r)}}function hn(){if(ln)return an;ln=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=H;an=s;const o=un(),i=dn();n(s.prototype,o.prototype),n(s,o);{const e=r(i.prototype);for(let t=0;t<e.length;t++){const r=e[t];s.prototype[r]||(s.prototype[r]=i.prototype[r])}}function s(e){if(!(this instanceof s))return new s(e);o.call(this,e),i.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let a,l;function c(){return void 0===a&&(a={}),a}return e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),s.fromWeb=function(e,t){return c().newStreamDuplexFromReadableWritablePair(e,t)},s.toWeb=function(e){return c().newReadableWritablePairFromDuplex(e)},s.from=function(e){return l||(l=fn()),l(e,"body")},an}const{ObjectSetPrototypeOf:pn,Symbol:gn}=H;var bn=vn;const{ERR_METHOD_NOT_IMPLEMENTED:mn}=le.codes,yn=hn(),{getHighWaterMark:wn}=Vr;pn(vn.prototype,yn.prototype),pn(vn,yn);const _n=gn("kCallback");function vn(e){if(!(this instanceof vn))return new vn(e);const t=e?wn(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),yn.call(this,e),this._readableState.sync=!1,this[_n]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",Sn)}function En(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())}))}function Sn(){this._final!==En&&En.call(this)}vn.prototype._final=En,vn.prototype._transform=function(e,t,r){throw new mn("_transform()")},vn.prototype._write=function(e,t,r){const n=this._readableState,o=this._writableState,i=n.length;this._transform(e,t,((e,t)=>{e?r(e):(null!=t&&this.push(t),o.ended||i===n.length||n.length<n.highWaterMark?r():this[_n]=r)}))},vn.prototype._read=function(){if(this[_n]){const e=this[_n];this[_n]=null,e()}};const{ObjectSetPrototypeOf:Rn}=H;var An=Tn;const In=bn;function Tn(e){if(!(this instanceof Tn))return new Tn(e);In.call(this,e)}Rn(Tn.prototype,In.prototype),Rn(Tn,In),Tn.prototype._transform=function(e,t,r){r(null,e)};const xn=n.cl,{ArrayIsArray:On,Promise:kn,SymbolAsyncIterator:Ln,SymbolDispose:Pn}=H,Bn=er,{once:Cn}=Z,Nn=Sr,jn=hn(),{aggregateTwoErrors:$n,codes:{ERR_INVALID_ARG_TYPE:Mn,ERR_INVALID_RETURN_VALUE:Fn,ERR_MISSING_ARGS:Dn,ERR_STREAM_DESTROYED:Un,ERR_STREAM_PREMATURE_CLOSE:zn},AbortError:Hn}=le,{validateFunction:Wn,validateAbortSignal:qn}=Xe,{isIterable:Vn,isReadable:Zn,isReadableNodeStream:Gn,isNodeStream:Jn,isTransformStream:Kn,isWebStream:Xn,isReadableStream:Yn,isReadableFinished:Qn}=Et,eo=globalThis.AbortController||V().AbortController;let to,ro,no;function oo(e,t,r){let n=!1;e.on("close",(()=>{n=!0}));return{destroy:t=>{n||(n=!0,Nn.destroyer(e,t||new Un("pipe")))},cleanup:Bn(e,{readable:t,writable:r},(e=>{n=!e}))}}function io(e){if(Vn(e))return e;if(Gn(e))return async function*(e){ro||(ro=un()),yield*ro.prototype[Ln].call(e)}(e);throw new Mn("val",["Readable","Iterable","AsyncIterable"],e)}async function so(e,t,r,n){let o,{end:i}=n,s=null;const a=e=>{if(e&&(o=e),s){const e=s;s=null,e()}},l=()=>new kn(((e,t)=>{o?t(o):s=()=>{o?t(o):e()}}));t.on("drain",a);const c=Bn(t,{readable:!1},a);try{t.writableNeedDrain&&await l();for await(const r of e)t.write(r)||await l();i&&(t.end(),await l()),r()}catch(u){r(o!==u?$n(o,u):u)}finally{c(),t.off("drain",a)}}async function ao(e,t,r,n){let{end:o}=n;Kn(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch((()=>{}));await i.ready,o&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(a){r(a)}}}function lo(e,t,r){if(1===e.length&&On(e[0])&&(e=e[0]),e.length<2)throw new Dn("streams");const n=new eo,o=n.signal,i=null==r?void 0:r.signal,s=[];function a(){g(new Hn)}let l,c,u;qn(i,"options.signal"),no=no||Z.addAbortListener,i&&(l=no(i,a));const d=[];let f,h=0;function p(e){g(e,0===--h)}function g(e,r){var o;if(e&&(!c||"ERR_STREAM_PREMATURE_CLOSE"===c.code)&&(c=e),c||r){for(;d.length;)d.shift()(c);null===(o=l)||void 0===o||o[Pn](),n.abort(),r&&(c||s.forEach((e=>e())),xn.nextTick(t,c,u))}}for(let y=0;y<e.length;y++){const t=e[y],n=y<e.length-1,i=y>0,a=n||!1!==(null==r?void 0:r.end),l=y===e.length-1;if(Jn(t)){let e=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&p(e)};if(a){const{destroy:e,cleanup:r}=oo(t,n,i);d.push(e),Zn(t)&&l&&s.push(r)}t.on("error",e),Zn(t)&&l&&s.push((()=>{t.removeListener("error",e)}))}if(0===y)if("function"==typeof t){if(f=t({signal:o}),!Vn(f))throw new Fn("Iterable, AsyncIterable or Stream","source",f)}else f=Vn(t)||Gn(t)||Kn(t)?t:jn.from(t);else if("function"==typeof t){var b;if(Kn(f))f=io(null===(b=f)||void 0===b?void 0:b.readable);else f=io(f);if(f=t(f,{signal:o}),n){if(!Vn(f,!0))throw new Fn("AsyncIterable",`transform[${y-1}]`,f)}else{var m;to||(to=An);const e=new to({objectMode:!0}),t=null===(m=f)||void 0===m?void 0:m.then;if("function"==typeof t)h++,t.call(f,(t=>{u=t,null!=t&&e.write(t),a&&e.end(),xn.nextTick(p)}),(t=>{e.destroy(t),xn.nextTick(p,t)}));else if(Vn(f,!0))h++,so(f,e,p,{end:a});else{if(!Yn(f)&&!Kn(f))throw new Fn("AsyncIterable or Promise","destination",f);{const t=f.readable||f;h++,so(t,e,p,{end:a})}}f=e;const{destroy:r,cleanup:n}=oo(f,!1,!0);d.push(r),l&&s.push(n)}}else if(Jn(t)){if(Gn(f)){h+=2;const e=co(f,t,p,{end:a});Zn(t)&&l&&s.push(e)}else if(Kn(f)||Yn(f)){const e=f.readable||f;h++,so(e,t,p,{end:a})}else{if(!Vn(f))throw new Mn("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);h++,so(f,t,p,{end:a})}f=t}else if(Xn(t)){if(Gn(f))h++,ao(io(f),t,p,{end:a});else if(Yn(f)||Vn(f))h++,ao(f,t,p,{end:a});else{if(!Kn(f))throw new Mn("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);h++,ao(f.readable,t,p,{end:a})}f=t}else f=jn.from(t)}return(null!=o&&o.aborted||null!=i&&i.aborted)&&xn.nextTick(a),f}function co(e,t,r,n){let{end:o}=n,i=!1;if(t.on("close",(()=>{i||r(new zn)})),e.pipe(t,{end:!1}),o){let r=function(){i=!0,t.end()};Qn(e)?xn.nextTick(r):e.once("end",r)}else r();return Bn(e,{readable:!0,writable:!1},(t=>{const n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)})),Bn(t,{readable:!1,writable:!0},r)}var uo={pipelineImpl:lo,pipeline:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return lo(t,Cn(function(e){return Wn(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(t)))}};const{pipeline:fo}=uo,ho=hn(),{destroyer:po}=Sr,{isNodeStream:go,isReadable:bo,isWritable:mo,isWebStream:yo,isTransformStream:wo,isWritableStream:_o,isReadableStream:vo}=Et,{AbortError:Eo,codes:{ERR_INVALID_ARG_VALUE:So,ERR_MISSING_ARGS:Ro}}=le,Ao=er;var Io=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Ro("streams");if(1===t.length)return ho.from(t[0]);const n=[...t];if("function"==typeof t[0]&&(t[0]=ho.from(t[0])),"function"==typeof t[t.length-1]){const e=t.length-1;t[e]=ho.from(t[e])}for(let h=0;h<t.length;++h)if(go(t[h])||yo(t[h])){if(h<t.length-1&&!(bo(t[h])||vo(t[h])||wo(t[h])))throw new So(`streams[${h}]`,n[h],"must be readable");if(h>0&&!(mo(t[h])||_o(t[h])||wo(t[h])))throw new So(`streams[${h}]`,n[h],"must be writable")}let o,i,s,a,l;const c=t[0],u=fo(t,(function(e){const t=a;a=null,t?t(e):e?l.destroy(e):!f&&!d&&l.destroy()})),d=!!(mo(c)||_o(c)||wo(c)),f=!!(bo(u)||vo(u)||wo(u));if(l=new ho({writableObjectMode:!(null==c||!c.writableObjectMode),readableObjectMode:!(null==u||!u.readableObjectMode),writable:d,readable:f}),d){if(go(c))l._write=function(e,t,r){c.write(e,t)?r():o=r},l._final=function(e){c.end(),i=e},c.on("drain",(function(){if(o){const e=o;o=null,e()}}));else if(yo(c)){const e=(wo(c)?c.writable:c).getWriter();l._write=async function(t,r,n){try{await e.ready,e.write(t).catch((()=>{})),n()}catch(o){n(o)}},l._final=async function(t){try{await e.ready,e.close().catch((()=>{})),i=t}catch(r){t(r)}}}const e=wo(u)?u.readable:u;Ao(e,(()=>{if(i){const e=i;i=null,e()}}))}if(f)if(go(u))u.on("readable",(function(){if(s){const e=s;s=null,e()}})),u.on("end",(function(){l.push(null)})),l._read=function(){for(;;){const e=u.read();if(null===e)return void(s=l._read);if(!l.push(e))return}};else if(yo(u)){const e=(wo(u)?u.readable:u).getReader();l._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!l.push(t))return;if(r)return void l.push(null)}catch{return}}}return l._destroy=function(e,t){!e&&null!==a&&(e=new Eo),s=null,o=null,i=null,null===a?t(e):(a=t,go(u)&&po(u,e))},l};const To=globalThis.AbortController||V().AbortController,{codes:{ERR_INVALID_ARG_VALUE:xo,ERR_INVALID_ARG_TYPE:Oo,ERR_MISSING_ARGS:ko,ERR_OUT_OF_RANGE:Lo},AbortError:Po}=le,{validateAbortSignal:Bo,validateInteger:Co,validateObject:No}=Xe,jo=H.Symbol("kWeak"),$o=H.Symbol("kResistStopPropagation"),{finished:Mo}=er,Fo=Io,{addAbortSignalNoValidate:Do}=Lr,{isWritable:Uo,isNodeStream:zo}=Et,{deprecate:Ho}=Z,{ArrayPrototypePush:Wo,Boolean:qo,MathFloor:Vo,Number:Zo,NumberIsNaN:Go,Promise:Jo,PromiseReject:Ko,PromiseResolve:Xo,PromisePrototypeThen:Yo,Symbol:Qo}=H,ei=Qo("kEmpty"),ti=Qo("kEof");function ri(e,t){if("function"!=typeof e)throw new Oo("fn",["Function","AsyncFunction"],e);null!=t&&No(t,"options"),null!=(null==t?void 0:t.signal)&&Bo(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=Vo(t.concurrency));let n=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(n=Vo(t.highWaterMark)),Co(r,"options.concurrency",1),Co(n,"options.highWaterMark",0),n+=r,async function*(){const o=Z.AbortSignalAny([null==t?void 0:t.signal].filter(qo)),i=this,s=[],a={signal:o};let l,c,u=!1,d=0;function f(){u=!0,h()}function h(){d-=1,p()}function p(){c&&!u&&d<r&&s.length<n&&(c(),c=null)}!async function(){try{for await(let p of i){if(u)return;if(o.aborted)throw new Po;try{if(p=e(p,a),p===ei)continue;p=Xo(p)}catch(t){p=Ko(t)}d+=1,Yo(p,h,f),s.push(p),l&&(l(),l=null),!u&&(s.length>=n||d>=r)&&await new Jo((e=>{c=e}))}s.push(ti)}catch(p){const e=Ko(p);Yo(e,h,f),s.push(e)}finally{u=!0,l&&(l(),l=null)}}();try{for(;;){for(;s.length>0;){const e=await s[0];if(e===ti)return;if(o.aborted)throw new Po;e!==ei&&(yield e),s.shift(),p()}await new Jo((e=>{l=e}))}}finally{u=!0,c&&(c(),c=null)}}.call(this)}async function ni(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for await(const r of oi.call(this,e,t))return!0;return!1}function oi(e,t){if("function"!=typeof e)throw new Oo("fn",["Function","AsyncFunction"],e);return ri.call(this,(async function(t,r){return await e(t,r)?t:ei}),t)}class ii extends ko{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function si(e){if(e=Zo(e),Go(e))return 0;if(e<0)throw new Lo("number",">= 0",e);return e}var ai,li,ci;function ui(){if(li)return ai;li=1;const{ArrayPrototypePop:e,Promise:t}=H,{isIterable:r,isNodeStream:n,isWebStream:o}=Et,{pipelineImpl:i}=uo,{finished:s}=er;return di(),ai={finished:s,pipeline:function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return new t(((t,s)=>{let l,c;const u=a[a.length-1];if(u&&"object"==typeof u&&!n(u)&&!r(u)&&!o(u)){const t=e(a);l=t.signal,c=t.end}i(a,((e,r)=>{e?s(e):t(r)}),{signal:l,end:c})}))}},ai}function di(){if(ci)return z.exports;ci=1;const{Buffer:e}=n.n,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:o}=H,{promisify:{custom:i}}=Z,{streamReturningOperators:s,promiseReturningOperators:a}=G,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=le,c=Io,{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Vr,{pipeline:f}=uo,{destroyer:h}=Sr,p=er,g=ui(),b=Et,m=z.exports=Or.Stream;m.isDestroyed=b.isDestroyed,m.isDisturbed=b.isDisturbed,m.isErrored=b.isErrored,m.isReadable=b.isReadable,m.isWritable=b.isWritable,m.Readable=un();for(const n of r(s)){let e=function(){if(new.target)throw l();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.Readable.from(o(r,this,t))};const r=s[n];t(e,"name",{__proto__:null,value:r.name}),t(e,"length",{__proto__:null,value:r.length}),t(m.Readable.prototype,n,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}for(const n of r(a)){let e=function(){if(new.target)throw l();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o(r,this,t)};const r=a[n];t(e,"name",{__proto__:null,value:r.name}),t(e,"length",{__proto__:null,value:r.length}),t(m.Readable.prototype,n,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}m.Writable=dn(),m.Duplex=hn(),m.Transform=bn,m.PassThrough=An,m.pipeline=f;const{addAbortSignal:y}=Lr;return m.addAbortSignal=y,m.finished=p,m.destroy=h,m.compose=c,m.setDefaultHighWaterMark=u,m.getDefaultHighWaterMark=d,t(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),t(f,i,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),t(p,i,{__proto__:null,enumerable:!0,get:()=>g.finished}),m.Stream=m,m._isUint8Array=function(e){return e instanceof Uint8Array},m._uint8ArrayToBuffer=function(t){return e.from(t.buffer,t.byteOffset,t.byteLength)},z.exports}G.streamReturningOperators={asIndexedPairs:Ho((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return null!=e&&No(e,"options"),null!=(null==e?void 0:e.signal)&&Bo(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new Po({cause:e.signal.reason});yield[t++,n]}}.call(this)}),"readable.asIndexedPairs will be removed in a future version."),drop:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&No(t,"options"),null!=(null==t?void 0:t.signal)&&Bo(t.signal,"options.signal"),e=si(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new Po;for await(const o of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new Po;e--<=0&&(yield o)}}.call(this)},filter:oi,flatMap:function(e,t){const r=ri.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:ri,take:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return null!=t&&No(t,"options"),null!=(null==t?void 0:t.signal)&&Bo(t.signal,"options.signal"),e=si(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new Po;for await(const o of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new Po;if(e-- >0&&(yield o),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&No(t,"options"),null!=(null==t?void 0:t.signal)&&Bo(t.signal,"options.signal"),zo(e)&&!Uo(e))throw new xo("stream",e,"must be writable");const r=Fo(this,e);return null!=t&&t.signal&&Do(t.signal,r),r}},G.promiseReturningOperators={every:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("function"!=typeof e)throw new Oo("fn",["Function","AsyncFunction"],e);return!await ni.call(this,(async function(){return!await e(...arguments)}),t)},forEach:async function(e,t){if("function"!=typeof e)throw new Oo("fn",["Function","AsyncFunction"],e);for await(const r of ri.call(this,(async function(t,r){return await e(t,r),ei}),t));},reduce:async function(e,t,r){var n;if("function"!=typeof e)throw new Oo("reducer",["Function","AsyncFunction"],e);null!=r&&No(r,"options"),null!=(null==r?void 0:r.signal)&&Bo(r.signal,"options.signal");let o=arguments.length>1;if(null!=r&&null!==(n=r.signal)&&void 0!==n&&n.aborted){const e=new Po(void 0,{cause:r.signal.reason});throw this.once("error",(()=>{})),await Mo(this.destroy(e)),e}const i=new To,s=i.signal;if(null!=r&&r.signal){const e={once:!0,[jo]:this,[$o]:!0};r.signal.addEventListener("abort",(()=>i.abort()),e)}let a=!1;try{for await(const n of this){var l;if(a=!0,null!=r&&null!==(l=r.signal)&&void 0!==l&&l.aborted)throw new Po;o?t=await e(t,n,{signal:s}):(t=n,o=!0)}if(!a&&!o)throw new ii}finally{i.abort()}return t},toArray:async function(e){null!=e&&No(e,"options"),null!=(null==e?void 0:e.signal)&&Bo(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new Po(void 0,{cause:e.signal.reason});Wo(t,n)}return t},some:ni,find:async function(e,t){for await(const r of oi.call(this,e,t))return r}},function(e){const t=di(),r=ui(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>r}),e.exports.Stream=t.Stream,e.exports.default=e.exports}({exports:{}});var fi={},hi={},pi={};class gi extends TypeError{constructor(e,t){let r;const{message:n,explanation:o,...i}=e,{path:s}=e,a=0===s.length?n:`At path: ${s.join(".")} -- ${n}`;super(o??a),null!=o&&(this.cause=a),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function bi(e){return"object"==typeof e&&null!=e}function mi(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function yi(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function wi(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:o,branch:i}=t,{type:s}=r,{refinement:a,message:l=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${yi(n)}\``}=e;return{value:n,type:s,refinement:a,key:o[o.length-1],path:o,branch:i,...e,message:l}}function*_i(e,t,r,n){(function(e){return bi(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const o of e){const e=wi(o,t,r,n);e&&(yield e)}}function vi(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const{path:n=[],branch:o=[e],coerce:i=!1,mask:s=!1}=r,a={path:n,branch:o};if(i&&(e=t.coercer(e,a),s&&"type"!==t.type&&bi(t.schema)&&bi(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let l="valid";for(const c of t.validator(e,a))c.explanation=r.message,l="not_valid",yield[c,void 0];for(let[c,u,d]of t.entries(e,a)){const t=vi(u,d,{path:void 0===c?n:[...n,c],branch:void 0===c?o:[...o,u],coerce:i,mask:s,message:r.message});for(const r of t)r[0]?(l=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):i&&(u=r[1],void 0===c?e=u:e instanceof Map?e.set(c,u):e instanceof Set?e.add(u):bi(e)&&(void 0!==u||c in e)&&(e[c]=u))}if("not_valid"!==l)for(const c of t.refiner(e,a))c.explanation=r.message,l="not_refined",yield[c,void 0];"valid"===l&&(yield[void 0,e])}()}class Ei{constructor(e){const{type:t,schema:r,validator:n,refiner:o,coercer:i=e=>e,entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=i,this.validator=n?(e,t)=>_i(n(e,t),t,this,e):()=>[],this.refiner=o?(e,t)=>_i(o(e,t),t,this,e):()=>[]}assert(e,t){return Si(e,this,t)}create(e,t){return Ri(e,this,t)}is(e){return Ii(e,this)}mask(e,t){return Ai(e,this,t)}validate(e){return Ti(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}function Si(e,t,r){const n=Ti(e,t,{message:r});if(n[0])throw n[0]}function Ri(e,t,r){const n=Ti(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Ai(e,t,r){const n=Ti(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function Ii(e,t){return!Ti(e,t)[0]}function Ti(e,t){const r=vi(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(r);return n[0]?[new gi(n[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]:[void 0,n[1]]}function xi(e,t){return new Ei({type:e,schema:null,validator:t})}function Oi(){return xi("never",(()=>!1))}function ki(e){const t=e?Object.keys(e):[],r=Oi();return new Ei({type:"object",schema:e||null,*entries(n){if(e&&bi(n)){const o=new Set(Object.keys(n));for(const r of t)o.delete(r),yield[r,n[r],e[r]];for(const e of o)yield[e,n[e],r]}},validator:e=>bi(e)||`Expected an object, but received: ${yi(e)}`,coercer:e=>bi(e)?{...e}:e})}function Li(e){return new Ei({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function Pi(){return xi("string",(e=>"string"==typeof e||`Expected a string, but received: ${yi(e)}`))}function Bi(e){const t=Object.keys(e);return new Ei({type:"type",schema:e,*entries(r){if(bi(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>bi(e)||`Expected an object, but received: ${yi(e)}`,coercer:e=>bi(e)?{...e}:e})}function Ci(){return xi("unknown",(()=>!0))}function Ni(e,t,r){return new Ei({...e,coercer:(n,o)=>Ii(n,t)?e.coercer(r(n,o),o):e.coercer(n,o)})}function ji(e){return e instanceof Map||e instanceof Set?e.size:e.length}function $i(e,t,r){return new Ei({...e,*refiner(n,o){yield*e.refiner(n,o);const i=_i(r(n,o),o,e,n);for(const e of i)yield{...e,refinement:t}}})}const Mi=Object.freeze(Object.defineProperty({__proto__:null,Struct:Ei,StructError:gi,any:function(){return xi("any",(()=>!0))},array:function(e){return new Ei({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${yi(e)}`})},assert:Si,assign:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n="type"===t[0].type,o=t.map((e=>e.schema)),i=Object.assign({},...o);return n?Bi(i):ki(i)},bigint:function(){return xi("bigint",(e=>"bigint"==typeof e))},boolean:function(){return xi("boolean",(e=>"boolean"==typeof e))},coerce:Ni,create:Ri,date:function(){return xi("date",(e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${yi(e)}`))},defaulted:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ni(e,Ci(),(e=>{const n="function"==typeof t?t():t;if(void 0===e)return n;if(!r.strict&&mi(e)&&mi(n)){const t={...e};let r=!1;for(const e in n)void 0===t[e]&&(t[e]=n[e],r=!0);if(r)return t}return e}))},define:xi,deprecated:function(e,t){return new Ei({...e,refiner:(t,r)=>void 0===t||e.refiner(t,r),validator:(r,n)=>void 0===r||(t(r,n),e.validator(r,n))})},dynamic:function(e){return new Ei({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator:(t,r)=>e(t,r).validator(t,r),coercer:(t,r)=>e(t,r).coercer(t,r),refiner:(t,r)=>e(t,r).refiner(t,r)})},empty:function(e){return $i(e,"empty",(t=>{const r=ji(t);return 0===r||`Expected an empty ${e.type} but received one with a size of \`${r}\``}))},enums:function(e){const t={},r=e.map((e=>yi(e))).join();for(const n of e)t[n]=n;return new Ei({type:"enums",schema:t,validator:t=>e.includes(t)||`Expected one of \`${r}\`, but received: ${yi(t)}`})},func:function(){return xi("func",(e=>"function"==typeof e||`Expected a function, but received: ${yi(e)}`))},instance:function(e){return xi("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${yi(t)}`))},integer:function(){return xi("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${yi(e)}`))},intersection:function(e){return new Ei({type:"intersection",schema:null,*entries(t,r){for(const n of e)yield*n.entries(t,r)},*validator(t,r){for(const n of e)yield*n.validator(t,r)},*refiner(t,r){for(const n of e)yield*n.refiner(t,r)}})},is:Ii,lazy:function(e){let t;return new Ei({type:"lazy",schema:null,*entries(r,n){t??(t=e()),yield*t.entries(r,n)},validator:(r,n)=>(t??(t=e()),t.validator(r,n)),coercer:(r,n)=>(t??(t=e()),t.coercer(r,n)),refiner:(r,n)=>(t??(t=e()),t.refiner(r,n))})},literal:function(e){const t=yi(e),r=typeof e;return new Ei({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${yi(r)}`})},map:function(e,t){return new Ei({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(const[n,o]of r.entries())yield[n,n,e],yield[n,o,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${yi(e)}`})},mask:Ai,max:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{exclusive:n}=r;return $i(e,"max",(r=>n?r<t:r<=t||`Expected a ${e.type} less than ${n?"":"or equal to "}${t} but received \`${r}\``))},min:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{exclusive:n}=r;return $i(e,"min",(r=>n?r>t:r>=t||`Expected a ${e.type} greater than ${n?"":"or equal to "}${t} but received \`${r}\``))},never:Oi,nonempty:function(e){return $i(e,"nonempty",(t=>ji(t)>0||`Expected a nonempty ${e.type} but received an empty one`))},nullable:function(e){return new Ei({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})},number:function(){return xi("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${yi(e)}`))},object:ki,omit:function(e,t){const{schema:r}=e,n={...r};for(const o of t)delete n[o];return"type"===e.type?Bi(n):ki(n)},optional:Li,partial:function(e){const t=e instanceof Ei,r=t?{...e.schema}:{...e};for(const n in r)r[n]=Li(r[n]);return t&&"type"===e.type?Bi(r):ki(r)},pattern:function(e,t){return $i(e,"pattern",(r=>t.test(r)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${r}"`))},pick:function(e,t){const{schema:r}=e,n={};for(const o of t)n[o]=r[o];return"type"===e.type?Bi(n):ki(n)},record:function(e,t){return new Ei({type:"record",schema:null,*entries(r){if(bi(r))for(const n in r){const o=r[n];yield[n,n,e],yield[n,o,t]}},validator:e=>bi(e)||`Expected an object, but received: ${yi(e)}`})},refine:$i,regexp:function(){return xi("regexp",(e=>e instanceof RegExp))},set:function(e){return new Ei({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const r of t)yield[r,r,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${yi(e)}`})},size:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;const n=`Expected a ${e.type}`,o=t===r?`of \`${t}\``:`between \`${t}\` and \`${r}\``;return $i(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=r||`${n} ${o} but received \`${e}\``;if(e instanceof Map||e instanceof Set){const{size:i}=e;return t<=i&&i<=r||`${n} with a size ${o} but received one with a size of \`${i}\``}{const{length:i}=e;return t<=i&&i<=r||`${n} with a length ${o} but received one with a length of \`${i}\``}}))},string:Pi,struct:function(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),xi(e,t)},trimmed:function(e){return Ni(e,Pi(),(e=>e.trim()))},tuple:function(e){const t=Oi();return new Ei({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let o=0;o<n;o++)yield[o,r[o],e[o]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${yi(e)}`})},type:Bi,union:function(e){const t=e.map((e=>e.type)).join(" | ");return new Ei({type:"union",schema:null,coercer(t){for(const r of e){const[e,n]=r.validate(t,{coerce:!0});if(!e)return n}return t},validator(r,n){const o=[];for(const t of e){const[...e]=vi(r,t,n),[i]=e;if(!i[0])return[];for(const[t]of e)t&&o.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${yi(r)}`,...o]}})},unknown:Ci,validate:Ti},Symbol.toStringTag,{value:"Module"})),Fi=(0,n.aa)(Mi);Object.defineProperty(pi,"__esModule",{value:!0}),pi.assertExhaustive=pi.assertStruct=pi.assert=pi.AssertionError=void 0;const Di=Fi;function Ui(e,t){return function(e){var t,r;return"string"==typeof(null===(r=null===(t=null==e?void 0:e.prototype)||void 0===t?void 0:t.constructor)||void 0===r?void 0:r.name)}(e)?new e({message:t}):e({message:t})}class zi extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}pi.AssertionError=zi,pi.assert=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion failed.";if(!e)throw t instanceof Error?t:Ui(arguments.length>2&&void 0!==arguments[2]?arguments[2]:zi,t)},pi.assertStruct=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Assertion failed",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zi;try{(0,Di.assert)(e,t)}catch(o){throw Ui(n,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(o)}.`)}},pi.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")};var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.base64=void 0;const Wi=Fi,qi=pi;Hi.base64=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;const o=null!==(r=t.paddingRequired)&&void 0!==r&&r,i=null!==(n=t.characterSet)&&void 0!==n?n:"base64";let s,a;return"base64"===i?s=String.raw`[A-Za-z0-9+\/]`:((0,qi.assert)("base64url"===i),s=String.raw`[-_A-Za-z0-9]`),a=o?new RegExp(`^(?:${s}{4})*(?:${s}{3}=|${s}{2}==)?$`,"u"):new RegExp(`^(?:${s}{4})*(?:${s}{2,3}|${s}{3}=|${s}{2}==)?$`,"u"),(0,Wi.pattern)(e,a)};var Vi={},Zi={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.StrictHexStruct=e.HexStruct=void 0;const t=Fi,r=pi;function n(r){return(0,t.is)(r,e.HexStruct)}function o(r){return(0,t.is)(r,e.StrictHexStruct)}e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu),e.isHexString=n,e.isStrictHexString=o,e.assertIsHexString=function(e){(0,r.assert)(n(e),"Value must be a hexadecimal string.")},e.assertIsStrictHexString=function(e){(0,r.assert)(o(e),'Value must be a hexadecimal string, starting with "0x".')},e.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},e.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}}(Zi),Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.createDataView=Vi.concatBytes=Vi.valueToBytes=Vi.stringToBytes=Vi.numberToBytes=Vi.signedBigIntToBytes=Vi.bigIntToBytes=Vi.hexToBytes=Vi.bytesToString=Vi.bytesToNumber=Vi.bytesToSignedBigInt=Vi.bytesToBigInt=Vi.bytesToHex=Vi.assertIsBytes=Vi.isBytes=void 0;const Gi=pi,Ji=Zi,Ki=48,Xi=58,Yi=87;const Qi=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function es(e){return e instanceof Uint8Array}function ts(e){(0,Gi.assert)(es(e),"Value must be a Uint8Array.")}function rs(e){if(ts(e),0===e.length)return"0x";const t=Qi(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,Ji.add0x)(r.join(""))}function ns(e){ts(e);const t=rs(e);return BigInt(t)}function os(e){var t;if("0x"===(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)))return new Uint8Array;(0,Ji.assertIsHexString)(e);const r=(0,Ji.remove0x)(e).toLowerCase(),n=r.length%2===0?r:`0${r}`,o=new Uint8Array(n.length/2);for(let i=0;i<o.length;i++){const e=n.charCodeAt(2*i),t=n.charCodeAt(2*i+1),r=e-(e<Xi?Ki:Yi),s=t-(t<Xi?Ki:Yi);o[i]=16*r+s}return o}function is(e){(0,Gi.assert)("bigint"==typeof e,"Value must be a bigint."),(0,Gi.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return os(e.toString(16))}function ss(e){(0,Gi.assert)("number"==typeof e,"Value must be a number."),(0,Gi.assert)(e>=0,"Value must be a non-negative number."),(0,Gi.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return os(e.toString(16))}function as(e){return(0,Gi.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function ls(e){if("bigint"==typeof e)return is(e);if("number"==typeof e)return ss(e);if("string"==typeof e)return e.startsWith("0x")?os(e):as(e);if(es(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}Vi.isBytes=es,Vi.assertIsBytes=ts,Vi.bytesToHex=rs,Vi.bytesToBigInt=ns,Vi.bytesToSignedBigInt=function(e){ts(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},Vi.bytesToNumber=function(e){ts(e);const t=ns(e);return(0,Gi.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},Vi.bytesToString=function(e){return ts(e),(new TextDecoder).decode(e)},Vi.hexToBytes=os,Vi.bigIntToBytes=is,Vi.signedBigIntToBytes=function(e,t){(0,Gi.assert)("bigint"==typeof e,"Value must be a bigint."),(0,Gi.assert)("number"==typeof t,"Byte length must be a number."),(0,Gi.assert)(t>0,"Byte length must be greater than 0."),(0,Gi.assert)(function(e,t){(0,Gi.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let o=0;o<n.length;o++)n[o]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()},Vi.numberToBytes=ss,Vi.stringToBytes=as,Vi.valueToBytes=ls,Vi.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let o=0;o<e.length;o++){const n=ls(e[o]);t[o]=n,r+=n.length}const n=new Uint8Array(r);for(let o=0,i=0;o<t.length;o++)n.set(t[o],i),i+=t[o].length;return n},Vi.createDataView=function(e){if(typeof n.d.Buffer<"u"&&e instanceof n.d.Buffer){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)};var cs={};Object.defineProperty(cs,"__esModule",{value:!0}),cs.ChecksumStruct=void 0;const us=Fi,ds=Hi;cs.ChecksumStruct=(0,us.size)((0,ds.base64)((0,us.string)(),{paddingRequired:!0}),44,44);var fs={};Object.defineProperty(fs,"__esModule",{value:!0}),fs.createHex=fs.createBytes=fs.createBigInt=fs.createNumber=void 0;const hs=Fi,ps=pi,gs=Vi,bs=Zi,ms=(0,hs.union)([(0,hs.number)(),(0,hs.bigint)(),(0,hs.string)(),bs.StrictHexStruct]),ys=(0,hs.coerce)((0,hs.number)(),ms,Number),ws=(0,hs.coerce)((0,hs.bigint)(),ms,BigInt);(0,hs.union)([bs.StrictHexStruct,(0,hs.instance)(Uint8Array)]);const _s=(0,hs.coerce)((0,hs.instance)(Uint8Array),(0,hs.union)([bs.StrictHexStruct]),gs.hexToBytes),vs=(0,hs.coerce)(bs.StrictHexStruct,(0,hs.instance)(Uint8Array),gs.bytesToHex);fs.createNumber=function(e){try{const t=(0,hs.create)(e,ys);return(0,ps.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof hs.StructError?new Error(`Expected a number-like value, got "${e}".`):t}},fs.createBigInt=function(e){try{return(0,hs.create)(e,ws)}catch(t){throw t instanceof hs.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}},fs.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,hs.create)(e,_s)}catch(t){throw t instanceof hs.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}},fs.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,hs.create)(e,vs)}catch(t){throw t instanceof hs.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}};var Es,Ss,Rs={},As=n.o&&n.o.__classPrivateFieldSet||function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},Is=n.o&&n.o.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.FrozenSet=Rs.FrozenMap=void 0;class Ts{constructor(e){Es.set(this,void 0),As(this,Es,new Map(e),"f"),Object.freeze(this)}get size(){return Is(this,Es,"f").size}[(Es=new WeakMap,Symbol.iterator)](){return Is(this,Es,"f")[Symbol.iterator]()}entries(){return Is(this,Es,"f").entries()}forEach(e,t){return Is(this,Es,"f").forEach(((r,n,o)=>e.call(t,r,n,this)))}get(e){return Is(this,Es,"f").get(e)}has(e){return Is(this,Es,"f").has(e)}keys(){return Is(this,Es,"f").keys()}values(){return Is(this,Es,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((e=>{let[t,r]=e;return`${String(t)} => ${String(r)}`})).join(", ")} `:""}}`}}Rs.FrozenMap=Ts;class xs{constructor(e){Ss.set(this,void 0),As(this,Ss,new Set(e),"f"),Object.freeze(this)}get size(){return Is(this,Ss,"f").size}[(Ss=new WeakMap,Symbol.iterator)](){return Is(this,Ss,"f")[Symbol.iterator]()}entries(){return Is(this,Ss,"f").entries()}forEach(e,t){return Is(this,Ss,"f").forEach(((r,n,o)=>e.call(t,r,n,this)))}has(e){return Is(this,Ss,"f").has(e)}keys(){return Is(this,Ss,"f").keys()}values(){return Is(this,Ss,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}Rs.FrozenSet=xs,Object.freeze(Ts),Object.freeze(Ts.prototype),Object.freeze(xs),Object.freeze(xs.prototype);var Os={};Object.defineProperty(Os,"__esModule",{value:!0});var ks={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.getJsonSize=e.isValidJson=e.JsonStruct=e.UnsafeJsonStruct=void 0;const t=Fi,r=pi;e.UnsafeJsonStruct=(0,t.union)([(0,t.literal)(null),(0,t.boolean)(),(0,t.define)("finite number",(e=>(0,t.is)(e,(0,t.number)())&&Number.isFinite(e))),(0,t.string)(),(0,t.array)((0,t.lazy)((()=>e.UnsafeJsonStruct))),(0,t.record)((0,t.string)(),(0,t.lazy)((()=>e.UnsafeJsonStruct)))]),e.JsonStruct=(0,t.define)("Json",((t,r)=>{function n(e,t){const n=[...t.validator(e,r)];return!(n.length>0)||n}try{const r=n(t,e.UnsafeJsonStruct);return!0!==r?r:n(JSON.parse(JSON.stringify(t)),e.UnsafeJsonStruct)}catch(o){return o instanceof RangeError&&"Circular reference detected"}})),e.isValidJson=function(r){return(0,t.is)(r,e.JsonStruct)},e.getJsonSize=function(t){(0,r.assertStruct)(t,e.JsonStruct,"Invalid JSON value");const n=JSON.stringify(t);return(new TextEncoder).encode(n).byteLength},e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,t.object)({code:(0,t.integer)(),message:(0,t.string)(),data:(0,t.optional)(e.JsonStruct),stack:(0,t.optional)((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.optional)((0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)])),e.JsonRpcRequestStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:e.JsonRpcParamsStruct}),e.JsonRpcNotificationStruct=(0,t.omit)(e.JsonRpcRequestStruct,["id"]),e.isJsonRpcNotification=function(r){return(0,t.is)(r,e.JsonRpcNotificationStruct)},e.assertIsJsonRpcNotification=function(t,n){(0,r.assertStruct)(t,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",n)},e.isJsonRpcRequest=function(r){return(0,t.is)(r,e.JsonRpcRequestStruct)},e.assertIsJsonRpcRequest=function(t,n){(0,r.assertStruct)(t,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",n)},e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]),e.isPendingJsonRpcResponse=function(r){return(0,t.is)(r,e.PendingJsonRpcResponseStruct)},e.assertIsPendingJsonRpcResponse=function(t,n){(0,r.assertStruct)(t,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",n)},e.isJsonRpcResponse=function(r){return(0,t.is)(r,e.JsonRpcResponseStruct)},e.assertIsJsonRpcResponse=function(t,n){(0,r.assertStruct)(t,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",n)},e.isJsonRpcSuccess=function(r){return(0,t.is)(r,e.JsonRpcSuccessStruct)},e.assertIsJsonRpcSuccess=function(t,n){(0,r.assertStruct)(t,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",n)},e.isJsonRpcFailure=function(r){return(0,t.is)(r,e.JsonRpcFailureStruct)},e.assertIsJsonRpcFailure=function(t,n){(0,r.assertStruct)(t,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",n)},e.isJsonRpcError=function(r){return(0,t.is)(r,e.JsonRpcErrorStruct)},e.assertIsJsonRpcError=function(t,n){(0,r.assertStruct)(t,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",n)},e.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>!!("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}(ks);var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});var Ps={},Bs=n.o&&n.o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.createModuleLogger=Ps.createProjectLogger=void 0;const Cs=(0,Bs(f).default)("metamask");Ps.createProjectLogger=function(e){return Cs.extend(e)},Ps.createModuleLogger=function(e,t){return e.extend(t)};var Ns={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0,e.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},e.isNullOrUndefined=function(e){return null==e},e.isObject=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)};var t;function r(e){return e.charCodeAt(0)<=127}e.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),(t=e.JsonSize||(e.JsonSize={}))[t.Null=4]="Null",t[t.Comma=1]="Comma",t[t.Wrapper=1]="Wrapper",t[t.True=4]="True",t[t.False=5]="False",t[t.Quote=1]="Quote",t[t.Colon=1]="Colon",t[t.Date=24]="Date",e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,e.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch{return!1}},e.isASCII=r,e.calculateStringSize=function(t){var n;return t.split("").reduce(((e,t)=>r(t)?e+1:e+2),0)+(null!==(n=t.match(e.ESCAPE_CHARACTERS_REGEXP))&&void 0!==n?n:[]).length},e.calculateNumberSize=function(e){return e.toString().length}}(Ns);var js={};Object.defineProperty(js,"__esModule",{value:!0}),js.hexToBigInt=js.hexToNumber=js.bigIntToHex=js.numberToHex=void 0;const $s=pi,Ms=Zi;js.numberToHex=e=>((0,$s.assert)("number"==typeof e,"Value must be a number."),(0,$s.assert)(e>=0,"Value must be a non-negative number."),(0,$s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,Ms.add0x)(e.toString(16)));js.bigIntToHex=e=>((0,$s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,$s.assert)(e>=0,"Value must be a non-negative bigint."),(0,Ms.add0x)(e.toString(16)));js.hexToNumber=e=>{(0,Ms.assertIsHexString)(e);const t=parseInt(e,16);return(0,$s.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};js.hexToBigInt=e=>((0,Ms.assertIsHexString)(e),BigInt((0,Ms.add0x)(e)));var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});var Ds={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,(t=e.Duration||(e.Duration={}))[t.Millisecond=1]="Millisecond",t[t.Second=1e3]="Second",t[t.Minute=6e4]="Minute",t[t.Hour=36e5]="Hour",t[t.Day=864e5]="Day",t[t.Week=6048e5]="Week",t[t.Year=31536e6]="Year";const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};e.inMilliseconds=function(e,t){return r(e,"count"),e*t},e.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}(Ds);var Us={};Object.defineProperty(Us,"__esModule",{value:!0});var zs={},Hs={exports:{}};var Ws={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const qs="object"==typeof n.d.process&&n.d.process.env&&n.d.process.env.NODE_DEBUG&&/\bsemver\b/i.test(n.d.process.env.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return console.error("SEMVER",...t)}:()=>{};var Vs=qs;!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:o}=Ws,i=Vs,s=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],c=t.t={};let u=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[d,n]],h=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),o=u++;i(e,o,t),c[e]=o,l[o]=t,s[o]=new RegExp(t,r?"g":void 0),a[o]=new RegExp(n,r?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),h("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${d}+`),h("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),h("FULL",`^${l[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),h("LOOSE",`^${l[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),h("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),h("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",l[c.COERCE],!0),h("COERCERTLFULL",l[c.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Hs,Hs.exports);var Zs=Hs.exports;const Gs=Object.freeze({loose:!0}),Js=Object.freeze({});var Ks=e=>e?"object"!=typeof e?Gs:e:Js;const Xs=/^[0-9]+$/,Ys=(e,t)=>{const r=Xs.test(e),n=Xs.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var Qs={compareIdentifiers:Ys,rcompareIdentifiers:(e,t)=>Ys(t,e)};const ea=Vs,{MAX_LENGTH:ta,MAX_SAFE_INTEGER:ra}=Ws,{safeRe:na,t:oa}=Zs,ia=Ks,{compareIdentifiers:sa}=Qs;var aa=class e{constructor(t,r){if(r=ia(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>ta)throw new TypeError(`version is longer than ${ta} characters`);ea("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?na[oa.LOOSE]:na[oa.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ra||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ra||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ra||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<ra)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ea("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),sa(this.major,t.major)||sa(this.minor,t.minor)||sa(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const e=this.prerelease[r],n=t.prerelease[r];if(ea("prerelease compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return-1;if(e!==n)return sa(e,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{const e=this.build[r],n=t.build[r];if(ea("build compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return-1;if(e!==n)return sa(e,n)}while(++r)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===sa(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const la=aa;var ca=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof la)return e;try{return new la(e,t)}catch(n){if(!r)return null;throw n}};const ua=ca;var da=(e,t)=>{const r=ua(e,t);return r?r.version:null};const fa=ca;var ha=(e,t)=>{const r=fa(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};const pa=aa;var ga=(e,t,r,n,o)=>{"string"==typeof r&&(o=n,n=r,r=void 0);try{return new pa(e instanceof pa?e.version:e,r).inc(t,n,o).version}catch{return null}};const ba=ca;var ma=(e,t)=>{const r=ba(e,null,!0),n=ba(t,null,!0),o=r.compare(n);if(0===o)return null;const i=o>0,s=i?r:n,a=i?n:r,l=!!s.prerelease.length;if(a.prerelease.length&&!l)return a.patch||a.minor?s.patch?"patch":s.minor?"minor":"major":"major";const c=l?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};const ya=aa;var wa=(e,t)=>new ya(e,t).major;const _a=aa;var va=(e,t)=>new _a(e,t).minor;const Ea=aa;var Sa=(e,t)=>new Ea(e,t).patch;const Ra=ca;var Aa=(e,t)=>{const r=Ra(e,t);return r&&r.prerelease.length?r.prerelease:null};const Ia=aa;var Ta=(e,t,r)=>new Ia(e,r).compare(new Ia(t,r));const xa=Ta;var Oa=(e,t,r)=>xa(t,e,r);const ka=Ta;var La=(e,t)=>ka(e,t,!0);const Pa=aa;var Ba=(e,t,r)=>{const n=new Pa(e,r),o=new Pa(t,r);return n.compare(o)||n.compareBuild(o)};const Ca=Ba;var Na=(e,t)=>e.sort(((e,r)=>Ca(e,r,t)));const ja=Ba;var $a=(e,t)=>e.sort(((e,r)=>ja(r,e,t)));const Ma=Ta;var Fa=(e,t,r)=>Ma(e,t,r)>0;const Da=Ta;var Ua=(e,t,r)=>Da(e,t,r)<0;const za=Ta;var Ha=(e,t,r)=>0===za(e,t,r);const Wa=Ta;var qa=(e,t,r)=>0!==Wa(e,t,r);const Va=Ta;var Za=(e,t,r)=>Va(e,t,r)>=0;const Ga=Ta;var Ja=(e,t,r)=>Ga(e,t,r)<=0;const Ka=Ha,Xa=qa,Ya=Fa,Qa=Za,el=Ua,tl=Ja;var rl=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Ka(e,r,n);case"!=":return Xa(e,r,n);case">":return Ya(e,r,n);case">=":return Qa(e,r,n);case"<":return el(e,r,n);case"<=":return tl(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};const nl=aa,ol=ca,{safeRe:il,t:sl}=Zs;var al=(e,t)=>{if(e instanceof nl)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?il[sl.COERCERTLFULL]:il[sl.COERCERTL];let o;for(;(o=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||o.index+o[0].length!==r.index+r[0].length)&&(r=o),n.lastIndex=o.index+o[1].length+o[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?il[sl.COERCEFULL]:il[sl.COERCE]);if(null===r)return null;const n=r[2],o=r[3]||"0",i=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return ol(`${n}.${o}.${i}${s}${a}`,t)};var ll,cl,ul,dl,fl=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};function hl(){if(cl)return ll;cl=1;class e{constructor(t,o){if(o=r(o),t instanceof e)return t.loose===!!o.loose&&t.includePrerelease===!!o.includePrerelease?t:new e(t.raw,o);if(t instanceof n)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!h(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&p(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const r=((this.options.includePrerelease&&d)|(this.options.loose&&f))+":"+e,i=t.get(r);if(i)return i;const p=this.options.loose,g=p?s[a.HYPHENRANGELOOSE]:s[a.HYPHENRANGE];e=e.replace(g,I(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(s[a.COMPARATORTRIM],l),o("comparator trim",e),e=e.replace(s[a.TILDETRIM],c),o("tilde trim",e),e=e.replace(s[a.CARETTRIM],u),o("caret trim",e);let m=e.split(" ").map((e=>b(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));p&&(m=m.filter((e=>(o("loose invalid filter",e,this.options),!!e.match(s[a.COMPARATORLOOSE]))))),o("range list",m);const y=new Map,w=m.map((e=>new n(e,this.options)));for(const t of w){if(h(t))return[t];y.set(t.value,t)}y.size>1&&y.has("")&&y.delete("");const _=[...y.values()];return t.set(r,_),_}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((e=>g(e,r)&&t.set.some((t=>g(t,r)&&e.every((e=>t.every((t=>e.intersects(t,r)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new i(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(T(this.set[t],e,this.options))return!0;return!1}}ll=e;const t=new fl,r=Ks,n=pl(),o=Vs,i=aa,{safeRe:s,t:a,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:u}=Zs,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:f}=Ws,h=e=>"<0.0.0-0"===e.value,p=e=>""===e.value,g=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},b=(e,t)=>(o("comp",e,t),e=_(e,t),o("caret",e),e=y(e,t),o("tildes",e),e=E(e,t),o("xrange",e),e=R(e,t),o("stars",e),e),m=e=>!e||"x"===e.toLowerCase()||"*"===e,y=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const r=t.loose?s[a.TILDELOOSE]:s[a.TILDE];return e.replace(r,((t,r,n,i,s)=>{let a;return o("tilde",e,t,r,n,i,s),m(r)?a="":m(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:m(i)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(o("replaceTilde pr",s),a=`>=${r}.${n}.${i}-${s} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,o("tilde return",a),a}))},_=(e,t)=>e.trim().split(/\s+/).map((e=>v(e,t))).join(" "),v=(e,t)=>{o("caret",e,t);const r=t.loose?s[a.CARETLOOSE]:s[a.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,s,a)=>{let l;return o("caret",e,t,r,i,s,a),m(r)?l="":m(i)?l=`>=${r}.0.0${n} <${+r+1}.0.0-0`:m(s)?l="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:a?(o("replaceCaret pr",a),l="0"===r?"0"===i?`>=${r}.${i}.${s}-${a} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}-${a} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s}-${a} <${+r+1}.0.0-0`):(o("no pr"),l="0"===r?"0"===i?`>=${r}.${i}.${s}${n} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s} <${+r+1}.0.0-0`),o("caret return",l),l}))},E=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map((e=>S(e,t))).join(" ")),S=(e,t)=>{e=e.trim();const r=t.loose?s[a.XRANGELOOSE]:s[a.XRANGE];return e.replace(r,((r,n,i,s,a,l)=>{o("xRange",e,r,n,i,s,a,l);const c=m(i),u=c||m(s),d=u||m(a),f=d;return"="===n&&f&&(n=""),l=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(u&&(s=0),a=0,">"===n?(n=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):"<="===n&&(n="<",u?i=+i+1:s=+s+1),"<"===n&&(l="-0"),r=`${n+i}.${s}.${a}${l}`):u?r=`>=${i}.0.0${l} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${s}.0${l} <${i}.${+s+1}.0-0`),o("xRange return",r),r}))},R=(e,t)=>(o("replaceStars",e,t),e.trim().replace(s[a.STAR],"")),A=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(s[t.includePrerelease?a.GTE0PRE:a.GTE0],"")),I=e=>(t,r,n,o,i,s,a,l,c,u,d,f)=>`${r=m(n)?"":m(o)?`>=${n}.0.0${e?"-0":""}`:m(i)?`>=${n}.${o}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=m(c)?"":m(u)?`<${+c+1}.0.0-0`:m(d)?`<${c}.${+u+1}.0-0`:f?`<=${c}.${u}.${d}-${f}`:e?`<${c}.${u}.${+d+1}-0`:`<=${l}`}`.trim(),T=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(o(e[r].semver),e[r].semver!==n.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return ll}function pl(){if(dl)return ul;dl=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,o){if(o=r(o),n instanceof t){if(n.loose===!!o.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),s("comparator",n,o),this.options=o,this.loose=!!o.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const r=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new a(i[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch{return!1}return i(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(e.value,n).test(this.value):""===e.operator?""===e.value||new l(this.value,n).test(e.semver):!((n=r(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||i(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||i(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}ul=t;const r=Ks,{safeRe:n,t:o}=Zs,i=rl,s=Vs,a=aa,l=hl();return ul}const gl=hl();var bl=(e,t,r)=>{try{t=new gl(t,r)}catch{return!1}return t.test(e)};const ml=hl();var yl=(e,t)=>new ml(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));const wl=aa,_l=hl();var vl=(e,t,r)=>{let n=null,o=null,i=null;try{i=new _l(t,r)}catch{return null}return e.forEach((e=>{i.test(e)&&(!n||-1===o.compare(e))&&(n=e,o=new wl(n,r))})),n};const El=aa,Sl=hl();var Rl=(e,t,r)=>{let n=null,o=null,i=null;try{i=new Sl(t,r)}catch{return null}return e.forEach((e=>{i.test(e)&&(!n||1===o.compare(e))&&(n=e,o=new El(n,r))})),n};const Al=aa,Il=hl(),Tl=Fa;var xl=(e,t)=>{e=new Il(e,t);let r=new Al("0.0.0");if(e.test(r)||(r=new Al("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const t=e.set[n];let o=null;t.forEach((e=>{const t=new Al(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!o||Tl(t,o))&&(o=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),o&&(!r||Tl(r,o))&&(r=o)}return r&&e.test(r)?r:null};const Ol=hl();var kl=(e,t)=>{try{return new Ol(e,t).range||"*"}catch{return null}};const Ll=aa,Pl=pl(),{ANY:Bl}=Pl,Cl=hl(),Nl=bl,jl=Fa,$l=Ua,Ml=Ja,Fl=Za;var Dl=(e,t,r,n)=>{let o,i,s,a,l;switch(e=new Ll(e,n),t=new Cl(t,n),r){case">":o=jl,i=Ml,s=$l,a=">",l=">=";break;case"<":o=$l,i=Fl,s=jl,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Nl(e,t,n))return!1;for(let c=0;c<t.set.length;++c){const r=t.set[c];let u=null,d=null;if(r.forEach((e=>{e.semver===Bl&&(e=new Pl(">=0.0.0")),u=u||e,d=d||e,o(e.semver,u.semver,n)?u=e:s(e.semver,d.semver,n)&&(d=e)})),u.operator===a||u.operator===l||(!d.operator||d.operator===a)&&i(e,d.semver))return!1;if(d.operator===l&&s(e,d.semver))return!1}return!0};const Ul=Dl;var zl=(e,t,r)=>Ul(e,t,">",r);const Hl=Dl;var Wl=(e,t,r)=>Hl(e,t,"<",r);const ql=hl();var Vl=(e,t,r)=>(e=new ql(e,r),t=new ql(t,r),e.intersects(t,r));const Zl=bl,Gl=Ta;const Jl=hl(),Kl=pl(),{ANY:Xl}=Kl,Yl=bl,Ql=Ta,ec=[new Kl(">=0.0.0-0")],tc=[new Kl(">=0.0.0")],rc=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===Xl){if(1===t.length&&t[0].semver===Xl)return!0;e=r.includePrerelease?ec:tc}if(1===t.length&&t[0].semver===Xl){if(r.includePrerelease)return!0;t=tc}const n=new Set;let o,i,s;for(const h of e)">"===h.operator||">="===h.operator?o=nc(o,h,r):"<"===h.operator||"<="===h.operator?i=oc(i,h,r):n.add(h.semver);if(n.size>1)return null;if(o&&i){if(s=Ql(o.semver,i.semver,r),s>0)return null;if(0===s&&(">="!==o.operator||"<="!==i.operator))return null}for(const h of n){if(o&&!Yl(h,String(o),r)||i&&!Yl(h,String(i),r))return null;for(const e of t)if(!Yl(h,String(e),r))return!1;return!0}let a,l,c,u,d=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver,f=!(!o||r.includePrerelease||!o.semver.prerelease.length)&&o.semver;d&&1===d.prerelease.length&&"<"===i.operator&&0===d.prerelease[0]&&(d=!1);for(const h of t){if(u=u||">"===h.operator||">="===h.operator,c=c||"<"===h.operator||"<="===h.operator,o)if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),">"===h.operator||">="===h.operator){if(a=nc(o,h,r),a===h&&a!==o)return!1}else if(">="===o.operator&&!Yl(o.semver,String(h),r))return!1;if(i)if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),"<"===h.operator||"<="===h.operator){if(l=oc(i,h,r),l===h&&l!==i)return!1}else if("<="===i.operator&&!Yl(i.semver,String(h),r))return!1;if(!h.operator&&(i||o)&&0!==s)return!1}return!(o&&c&&!i&&0!==s||i&&u&&!o&&0!==s||f||d)},nc=(e,t,r)=>{if(!e)return t;const n=Ql(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},oc=(e,t,r)=>{if(!e)return t;const n=Ql(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};var ic=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new Jl(e,r),t=new Jl(t,r);let n=!1;e:for(const o of e.set){for(const e of t.set){const t=rc(o,e,r);if(n=n||null!==t,t)continue e}if(n)return!1}return!0};const sc=Zs,ac=Ws,lc=aa,cc=Qs,uc=(e,t,r)=>{const n=[];let o=null,i=null;const s=e.sort(((e,t)=>Gl(e,t,r)));for(const u of s)Zl(u,t,r)?(i=u,o||(o=u)):(i&&n.push([o,i]),i=null,o=null);o&&n.push([o,null]);const a=[];for(const[u,d]of n)u===d?a.push(u):d||u!==s[0]?d?u===s[0]?a.push(`<=${d}`):a.push(`${u} - ${d}`):a.push(`>=${u}`):a.push("*");const l=a.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return l.length<c.length?l:t};var dc={parse:ca,valid:da,clean:ha,inc:ga,diff:ma,major:wa,minor:va,patch:Sa,prerelease:Aa,compare:Ta,rcompare:Oa,compareLoose:La,compareBuild:Ba,sort:Na,rsort:$a,gt:Fa,lt:Ua,eq:Ha,neq:qa,gte:Za,lte:Ja,cmp:rl,coerce:al,Comparator:pl(),Range:hl(),satisfies:bl,toComparators:yl,maxSatisfying:vl,minSatisfying:Rl,minVersion:xl,validRange:kl,outside:Dl,gtr:zl,ltr:Wl,intersects:Vl,simplifyRange:uc,subset:ic,SemVer:lc,re:sc.re,src:sc.src,tokens:sc.t,SEMVER_SPEC_VERSION:ac.SEMVER_SPEC_VERSION,RELEASE_TYPES:ac.RELEASE_TYPES,compareIdentifiers:cc.compareIdentifiers,rcompareIdentifiers:cc.rcompareIdentifiers};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=dc,r=Fi,n=pi;e.VersionStruct=(0,r.refine)((0,r.string)(),"Version",(e=>null!==(0,t.valid)(e)||`Expected SemVer version, got "${e}"`)),e.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",(e=>null!==(0,t.validRange)(e)||`Expected SemVer range, got "${e}"`)),e.isValidSemVerVersion=function(t){return(0,r.is)(t,e.VersionStruct)},e.isValidSemVerRange=function(t){return(0,r.is)(t,e.VersionRangeStruct)},e.assertIsSemVerVersion=function(t){(0,n.assertStruct)(t,e.VersionStruct)},e.assertIsSemVerRange=function(t){(0,n.assertStruct)(t,e.VersionRangeStruct)},e.gtVersion=function(e,r){return(0,t.gt)(e,r)},e.gtRange=function(e,r){return(0,t.gtr)(e,r)},e.satisfiesVersionRange=function(e,r){return(0,t.satisfies)(e,r,{includePrerelease:!0})}}(zs),function(e){var t=n.o&&n.o.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=n.o&&n.o.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(pi,e),r(Hi,e),r(Vi,e),r(cs,e),r(fs,e),r(Rs,e),r(Os,e),r(Zi,e),r(ks,e),r(Ls,e),r(Ps,e),r(Ns,e),r(js,e),r(Fs,e),r(Ds,e),r(Us,e),r(zs,e)}(hi);var fc={},hc={};Object.defineProperty(hc,"__esModule",{value:!0}),hc.errorValues=hc.errorCodes=void 0,hc.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},hc.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeCause=e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=hi,r=hc,n=r.errorCodes.rpc.internal,o={code:n,message:i(n)};function i(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unspecified error message. This is a bug, please report it.";if(s(n)){const o=n.toString();if((0,t.hasProperty)(r.errorValues,o))return r.errorValues[o].message;if(function(e){return e>=-32099&&e<=-32e3}(n))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return o}function s(e){return Number.isInteger(e)}function a(e){return Array.isArray(e)?e.map((e=>(0,t.isValidJson)(e)?e:(0,t.isObject)(e)?l(e):null)):(0,t.isObject)(e)?l(e):(0,t.isValidJson)(e)?e:null}function l(e){return Object.getOwnPropertyNames(e).reduce(((r,n)=>{const o=e[n];return(0,t.isValidJson)(o)&&(r[n]=o),r}),{})}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=i,e.isValidCode=s,e.serializeError=function(e){let{fallbackError:r=o,shouldIncludeStack:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,t.isJsonRpcError)(r))throw new Error("Must provide fallback error with integer number code and string message.");const i=function(e,r){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if((0,t.isJsonRpcError)(e))return e;const n=a(e);return{...r,data:{cause:n}}}(e,r);return n||delete i.stack,i},e.serializeCause=a}(fc);var pc=n.o&&n.o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fi,"__esModule",{value:!0}),fi.EthereumProviderError=fi.JsonRpcError=void 0;const gc=hi,bc=pc(g),mc=fc;class yc extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,(0,gc.isPlainObject)(this.data)&&(e.data.cause=(0,mc.serializeCause)(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return(0,bc.default)(this.serialize(),wc,2)}}fi.JsonRpcError=yc;function wc(e,t){if("[Circular]"!==t)return t}fi.EthereumProviderError=class extends yc{constructor(e,t,r){if(n=e,!(Number.isInteger(n)&&n>=1e3&&n<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');var n;super(e,t,r)}};var _c={};Object.defineProperty(_c,"__esModule",{value:!0}),_c.providerErrors=_c.rpcErrors=void 0;const vc=fi,Ec=hc,Sc=fc;function Rc(e,t){const[r,n]=Ic(t);return new vc.JsonRpcError(e,r??(0,Sc.getMessageFromCode)(e),n)}function Ac(e,t){const[r,n]=Ic(t);return new vc.EthereumProviderError(e,r??(0,Sc.getMessageFromCode)(e),n)}function Ic(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t??void 0,r]}}return[]}_c.rpcErrors={parse:e=>Rc(Ec.errorCodes.rpc.parse,e),invalidRequest:e=>Rc(Ec.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Rc(Ec.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Rc(Ec.errorCodes.rpc.methodNotFound,e),internal:e=>Rc(Ec.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Rc(t,e)},invalidInput:e=>Rc(Ec.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Rc(Ec.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Rc(Ec.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Rc(Ec.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Rc(Ec.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Rc(Ec.errorCodes.rpc.limitExceeded,e)},_c.providerErrors={userRejectedRequest:e=>Ac(Ec.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Ac(Ec.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Ac(Ec.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Ac(Ec.errorCodes.provider.disconnected,e),chainDisconnected:e=>Ac(Ec.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new vc.EthereumProviderError(t,r,n)}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.errorCodes=e.providerErrors=e.rpcErrors=e.getMessageFromCode=e.serializeError=e.serializeCause=e.EthereumProviderError=e.JsonRpcError=void 0;var t=fi;Object.defineProperty(e,"JsonRpcError",{enumerable:!0,get:function(){return t.JsonRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});var r=fc;Object.defineProperty(e,"serializeCause",{enumerable:!0,get:function(){return r.serializeCause}}),Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});var n=_c;Object.defineProperty(e,"rpcErrors",{enumerable:!0,get:function(){return n.rpcErrors}}),Object.defineProperty(e,"providerErrors",{enumerable:!0,get:function(){return n.providerErrors}});var o=hc;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})}({});var Tc={exports:{}},xc=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}};var Oc=xc;function kc(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Lc(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}Tc.exports=Oc(kc),Tc.exports.strict=Oc(Lc),kc.proto=kc((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return kc(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Lc(this)},configurable:!0})}));var Pc=Tc.exports;const Bc=(0,n.g)(Pc);var Cc=Pc,Nc=function(){},jc=function(e,t,r){if("function"==typeof t)return jc(e,null,t);t||(t={}),r=Cc(r||Nc);var o=e._writableState,i=e._readableState,s=t.readable||!1!==t.readable&&e.readable,a=t.writable||!1!==t.writable&&e.writable,l=!1,c=function(){e.writable||u()},u=function(){a=!1,s||r.call(e)},d=function(){s=!1,a||r.call(e)},f=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},h=function(t){r.call(e,t)},p=function(){n.d.process.nextTick(g)},g=function(){if(!l){if(s&&(!i||!i.ended||i.destroyed))return r.call(e,new Error("premature close"));if(a&&(!o||!o.ended||o.destroyed))return r.call(e,new Error("premature close"))}},b=function(){e.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(e)?(e.on("complete",u),e.on("abort",p),e.req?b():e.on("request",b)):a&&!o&&(e.on("end",c),e.on("close",c)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",f),e.on("end",d),e.on("finish",u),!1!==t.error&&e.on("error",h),e.on("close",p),function(){l=!0,e.removeListener("complete",u),e.removeListener("abort",p),e.removeListener("request",b),e.req&&e.req.removeListener("finish",u),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("exit",f),e.removeListener("end",d),e.removeListener("error",h),e.removeListener("close",p)}},$c=jc;const Mc=(0,n.g)($c);var Fc=Pc,Dc=$c,Uc=n.ap,zc=function(){},Hc=/^v?\.0/.test(n.d.process.version),Wc=function(e){return"function"==typeof e},qc=function(e,t,r,n){n=Fc(n);var o=!1;e.on("close",(function(){o=!0})),Dc(e,{readable:t,writable:r},(function(e){if(e)return n(e);o=!0,n()}));var i=!1;return function(t){if(!o&&!i){if(i=!0,function(e){return!(!Hc||!Uc)&&(e instanceof(Uc.ReadStream||zc)||e instanceof(Uc.WriteStream||zc))&&Wc(e.close)}(e))return e.close(zc);if(function(e){return e.setHeader&&Wc(e.abort)}(e))return e.abort();if(Wc(e.destroy))return e.destroy();n(t||new Error("stream was destroyed"))}}},Vc=function(e){e()},Zc=function(e,t){return e.pipe(t)},Gc=function(){var e=Array.prototype.slice.call(arguments),t=Wc(e[e.length-1]||zc)&&e.pop()||zc;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map((function(o,i){var s=i<e.length-1;return qc(o,s,i>0,(function(e){r||(r=e),e&&n.forEach(Vc),!s&&(n.forEach(Vc),t(r))}))}));return e.reduce(Zc)};const Jc=(0,n.g)(Gc);var Kc={},Xc={},Yc={},Qc={},eu={},tu={};function ru(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function nu(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function ou(e){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function iu(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ru(e.outputLen),ru(e.blockLen)}function su(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function au(e,t){ou(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(tu,"__esModule",{value:!0}),tu.output=tu.exists=tu.hash=tu.bytes=tu.bool=tu.number=void 0,tu.number=ru,tu.bool=nu,tu.bytes=ou,tu.hash=iu,tu.exists=su,tu.output=au;const lu={number:ru,bool:nu,bytes:ou,hash:iu,exists:su,output:au};tu.default=lu;var cu={},uu={};Object.defineProperty(uu,"__esModule",{value:!0}),uu.crypto=void 0,uu.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=uu;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);function r(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.rotr=(e,t)=>e<<32-t|e>>>t,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.bytesToHex=function(e){if(!r(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=n[e[r]];return t};const o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,s=0;o<r;o++,s+=2){const t=i(e.charCodeAt(s)),r=i(e.charCodeAt(s+1));if(void 0===t||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}n[o]=16*t+r}return n};function s(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){if("string"==typeof e&&(e=s(e)),!r(e))throw new Error("expected Uint8Array, got "+typeof e);return e}e.nextTick=async()=>{},e.asyncLoop=async function(t,r,n){let o=Date.now();for(let i=0;i<t;i++){n(i);const t=Date.now()-o;t>=0&&t<r||(await(0,e.nextTick)(),o+=t)}},e.utf8ToBytes=s,e.toBytes=a,e.concatBytes=function(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];if(!r(t))throw new Error("Uint8Array expected");e+=t.length}const t=new Uint8Array(e);for(let r=0,n=0;r<arguments.length;r++){const e=r<0||arguments.length<=r?void 0:arguments[r];t.set(e,n),n+=e.length}return t};e.Hash=class{clone(){return this._cloneInto()}};const l={}.toString;e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==l.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}(cu),Object.defineProperty(eu,"__esModule",{value:!0}),eu.SHA2=void 0;const du=tu,fu=cu;eu.SHA2=class extends fu.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,fu.createView)(this.buffer)}update(e){(0,du.exists)(this);const{view:t,buffer:r,blockLen:n}=this,o=(e=(0,fu.toBytes)(e)).length;for(let i=0;i<o;){const s=Math.min(n-this.pos,o-i);if(s!==n)r.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=(0,fu.createView)(e);for(;n<=o-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,du.exists)(this),(0,du.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(r,0),i=0);for(let u=i;u<n;u++)t[u]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),a=Number(r&i),l=n?4:0,c=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+c,a,n)})(r,n-8,BigInt(8*this.length),o),this.process(r,0);const s=(0,fu.createView)(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)s.setUint32(4*u,c[u],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:o,destroyed:i,pos:s}=this;return e.length=n,e.pos=s,e.finished=o,e.destroyed=i,n%t&&e.buffer.set(r),e}},Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.sha224=Qc.sha256=void 0;const hu=eu,pu=cu,gu=(e,t,r)=>e&t^~e&r,bu=(e,t,r)=>e&t^e&r^t&r,mu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wu=new Uint32Array(64);class _u extends hu.SHA2{constructor(){super(64,32,8,!1),this.A=0|yu[0],this.B=0|yu[1],this.C=0|yu[2],this.D=0|yu[3],this.E=0|yu[4],this.F=0|yu[5],this.G=0|yu[6],this.H=0|yu[7]}get(){const{A:e,B:t,C:r,D:n,E:o,F:i,G:s,H:a}=this;return[e,t,r,n,o,i,s,a]}set(e,t,r,n,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let u=0;u<16;u++,t+=4)wu[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const e=wu[u-15],t=wu[u-2],r=(0,pu.rotr)(e,7)^(0,pu.rotr)(e,18)^e>>>3,n=(0,pu.rotr)(t,17)^(0,pu.rotr)(t,19)^t>>>10;wu[u]=n+wu[u-7]+r+wu[u-16]|0}let{A:r,B:n,C:o,D:i,E:s,F:a,G:l,H:c}=this;for(let u=0;u<64;u++){const e=c+((0,pu.rotr)(s,6)^(0,pu.rotr)(s,11)^(0,pu.rotr)(s,25))+gu(s,a,l)+mu[u]+wu[u]|0,t=((0,pu.rotr)(r,2)^(0,pu.rotr)(r,13)^(0,pu.rotr)(r,22))+bu(r,n,o)|0;c=l,l=a,a=s,s=i+e|0,i=o,o=n,n=r,r=e+t|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,o,i,s,a,l,c)}roundClean(){wu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class vu extends _u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Qc.sha256=(0,pu.wrapConstructor)((()=>new _u)),Qc.sha224=(0,pu.wrapConstructor)((()=>new vu));var Eu={},Su={};Object.defineProperty(Su,"__esModule",{value:!0}),Su.validateObject=Su.createHmacDrbg=Su.bitMask=Su.bitSet=Su.bitGet=Su.bitLen=Su.utf8ToBytes=Su.equalBytes=Su.concatBytes=Su.ensureBytes=Su.numberToVarBytesBE=Su.numberToBytesLE=Su.numberToBytesBE=Su.bytesToNumberLE=Su.bytesToNumberBE=Su.hexToBytes=Su.hexToNumber=Su.numberToHexUnpadded=Su.bytesToHex=Su.isBytes=void 0;const Ru=BigInt(0),Au=BigInt(1),Iu=BigInt(2);function Tu(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}Su.isBytes=Tu;const xu=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ou(e){if(!Tu(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=xu[e[r]];return t}function ku(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Lu(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}Su.bytesToHex=Ou,Su.numberToHexUnpadded=ku,Su.hexToNumber=Lu;const Pu={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Bu(e){return e>=Pu._0&&e<=Pu._9?e-Pu._0:e>=Pu._A&&e<=Pu._F?e-(Pu._A-10):e>=Pu._a&&e<=Pu._f?e-(Pu._a-10):void 0}function Cu(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){const t=Bu(e.charCodeAt(i)),r=Bu(e.charCodeAt(i+1));if(void 0===t||void 0===r){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[o]=16*t+r}return n}function Nu(e,t){return Cu(e.toString(16).padStart(2*t,"0"))}function ju(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];if(!Tu(t))throw new Error("Uint8Array expected");e+=t.length}let t=new Uint8Array(e),r=0;for(let n=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}Su.hexToBytes=Cu,Su.bytesToNumberBE=function(e){return Lu(Ou(e))},Su.bytesToNumberLE=function(e){if(!Tu(e))throw new Error("Uint8Array expected");return Lu(Ou(Uint8Array.from(e).reverse()))},Su.numberToBytesBE=Nu,Su.numberToBytesLE=function(e,t){return Nu(e,t).reverse()},Su.numberToVarBytesBE=function(e){return Cu(ku(e))},Su.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=Cu(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else{if(!Tu(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const o=n.length;if("number"==typeof r&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n},Su.concatBytes=ju,Su.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},Su.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},Su.bitLen=function(e){let t;for(t=0;e>Ru;e>>=Au,t+=1);return t},Su.bitGet=function(e,t){return e>>BigInt(t)&Au};Su.bitSet=(e,t,r)=>e|(r?Au:Ru)<<BigInt(t);Su.bitMask=e=>(Iu<<BigInt(e-1))-Au;const $u=e=>new Uint8Array(e),Mu=e=>Uint8Array.from(e);Su.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=$u(e),o=$u(e),i=0;const s=()=>{n.fill(1),o.fill(0),i=0},a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(o,n,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$u();o=a(Mu([0]),e),n=a(),0!==e.length&&(o=a(Mu([1]),e),n=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return ju(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(c()));)l();return s(),r}};const Fu={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Tu(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};Su.validateObject=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=(t,r,n)=>{const o=Fu[r];if("function"!=typeof o)throw new Error(`Invalid validator "${r}", expected function`);const i=e[t];if((!n||void 0!==i)&&!o(i,e))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${r}`)};for(const[o,i]of Object.entries(t))n(o,i,!1);for(const[o,i]of Object.entries(r))n(o,i,!0);return e},Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.mapHashToField=Eu.getMinHashLength=Eu.getFieldBytesLength=Eu.hashToPrivateScalar=Eu.FpSqrtEven=Eu.FpSqrtOdd=Eu.Field=Eu.nLength=Eu.FpIsSquare=Eu.FpDiv=Eu.FpInvertBatch=Eu.FpPow=Eu.validateField=Eu.isNegativeLE=Eu.FpSqrt=Eu.tonelliShanks=Eu.invert=Eu.pow2=Eu.pow=Eu.mod=void 0;const Du=Su,Uu=BigInt(0),zu=BigInt(1),Hu=BigInt(2),Wu=BigInt(3),qu=BigInt(4),Vu=BigInt(5),Zu=BigInt(8);function Gu(e,t){const r=e%t;return r>=Uu?r:t+r}function Ju(e,t,r){if(r<=Uu||t<Uu)throw new Error("Expected power/modulo > 0");if(r===zu)return Uu;let n=zu;for(;t>Uu;)t&zu&&(n=n*e%r),e=e*e%r,t>>=zu;return n}function Ku(e,t){if(e===Uu||t<=Uu)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Gu(e,t),n=t,o=Uu,i=zu;for(;r!==Uu;){const e=n%r,t=o-i*(n/r);n=r,r=e,o=i,i=t}if(n!==zu)throw new Error("invert: does not exist");return Gu(o,t)}function Xu(e){const t=(e-zu)/Hu;let r,n,o;for(r=e-zu,n=0;r%Hu===Uu;r/=Hu,n++);for(o=Hu;o<e&&Ju(o,t,e)!==e-zu;o++);if(1===n){const t=(e+zu)/qu;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const i=(r+zu)/Hu;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,l=e.pow(e.mul(e.ONE,o),r),c=e.pow(s,i),u=e.pow(s,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const r=e.pow(l,zu<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}function Yu(e){if(e%qu===Wu){const t=(e+zu)/qu;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Zu===Vu){const t=(e-Vu)/Zu;return function(e,r){const n=e.mul(r,Hu),o=e.pow(n,t),i=e.mul(r,o),s=e.mul(e.mul(i,Hu),o),a=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return Xu(e)}BigInt(9),BigInt(16),Eu.mod=Gu,Eu.pow=Ju,Eu.pow2=function(e,t,r){let n=e;for(;t-- >Uu;)n*=n,n%=r;return n},Eu.invert=Ku,Eu.tonelliShanks=Xu,Eu.FpSqrt=Yu;Eu.isNegativeLE=(e,t)=>(Gu(e,t)&zu)===zu;const Qu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ed(e,t,r){if(r<Uu)throw new Error("Expected power > 0");if(r===Uu)return e.ONE;if(r===zu)return t;let n=e.ONE,o=t;for(;r>Uu;)r&zu&&(n=e.mul(n,o)),o=e.sqr(o),r>>=zu;return n}function td(e,t){const r=new Array(t.length),n=t.reduce(((t,n,o)=>e.is0(n)?t:(r[o]=t,e.mul(t,n))),e.ONE),o=e.inv(n);return t.reduceRight(((t,n,o)=>e.is0(n)?t:(r[o]=e.mul(t,r[o]),e.mul(t,n))),o),r}function rd(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function nd(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function od(e){const t=nd(e);return t+Math.ceil(t/2)}Eu.validateField=function(e){const t=Qu.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,Du.validateObject)(e,t)},Eu.FpPow=ed,Eu.FpInvertBatch=td,Eu.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?Ku(r,e.ORDER):e.inv(r))},Eu.FpIsSquare=function(e){const t=(e.ORDER-zu)/Hu;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},Eu.nLength=rd,Eu.Field=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=Uu)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=rd(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Yu(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:(0,Du.bitMask)(o),ZERO:Uu,ONE:zu,create:t=>Gu(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Uu<=t&&t<e},is0:e=>e===Uu,isOdd:e=>(e&zu)===zu,neg:t=>Gu(-t,e),eql:(e,t)=>e===t,sqr:t=>Gu(t*t,e),add:(t,r)=>Gu(t+r,e),sub:(t,r)=>Gu(t-r,e),mul:(t,r)=>Gu(t*r,e),pow:(e,t)=>ed(a,e,t),div:(t,r)=>Gu(t*Ku(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ku(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>td(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,Du.numberToBytesLE)(e,i):(0,Du.numberToBytesBE)(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return r?(0,Du.bytesToNumberLE)(e):(0,Du.bytesToNumberBE)(e)}});return Object.freeze(a)},Eu.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},Eu.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},Eu.hashToPrivateScalar=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(e=(0,Du.ensureBytes)("privateHash",e)).length,o=rd(t).nByteLength+8;if(o<24||n<o||n>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${n}`);return Gu(r?(0,Du.bytesToNumberLE)(e):(0,Du.bytesToNumberBE)(e),t-zu)+zu},Eu.getFieldBytesLength=nd,Eu.getMinHashLength=od,Eu.mapHashToField=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.length,o=nd(t),i=od(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const s=Gu(r?(0,Du.bytesToNumberBE)(e):(0,Du.bytesToNumberLE)(e),t-zu)+zu;return r?(0,Du.numberToBytesLE)(s,o):(0,Du.numberToBytesBE)(s,o)};var id={},sd={};Object.defineProperty(sd,"__esModule",{value:!0}),sd.validateBasic=sd.wNAF=void 0;const ad=Eu,ld=Su,cd=BigInt(0),ud=BigInt(1);sd.wNAF=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,o=t;for(;r>cd;)r&ud&&(n=n.add(o)),o=o.double(),r>>=ud;return n},precomputeWindow(e,t){const{windows:r,windowSize:o}=n(t),i=[];let s=e,a=s;for(let n=0;n<r;n++){a=s,i.push(a);for(let e=1;e<o;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(t,o,i){const{windows:s,windowSize:a}=n(t);let l=e.ZERO,c=e.BASE;const u=BigInt(2**t-1),d=2**t,f=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let n=Number(i&u);i>>=f,n>a&&(n-=d,i+=ud);const s=t,h=t+Math.abs(n)-1,p=e%2!==0,g=n<0;0===n?c=c.add(r(p,o[s])):l=l.add(r(g,o[h]))}return{p:l,f:c}},wNAFCached(e,t,r,n){const o=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,o),1!==o&&t.set(e,n(i))),this.wNAF(o,i,r)}}},sd.validateBasic=function(e){return(0,ad.validateField)(e.Fp),(0,ld.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,ad.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;const t=Eu,r=Su,n=Su,o=sd;const{bytesToNumberBE:i,hexToBytes:s}=r;e.DER={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(t){const{Err:r}=e.DER;if(t.length<2||2!==t[0])throw new r("Invalid signature integer tag");const n=t[1],o=t.subarray(2,n+2);if(!n||o.length!==n)throw new r("Invalid signature integer: wrong length");if(128&o[0])throw new r("Invalid signature integer: negative");if(0===o[0]&&!(128&o[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:i(o),l:t.subarray(n+2)}},toSig(t){const{Err:n}=e.DER,o="string"==typeof t?s(t):t;if(!r.isBytes(o))throw new Error("ui8a expected");let i=o.length;if(i<2||48!=o[0])throw new n("Invalid signature tag");if(o[1]!==i-2)throw new n("Invalid signature: incorrect length");const{d:a,l:l}=e.DER._parseInt(o.subarray(2)),{d:c,l:u}=e.DER._parseInt(l);if(u.length)throw new n("Invalid signature: left bytes after parsing");return{r:a,s:c}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),o=t(r(e.r)),i=n.length/2,s=o.length/2,a=r(i),l=r(s);return`30${r(s+i+4)}02${l}${o}02${a}${n}`}};const a=BigInt(0),l=BigInt(1),c=BigInt(2),u=BigInt(3),d=BigInt(4);function f(e){const i=function(e){const t=(0,o.validateBasic)(e);r.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:i,a:s}=t;if(n){if(!i.eql(s,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:s}=i,c=i.toBytes||((e,t,n)=>{const o=t.toAffine();return r.concatBytes(Uint8Array.from([4]),s.toBytes(o.x),s.toBytes(o.y))}),d=i.fromBytes||(e=>{const t=e.subarray(1);return{x:s.fromBytes(t.subarray(0,s.BYTES)),y:s.fromBytes(t.subarray(s.BYTES,2*s.BYTES))}});function f(e){const{a:t,b:r}=i,n=s.sqr(e),o=s.mul(n,e);return s.add(s.add(o,s.mul(e,t)),r)}if(!s.eql(s.sqr(i.Gy),f(i.Gx)))throw new Error("bad generator point: equation left != right");function h(e){return"bigint"==typeof e&&a<e&&e<i.n}function p(e){if(!h(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(e){const{allowedPrivateKeyLengths:o,nByteLength:s,wrapPrivateKey:a,n:l}=i;if(o&&"bigint"!=typeof e){if(r.isBytes(e)&&(e=r.bytesToHex(e)),"string"!=typeof e||!o.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}let c;try{c="bigint"==typeof e?e:r.bytesToNumberBE((0,n.ensureBytes)("private key",e,s))}catch{throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return a&&(c=t.mod(c,l)),p(c),c}const b=new Map;function m(e){if(!(e instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!s.isValid(e))throw new Error("x required");if(null==t||!s.isValid(t))throw new Error("y required");if(null==r||!s.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!s.isValid(t)||!s.isValid(r))throw new Error("invalid affine point");if(e instanceof y)throw new Error("projective point not allowed");const n=e=>s.eql(e,s.ZERO);return n(t)&&n(r)?y.ZERO:new y(t,r,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(y.fromAffine)}static fromHex(e){const t=y.fromAffine(d((0,n.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(g(e))}_setWindowSize(e){this._WINDOW_SIZE=e,b.delete(this)}assertValidity(){if(this.is0()){if(i.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:t}=this.toAffine();if(!s.isValid(e)||!s.isValid(t))throw new Error("bad point: x or y not FE");const r=s.sqr(t),n=f(e);if(!s.eql(r,n))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(s.isOdd)return!s.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){m(e);const{px:t,py:r,pz:n}=this,{px:o,py:i,pz:a}=e,l=s.eql(s.mul(t,a),s.mul(o,n)),c=s.eql(s.mul(r,a),s.mul(i,n));return l&&c}negate(){return new y(this.px,s.neg(this.py),this.pz)}double(){const{a:e,b:t}=i,r=s.mul(t,u),{px:n,py:o,pz:a}=this;let l=s.ZERO,c=s.ZERO,d=s.ZERO,f=s.mul(n,n),h=s.mul(o,o),p=s.mul(a,a),g=s.mul(n,o);return g=s.add(g,g),d=s.mul(n,a),d=s.add(d,d),l=s.mul(e,d),c=s.mul(r,p),c=s.add(l,c),l=s.sub(h,c),c=s.add(h,c),c=s.mul(l,c),l=s.mul(g,l),d=s.mul(r,d),p=s.mul(e,p),g=s.sub(f,p),g=s.mul(e,g),g=s.add(g,d),d=s.add(f,f),f=s.add(d,f),f=s.add(f,p),f=s.mul(f,g),c=s.add(c,f),p=s.mul(o,a),p=s.add(p,p),f=s.mul(p,g),l=s.sub(l,f),d=s.mul(p,h),d=s.add(d,d),d=s.add(d,d),new y(l,c,d)}add(e){m(e);const{px:t,py:r,pz:n}=this,{px:o,py:a,pz:l}=e;let c=s.ZERO,d=s.ZERO,f=s.ZERO;const h=i.a,p=s.mul(i.b,u);let g=s.mul(t,o),b=s.mul(r,a),w=s.mul(n,l),_=s.add(t,r),v=s.add(o,a);_=s.mul(_,v),v=s.add(g,b),_=s.sub(_,v),v=s.add(t,n);let E=s.add(o,l);return v=s.mul(v,E),E=s.add(g,w),v=s.sub(v,E),E=s.add(r,n),c=s.add(a,l),E=s.mul(E,c),c=s.add(b,w),E=s.sub(E,c),f=s.mul(h,v),c=s.mul(p,w),f=s.add(c,f),c=s.sub(b,f),f=s.add(b,f),d=s.mul(c,f),b=s.add(g,g),b=s.add(b,g),w=s.mul(h,w),v=s.mul(p,v),b=s.add(b,w),w=s.sub(g,w),w=s.mul(h,w),v=s.add(v,w),g=s.mul(b,v),d=s.add(d,g),g=s.mul(E,v),c=s.mul(_,c),c=s.sub(c,g),g=s.mul(_,b),f=s.mul(E,f),f=s.add(f,g),new y(c,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return _.wNAFCached(this,b,e,(e=>{const t=s.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(y.fromAffine)}))}multiplyUnsafe(e){const t=y.ZERO;if(e===a)return t;if(p(e),e===l)return this;const{endo:r}=i;if(!r)return _.unsafeLadder(this,e);let{k1neg:n,k1:o,k2neg:c,k2:u}=r.splitScalar(e),d=t,f=t,h=this;for(;o>a||u>a;)o&l&&(d=d.add(h)),u&l&&(f=f.add(h)),h=h.double(),o>>=l,u>>=l;return n&&(d=d.negate()),c&&(f=f.negate()),f=new y(s.mul(f.px,r.beta),f.py,f.pz),d.add(f)}multiply(e){p(e);let t,r,n=e;const{endo:o}=i;if(o){const{k1neg:e,k1:i,k2neg:a,k2:l}=o.splitScalar(n);let{p:c,f:u}=this.wNAF(i),{p:d,f:f}=this.wNAF(l);c=_.constTimeNegate(e,c),d=_.constTimeNegate(a,d),d=new y(s.mul(d.px,o.beta),d.py,d.pz),t=c.add(d),r=u.add(f)}else{const{p:e,f:o}=this.wNAF(n);t=e,r=o}return y.normalizeZ([t,r])[0]}multiplyAndAddUnsafe(e,t,r){const n=y.BASE,o=(e,t)=>t!==a&&t!==l&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,r));return i.is0()?void 0:i}toAffine(e){const{px:t,py:r,pz:n}=this,o=this.is0();null==e&&(e=o?s.ONE:s.inv(n));const i=s.mul(t,e),a=s.mul(r,e),l=s.mul(n,e);if(o)return{x:s.ZERO,y:s.ZERO};if(!s.eql(l,s.ONE))throw new Error("invZ was invalid");return{x:i,y:a}}isTorsionFree(){const{h:e,isTorsionFree:t}=i;if(e===l)return!0;if(t)return t(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:t}=i;return e===l?this:t?t(y,this):this.multiplyUnsafe(i.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),c(y,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r.bytesToHex(this.toRawBytes(e))}}y.BASE=new y(i.Gx,i.Gy,s.ONE),y.ZERO=new y(s.ZERO,s.ONE,s.ZERO);const w=i.nBitLength,_=(0,o.wNAF)(y,i.endo?Math.ceil(w/2):w);return{CURVE:i,ProjectivePoint:y,normPrivateKeyToScalar:g,weierstrassEquation:f,isWithinCurveOrder:h}}function h(e,t){const r=e.ORDER;let n=a;for(let u=r-l;u%c===a;u/=c)n+=l;const o=n,i=c<<o-l-l,s=i*c,f=(r-l)/s,h=(f-l)/c,p=s-l,g=i,b=e.pow(t,f),m=e.pow(t,(f+l)/c);let y=(t,r)=>{let n=b,i=e.pow(r,p),s=e.sqr(i);s=e.mul(s,r);let a=e.mul(t,s);a=e.pow(a,h),a=e.mul(a,i),i=e.mul(a,r),s=e.mul(a,t);let u=e.mul(s,i);a=e.pow(u,g);let d=e.eql(a,e.ONE);i=e.mul(s,m),a=e.mul(u,n),s=e.cmov(i,s,d),u=e.cmov(a,u,d);for(let f=o;f>l;f--){let t=f-c;t=c<<t-l;let r=e.pow(u,t);const o=e.eql(r,e.ONE);i=e.mul(s,n),n=e.mul(n,n),r=e.mul(u,n),s=e.cmov(i,s,o),u=e.cmov(r,u,o)}return{isValid:d,value:s}};if(e.ORDER%d===u){const r=(e.ORDER-u)/d,n=e.sqrt(e.neg(t));y=(t,o)=>{let i=e.sqr(o);const s=e.mul(t,o);i=e.mul(i,s);let a=e.pow(i,r);a=e.mul(a,s);const l=e.mul(a,n),c=e.mul(e.sqr(a),o),u=e.eql(c,t);return{isValid:u,value:e.cmov(l,a,u)}}}return y}e.weierstrassPoints=f,e.weierstrass=function(i){const s=function(e){const t=(0,o.validateBasic)(e);return r.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(i),{Fp:c,n:u}=s,d=c.BYTES+1,h=2*c.BYTES+1;function p(e){return t.mod(e,u)}function g(e){return t.invert(e,u)}const{ProjectivePoint:b,normPrivateKeyToScalar:m,weierstrassEquation:y,isWithinCurveOrder:w}=f({...s,toBytes(e,t,n){const o=t.toAffine(),i=c.toBytes(o.x),s=r.concatBytes;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,c.toBytes(o.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==d||2!==n&&3!==n){if(t===h&&4===n){return{x:c.fromBytes(o.subarray(0,c.BYTES)),y:c.fromBytes(o.subarray(c.BYTES,2*c.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${h} uncompressed bytes`)}{const e=r.bytesToNumberBE(o);if(!function(e){return a<e&&e<c.ORDER}(e))throw new Error("Point is not on curve");const t=y(e);let i=c.sqrt(t);return 1===(1&n)!==((i&l)===l)&&(i=c.neg(i)),{x:e,y:i}}}}),_=e=>r.bytesToHex(r.numberToBytesBE(e,s.nByteLength));function v(e){return e>u>>l}const E=(e,t,n)=>r.bytesToNumberBE(e.slice(t,n));class S{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const t=s.nByteLength;return e=(0,n.ensureBytes)("compactSignature",e,2*t),new S(E(e,0,t),E(e,t,2*t))}static fromDER(t){const{r:r,s:o}=e.DER.toSig((0,n.ensureBytes)("DER",t));return new S(r,o)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:r,recovery:o}=this,i=T((0,n.ensureBytes)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const a=2===o||3===o?t+s.n:t;if(a>=c.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&o?"03":"02",u=b.fromHex(l+_(a)),d=g(a),f=p(-i*d),h=p(r*d),m=b.BASE.multiplyAndAddUnsafe(u,f,h);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}const R={isValidPrivateKey(e){try{return m(e),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const e=t.getMinHashLength(s.n);return t.mapHashToField(s.randomBytes(e),s.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function A(e){const t=r.isBytes(e),n="string"==typeof e,o=(t||n)&&e.length;return t?o===d||o===h:n?o===2*d||o===2*h:e instanceof b}const I=s.bits2int||function(e){const t=r.bytesToNumberBE(e),n=8*e.length-s.nBitLength;return n>0?t>>BigInt(n):t},T=s.bits2int_modN||function(e){return p(I(e))},x=r.bitMask(s.nBitLength);function O(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(a<=e&&e<x))throw new Error(`bigint expected < 2^${s.nBitLength}`);return r.numberToBytesBE(e,s.nByteLength)}function k(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;if(["recovered","canonical"].some((e=>e in o)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=s;let{lowS:d,prehash:f,extraEntropy:h}=o;null==d&&(d=!0),e=(0,n.ensureBytes)("msgHash",e),f&&(e=(0,n.ensureBytes)("prehashed msgHash",i(e)));const y=T(e),_=m(t),E=[O(_),O(y)];if(null!=h){const e=!0===h?u(c.BYTES):h;E.push((0,n.ensureBytes)("extraEntropy",e))}const R=r.concatBytes(...E),A=y;return{seed:R,k2sig:function(e){const t=I(e);if(!w(t))return;const r=g(t),n=b.BASE.multiply(t).toAffine(),o=p(n.x);if(o===a)return;const i=p(r*p(A+o*_));if(i===a)return;let s=(n.x===o?0:2)|Number(n.y&l),c=i;return d&&v(i)&&(c=function(e){return v(e)?p(-e):e}(i),s^=1),new S(o,c,s)}}}const L={lowS:s.lowS,prehash:!1},P={lowS:s.lowS,prehash:!1};return b.BASE._setWindowSize(8),{CURVE:s,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return b.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(A(e))throw new Error("first arg must be private key");if(!A(t))throw new Error("second arg must be public key");return b.fromHex(t).multiply(m(e)).toRawBytes(r)},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;const{seed:o,k2sig:i}=k(e,t,n),a=s;return r.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(o,i)},verify:function(t,o,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P;var l;const c=t;if(o=(0,n.ensureBytes)("msgHash",o),i=(0,n.ensureBytes)("publicKey",i),"strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:d}=a;let f,h;try{if("string"==typeof c||r.isBytes(c))try{f=S.fromDER(c)}catch(A){if(!(A instanceof e.DER.Err))throw A;f=S.fromCompact(c)}else{if("object"!=typeof c||"bigint"!=typeof c.r||"bigint"!=typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;f=new S(e,t)}}h=b.fromHex(i)}catch(A){if("PARSE"===A.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&f.hasHighS())return!1;d&&(o=s.hash(o));const{r:m,s:y}=f,w=T(o),_=g(y),v=p(w*_),E=p(m*_),R=null==(l=b.BASE.multiplyAndAddUnsafe(h,v,E))?void 0:l.toAffine();return!!R&&p(R.x)===m},ProjectivePoint:b,Signature:S,utils:R}},e.SWUFpSqrtRatio=h,e.mapToCurveSimpleSWU=function(e,r){if(t.validateField(e),!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=h(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return t=>{let o,i,s,a,l,c,u,d;o=e.sqr(t),o=e.mul(o,r.Z),i=e.sqr(o),i=e.add(i,o),s=e.add(i,e.ONE),s=e.mul(s,r.B),a=e.cmov(r.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,r.A),i=e.sqr(s),c=e.sqr(a),l=e.mul(c,r.A),i=e.add(i,l),i=e.mul(i,s),c=e.mul(c,a),l=e.mul(c,r.B),i=e.add(i,l),u=e.mul(o,s);const{isValid:f,value:h}=n(i,c);d=e.mul(o,t),d=e.mul(d,h),u=e.cmov(u,s,f),d=e.cmov(d,h,f);const p=e.isOdd(t)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),u=e.div(u,a),{x:u,y:d}}}}(id);var dd={};Object.defineProperty(dd,"__esModule",{value:!0}),dd.createHasher=dd.isogenyMap=dd.hash_to_field=dd.expand_message_xof=dd.expand_message_xmd=void 0;const fd=Eu,hd=Su;const pd=hd.bytesToNumberBE;function gd(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function bd(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function md(e){if(!(0,hd.isBytes)(e))throw new Error("Uint8Array expected")}function yd(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function wd(e,t,r,n){md(e),md(t),yd(r),t.length>255&&(t=n((0,hd.concatBytes)((0,hd.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:o,blockLen:i}=n,s=Math.ceil(r/o);if(s>255)throw new Error("Invalid xmd length");const a=(0,hd.concatBytes)(t,gd(t.length,1)),l=gd(0,i),c=gd(r,2),u=new Array(s),d=n((0,hd.concatBytes)(l,e,c,gd(0,1),a));u[0]=n((0,hd.concatBytes)(d,gd(1,1),a));for(let f=1;f<=s;f++){const e=[bd(d,u[f-1]),gd(f+1,1),a];u[f]=n((0,hd.concatBytes)(...e))}return(0,hd.concatBytes)(...u).slice(0,r)}function _d(e,t,r,n,o){if(md(e),md(t),yd(r),t.length>255){const e=Math.ceil(2*n/8);t=o.create({dkLen:e}).update((0,hd.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:r}).update(e).update(gd(r,2)).update(t).update(gd(t.length,1)).digest()}function vd(e,t,r){(0,hd.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:o,m:i,hash:s,expand:a,DST:l}=r;md(e),yd(t);const c=function(e){if((0,hd.isBytes)(e))return e;if("string"==typeof e)return(0,hd.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(l),u=n.toString(2).length,d=Math.ceil((u+o)/8),f=t*i*d;let h;if("xmd"===a)h=wd(e,c,f,s);else if("xof"===a)h=_d(e,c,f,o,s);else{if("_internal_pass"!==a)throw new Error('expand must be "xmd" or "xof"');h=e}const p=new Array(t);for(let g=0;g<t;g++){const e=new Array(i);for(let t=0;t<i;t++){const r=d*(t+g*i),o=h.subarray(r,r+d);e[t]=(0,fd.mod)(pd(o),n)}p[g]=e}return p}dd.expand_message_xmd=wd,dd.expand_message_xof=_d,dd.hash_to_field=vd,dd.isogenyMap=function(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[o,i,s,a]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));return t=e.div(o,i),n=e.mul(n,e.div(s,a)),{x:t,y:n}}},dd.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,o){const i=vd(n,2,{...r,DST:r.DST,...o}),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),l=s.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,o){const i=vd(n,1,{...r,DST:r.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s}}};var Ed={},Sd={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=tu,r=cu;class n extends r.Hash{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,(0,t.hash)(e);const o=(0,r.toBytes)(n);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(o.length>i?e.create().update(o).digest():o);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=e.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,t.exists)(this),this.iHash.update(e),this}digestInto(e){(0,t.exists)(this),(0,t.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=n,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=n;e.hmac=(e,t,r)=>new n(e,t).update(r).digest(),e.hmac.create=(e,t)=>new n(e,t)}(Sd),Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.createCurve=Ed.getHash=void 0;const Rd=Sd,Ad=cu,Id=id;function Td(e){return{hash:e,hmac:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return(0,Rd.hmac)(e,t,(0,Ad.concatBytes)(...n))},randomBytes:Ad.randomBytes}}Ed.getHash=Td,Ed.createCurve=function(e,t){const r=t=>(0,Id.weierstrass)({...e,...Td(t)});return Object.freeze({...r(t),create:r})},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;const t=Qc,r=cu,n=Eu,o=id,i=Su,s=dd,a=Ed,l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),f=(e,t)=>(e+t/d)/t;function h(e){const t=l,r=BigInt(3),o=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),f=e*e*e%t,h=f*f*e%t,g=(0,n.pow2)(h,r,t)*h%t,b=(0,n.pow2)(g,r,t)*h%t,m=(0,n.pow2)(b,d,t)*f%t,y=(0,n.pow2)(m,i,t)*m%t,w=(0,n.pow2)(y,s,t)*y%t,_=(0,n.pow2)(w,c,t)*w%t,v=(0,n.pow2)(_,u,t)*_%t,E=(0,n.pow2)(v,c,t)*w%t,S=(0,n.pow2)(E,r,t)*h%t,R=(0,n.pow2)(S,a,t)*y%t,A=(0,n.pow2)(R,o,t)*f%t,I=(0,n.pow2)(A,d,t);if(!p.eql(p.sqr(I),e))throw new Error("Cannot find square root");return I}const p=(0,n.Field)(l,void 0,void 0,{sqrt:h});e.secp256k1=(0,a.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=c,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),l=f(s*e,t),d=f(-o*e,t);let h=(0,n.mod)(e-l*r-d*i,t),p=(0,n.mod)(-l*o-d*s,t);const g=h>a,b=p>a;if(g&&(h=t-h),b&&(p=t-p),h>a||p>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:g,k1:h,k2neg:b,k2:p}}}},t.sha256);const g=BigInt(0),b=e=>"bigint"==typeof e&&g<e&&e<l,m=e=>"bigint"==typeof e&&g<e&&e<c,y={};function w(e){let r=y[e];if(void 0===r){const n=(0,t.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=(0,i.concatBytes)(n,n),y[e]=r}for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return(0,t.sha256)((0,i.concatBytes)(r,...o))}const _=e=>e.toRawBytes(!0).slice(1),v=e=>(0,i.numberToBytesBE)(e,32),E=e=>(0,n.mod)(e,l),S=e=>(0,n.mod)(e,c),R=e.secp256k1.ProjectivePoint,A=(e,t,r)=>R.BASE.multiplyAndAddUnsafe(e,t,r);function I(t){let r=e.secp256k1.utils.normPrivateKeyToScalar(t),n=R.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:S(-r),bytes:_(n)}}function T(e){if(!b(e))throw new Error("bad x: need 0 < x < p");const t=E(e*e);let r=h(E(t*e+BigInt(7)));r%d!==g&&(r=E(-r));const n=new R(e,r,u);return n.assertValidity(),n}function x(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return S((0,i.bytesToNumberBE)(w("BIP0340/challenge",...t)))}function O(e,t,r){const n=(0,i.ensureBytes)("signature",e,64),o=(0,i.ensureBytes)("message",t),s=(0,i.ensureBytes)("publicKey",r,32);try{const e=T((0,i.bytesToNumberBE)(s)),t=(0,i.bytesToNumberBE)(n.subarray(0,32));if(!b(t))return!1;const r=(0,i.bytesToNumberBE)(n.subarray(32,64));if(!m(r))return!1;const a=x(v(t),_(e),o),l=A(e,r,S(-a));return!(!l||!l.hasEvenY()||l.toAffine().x!==t)}catch{return!1}}e.schnorr={getPublicKey:function(e){return I(e).bytes},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.randomBytes)(32);const o=(0,i.ensureBytes)("message",e),{bytes:s,scalar:a}=I(t),l=(0,i.ensureBytes)("auxRand",n,32),c=v(a^(0,i.bytesToNumberBE)(w("BIP0340/aux",l))),u=w("BIP0340/nonce",c,s,o),d=S((0,i.bytesToNumberBE)(u));if(d===g)throw new Error("sign failed: k is zero");const{bytes:f,scalar:h}=I(d),p=x(f,s,o),b=new Uint8Array(64);if(b.set(f,0),b.set(v(S(h+p*a)),32),!O(b,o,s))throw new Error("sign: Invalid signature produced");return b},verify:O,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:T,pointToBytes:_,numberToBytesBE:i.numberToBytesBE,bytesToNumberBE:i.bytesToNumberBE,taggedHash:w,mod:n.mod}};const k=(0,s.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))),L=(0,o.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),P=(0,s.createHasher)(e.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=L(p.create(e[0]));return k(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256});e.hashToCurve=P.hashToCurve,e.encodeToCurve=P.encodeToCurve}(Yc),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.secp256k1=void 0;var t=Yc;Object.defineProperty(e,"secp256k1",{enumerable:!0,get:function(){return t.secp256k1}})}(Xc),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_WITHDRAWALS_PER_PAYLOAD=e.RLP_EMPTY_STRING=e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.SECP256K1_ORDER_DIV_2=e.SECP256K1_ORDER=e.MAX_INTEGER_BIGINT=e.MAX_INTEGER=e.MAX_UINT64=void 0;const t=n.n,r=Xc;e.MAX_UINT64=BigInt("0xffffffffffffffff"),e.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),e.SECP256K1_ORDER=r.secp256k1.CURVE.n,e.SECP256K1_ORDER_DIV_2=r.secp256k1.CURVE.n/BigInt(2),e.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=t.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=t.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=t.Buffer.from(e.KECCAK256_RLP_S,"hex"),e.RLP_EMPTY_STRING=t.Buffer.from([128]),e.MAX_WITHDRAWALS_PER_PAYLOAD=16}(Kc);var xd={};Object.defineProperty(xd,"__esModule",{value:!0}),xd.GWEI_TO_WEI=void 0,xd.GWEI_TO_WEI=BigInt(1e9);var Od={},kd={};function Ld(e){if(Array.isArray(e)){const t=[];let r=0;for(let n=0;n<e.length;n++){const o=Ld(e[n]);t.push(o),r+=o.length}return Ud(Cd(r,192),...t)}const t=qd(e);return 1===t.length&&t[0]<128?t:Ud(Cd(t.length,128),t)}function Pd(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function Bd(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return Fd(Md(e))}function Cd(e,t){if(e<56)return Uint8Array.from([e+t]);const r=Hd(e),n=Hd(t+55+r.length/2);return Uint8Array.from(Dd(n+r))}function Nd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(typeof e>"u"||null===e||0===e.length)return Uint8Array.from([]);const r=jd(qd(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function jd(e){let t,r,n,o,i;const s=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,n=128===a?Uint8Array.from([]):Pd(e,1,t),2===t&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=Bd(Pd(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=Pd(e,r,t+r),{data:n,remainder:e.slice(t+r)}}if(a<=247){for(t=a-191,o=Pd(e,1,t);o.length;)i=jd(o),s.push(i.data),o=i.remainder;return{data:s,remainder:e.slice(t)}}{if(r=a-246,t=Bd(Pd(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const n=r+t;if(n>e.length)throw new Error("invalid RLP: total length is larger than the data");for(o=Pd(e,r,n);o.length;)i=jd(o),s.push(i.data),o=i.remainder;return{data:s,remainder:e.slice(n)}}}Object.defineProperty(kd,"__esModule",{value:!0}),kd.RLP=kd.utils=kd.decode=kd.encode=void 0,kd.encode=Ld,kd.decode=Nd;const $d=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Md(e){let t="";for(let r=0;r<e.length;r++)t+=$d[e[r]];return t}function Fd(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function Dd(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=Fd(e.slice(n,n+2))}return t}function Ud(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)return t[0];const n=t.reduce(((e,t)=>e+t.length),0),o=new Uint8Array(n);for(let i=0,s=0;i<t.length;i++){const e=t[i];o.set(e,s),s+=e.length}return o}function zd(e){return(new TextEncoder).encode(e)}function Hd(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function Wd(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function qd(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return Wd(e)?Dd(function(e){return e.length%2?`0${e}`:e}(function(e){return"string"!=typeof e?e:Wd(e)?e.slice(2):e}(e))):zd(e);if("number"==typeof e||"bigint"==typeof e)return e?Dd(Hd(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}kd.utils={bytesToHex:Md,concatBytes:Ud,hexToBytes:Dd,utf8ToBytes:zd},kd.RLP={encode:Ld,decode:Nd};var Vd={},Zd={},Gd={};Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.add5L=Gd.add5H=Gd.add4H=Gd.add4L=Gd.add3H=Gd.add3L=Gd.add=Gd.rotlBL=Gd.rotlBH=Gd.rotlSL=Gd.rotlSH=Gd.rotr32L=Gd.rotr32H=Gd.rotrBL=Gd.rotrBH=Gd.rotrSL=Gd.rotrSH=Gd.shrSL=Gd.shrSH=Gd.toBig=Gd.split=Gd.fromBig=void 0;const Jd=BigInt(2**32-1),Kd=BigInt(32);function Xd(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&Jd),l:Number(e>>Kd&Jd)}:{h:0|Number(e>>Kd&Jd),l:0|Number(e&Jd)}}function Yd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=Xd(e[o],t);[r[o],n[o]]=[i,s]}return[r,n]}Gd.fromBig=Xd,Gd.split=Yd;const Qd=(e,t)=>BigInt(e>>>0)<<Kd|BigInt(t>>>0);Gd.toBig=Qd;const ef=(e,t,r)=>e>>>r;Gd.shrSH=ef;const tf=(e,t,r)=>e<<32-r|t>>>r;Gd.shrSL=tf;const rf=(e,t,r)=>e>>>r|t<<32-r;Gd.rotrSH=rf;const nf=(e,t,r)=>e<<32-r|t>>>r;Gd.rotrSL=nf;const of=(e,t,r)=>e<<64-r|t>>>r-32;Gd.rotrBH=of;const sf=(e,t,r)=>e>>>r-32|t<<64-r;Gd.rotrBL=sf;const af=(e,t)=>t;Gd.rotr32H=af;const lf=(e,t)=>e;Gd.rotr32L=lf;const cf=(e,t,r)=>e<<r|t>>>32-r;Gd.rotlSH=cf;const uf=(e,t,r)=>t<<r|e>>>32-r;Gd.rotlSL=uf;const df=(e,t,r)=>t<<r-32|e>>>64-r;Gd.rotlBH=df;const ff=(e,t,r)=>e<<r-32|t>>>64-r;function hf(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:0|o}}Gd.rotlBL=ff,Gd.add=hf;const pf=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);Gd.add3L=pf;const gf=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;Gd.add3H=gf;const bf=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);Gd.add4L=bf;const mf=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0;Gd.add4H=mf;const yf=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0);Gd.add5L=yf;const wf=(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0;Gd.add5H=wf;const _f={fromBig:Xd,split:Yd,toBig:Qd,shrSH:ef,shrSL:tf,rotrSH:rf,rotrSL:nf,rotrBH:of,rotrBL:sf,rotr32H:af,rotr32L:lf,rotlSH:cf,rotlSL:uf,rotlBH:df,rotlBL:ff,add:hf,add3L:pf,add3H:gf,add4L:bf,add4H:mf,add5H:wf,add5L:yf};Gd.default=_f,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.shake256=Zd.shake128=Zd.keccak_512=Zd.keccak_384=Zd.keccak_256=Zd.keccak_224=Zd.sha3_512=Zd.sha3_384=Zd.sha3_256=Zd.sha3_224=Zd.Keccak=Zd.keccakP=void 0;const vf=tu,Ef=Gd,Sf=cu,[Rf,Af,If]=[[],[],[]],Tf=BigInt(0),xf=BigInt(1),Of=BigInt(2),kf=BigInt(7),Lf=BigInt(256),Pf=BigInt(113);for(let Hg=0,Wg=xf,qg=1,Vg=0;Hg<24;Hg++){[qg,Vg]=[Vg,(2*qg+3*Vg)%5],Rf.push(2*(5*Vg+qg)),Af.push((Hg+1)*(Hg+2)/2%64);let e=Tf;for(let t=0;t<7;t++)Wg=(Wg<<xf^(Wg>>kf)*Pf)%Lf,Wg&Of&&(e^=xf<<(xf<<BigInt(t))-xf);If.push(e)}const[Bf,Cf]=(0,Ef.split)(If,!0),Nf=(e,t,r)=>r>32?(0,Ef.rotlBH)(e,t,r):(0,Ef.rotlSH)(e,t,r),jf=(e,t,r)=>r>32?(0,Ef.rotlBL)(e,t,r):(0,Ef.rotlSL)(e,t,r);function $f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,o=(n+2)%10,i=r[o],s=r[o+1],a=Nf(i,s,1)^r[t],l=jf(i,s,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=l}let t=e[2],o=e[3];for(let r=0;r<24;r++){const n=Af[r],i=Nf(t,o,n),s=jf(t,o,n),a=Rf[r];t=e[a],o=e[a+1],e[a]=i,e[a+1]=s}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=Bf[n],e[1]^=Cf[n]}r.fill(0)}Zd.keccakP=$f;class Mf extends Sf.Hash{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,vf.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Sf.u32)(this.state)}keccak(){$f(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,vf.exists)(this);const{blockLen:t,state:r}=this,n=(e=(0,Sf.toBytes)(e)).length;for(let o=0;o<n;){const i=Math.min(t-this.pos,n-o);for(let t=0;t<i;t++)r[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,vf.exists)(this,!1),(0,vf.bytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,o=e.length;n<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,vf.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,vf.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:o,enableXOF:i}=this;return e||(e=new Mf(t,r,n,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}Zd.Keccak=Mf;const Ff=(e,t,r)=>(0,Sf.wrapConstructor)((()=>new Mf(t,e,r)));Zd.sha3_224=Ff(6,144,28),Zd.sha3_256=Ff(6,136,32),Zd.sha3_384=Ff(6,104,48),Zd.sha3_512=Ff(6,72,64),Zd.keccak_224=Ff(1,144,28),Zd.keccak_256=Ff(1,136,32),Zd.keccak_384=Ff(1,104,48),Zd.keccak_512=Ff(1,72,64);const Df=(e,t,r)=>(0,Sf.wrapXOFConstructorWithOpts)((function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Mf(t,e,void 0===n.dkLen?r:n.dkLen,!0)}));Zd.shake128=Df(31,168,16),Zd.shake256=Df(31,136,32);var Uf={exports:{}};!function(e,t){var r=n.o&&n.o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const o=r(tu),i=cu,s=o.default.bool;t.assertBool=s;const a=o.default.bytes;t.assertBytes=a;var l=cu;Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return l.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return l.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return l.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return l.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return l.utf8ToBytes}}),t.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},t.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,i.hexToBytes)(t)},t.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrapHash=function(e){return t=>(o.default.bytes(t),e(t))},t.crypto=(()=>{const t="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,r="function"==typeof n.cn&&n.cn.bind(e);return{node:r&&!t?r("crypto"):void 0,web:t}})()}(Uf,Uf.exports);var zf=Uf.exports;Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.keccak512=Vd.keccak384=Vd.keccak256=Vd.keccak224=void 0;const Hf=Zd,Wf=zf;Vd.keccak224=(0,Wf.wrapHash)(Hf.keccak_224),Vd.keccak256=(()=>{const e=(0,Wf.wrapHash)(Hf.keccak_256);return e.create=Hf.keccak_256.create,e})(),Vd.keccak384=(0,Wf.wrapHash)(Hf.keccak_384),Vd.keccak512=(0,Wf.wrapHash)(Hf.keccak_512);var qf={},Vf={},Zf={};function Gf(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.isHexString=Zf.getKeys=Zf.fromAscii=Zf.fromUtf8=Zf.toAscii=Zf.arrayContainsArray=Zf.getBinarySize=Zf.padToEven=Zf.stripHexPrefix=Zf.isHexPrefixed=void 0,Zf.isHexPrefixed=Gf;function Jf(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}Zf.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return Gf(e)?e.slice(2):e},Zf.padToEven=Jf,Zf.getBinarySize=function(e){if("string"!=typeof e)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof e);return n.d.Buffer.byteLength(e,"utf8")},Zf.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},Zf.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},Zf.fromUtf8=function(e){return`0x${Jf(n.d.Buffer.from(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},Zf.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},Zf.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let o=0;o<e.length;o++){let i=e[o][t];if(!0!==r||i){if("string"!=typeof i)throw new Error("invalid abi - expected type 'string', received "+typeof i)}else i="";n.push(i)}return n},Zf.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t<"u"&&t>0&&e.length!==2+2*t)},Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.assertIsString=Vf.assertIsArray=Vf.assertIsBuffer=Vf.assertIsHexString=void 0;const Kf=Zf;Vf.assertIsHexString=function(e){if(!(0,Kf.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};Vf.assertIsBuffer=function(e){if(!n.d.Buffer.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};Vf.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};Vf.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.intToUnpaddedBuffer=e.bigIntToUnpaddedBuffer=e.bigIntToHex=e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.short=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToInt=e.bigIntToBuffer=e.bufferToBigInt=e.bufferToHex=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;const t=Vf,r=Zf;e.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};e.intToBuffer=function(t){const o=(0,e.intToHex)(t);return n.d.Buffer.from((0,r.padToEven)(o.slice(2)),"hex")};e.zeros=function(e){return n.d.Buffer.allocUnsafe(e).fill(0)};const o=function(t,r,n){const o=(0,e.zeros)(r);return n?t.length<r?(t.copy(o),o):t.slice(0,r):t.length<r?(t.copy(o,r-t.length),o):t.slice(-r)};e.setLengthLeft=function(e,r){return(0,t.assertIsBuffer)(e),o(e,r,!1)};e.setLengthRight=function(e,r){return(0,t.assertIsBuffer)(e),o(e,r,!0)};const i=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};e.unpadBuffer=function(e){return(0,t.assertIsBuffer)(e),i(e)};e.unpadArray=function(e){return(0,t.assertIsArray)(e),i(e)};e.unpadHexString=function(e){return(0,t.assertIsHexString)(e),e=(0,r.stripHexPrefix)(e),"0x"+i(e)};e.toBuffer=function(t){if(null==t)return n.d.Buffer.allocUnsafe(0);if(n.d.Buffer.isBuffer(t))return n.d.Buffer.from(t);if(Array.isArray(t)||t instanceof Uint8Array)return n.d.Buffer.from(t);if("string"==typeof t){if(!(0,r.isHexString)(t))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${t}`);return n.d.Buffer.from((0,r.padToEven)((0,r.stripHexPrefix)(t)),"hex")}if("number"==typeof t)return(0,e.intToBuffer)(t);if("bigint"==typeof t){if(t<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${t}`);let e=t.toString(16);return e.length%2&&(e="0"+e),n.d.Buffer.from(e,"hex")}if(t.toArray)return n.d.Buffer.from(t.toArray());if(t.toBuffer)return n.d.Buffer.from(t.toBuffer());throw new Error("invalid type")};function s(t){const r=(0,e.bufferToHex)(t);return BigInt("0x"===r?0:r)}function a(t){return(0,e.toBuffer)("0x"+t.toString(16))}e.bufferToHex=function(t){return"0x"+(t=(0,e.toBuffer)(t)).toString("hex")},e.bufferToBigInt=s,e.bigIntToBuffer=a;e.bufferToInt=function(e){const t=Number(s(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};e.fromSigned=function(e){return BigInt.asIntN(256,s(e))};e.toUnsigned=function(e){return a(BigInt.asUintN(256,e))};e.addHexPrefix=function(e){return"string"!=typeof e||(0,r.isHexPrefixed)(e)?e:"0x"+e},e.short=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const r=n.d.Buffer.isBuffer(e)?e.toString("hex"):e;return r.length<=t?r:r.slice(0,t)+"\u2026"};e.toUtf8=function(e){if((e=(0,r.stripHexPrefix)(e)).length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return n.d.Buffer.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};e.baToJSON=function(t){if(n.d.Buffer.isBuffer(t))return`0x${t.toString("hex")}`;if(t instanceof Array){const r=[];for(let n=0;n<t.length;n++)r.push((0,e.baToJSON)(t[n]));return r}};e.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(void 0!==r&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},e.arrToBufArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):n.d.Buffer.from(t)},e.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};e.bigIntToHex=e=>"0x"+e.toString(16),e.bigIntToUnpaddedBuffer=function(t){return(0,e.unpadBuffer)(a(t))},e.intToUnpaddedBuffer=function(t){return(0,e.unpadBuffer)((0,e.intToBuffer)(t))}}(qf),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.accountBodyToRLP=e.accountBodyToSlim=e.accountBodyFromSlim=e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;const t=kd,r=Vd,o=Xc,i=zf,s=qf,a=Kc,l=Vf,c=Zf,u=BigInt(0);class d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.KECCAK256_RLP,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.KECCAK256_NULL;this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:o}=e;return new d(void 0!==t?(0,s.bufferToBigInt)((0,s.toBuffer)(t)):void 0,void 0!==r?(0,s.bufferToBigInt)((0,s.toBuffer)(r)):void 0,void 0!==n?(0,s.toBuffer)(n):void 0,void 0!==o?(0,s.toBuffer)(o):void 0)}static fromRlpSerializedAccount(e){const r=(0,s.arrToBufArr)(t.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(r))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(r)}static fromValuesArray(e){const[t,r,n,o]=e;return new d((0,s.bufferToBigInt)(t),(0,s.bufferToBigInt)(r),n,o)}_validate(){if(this.nonce<u)throw new Error("nonce must be greater than zero");if(this.balance<u)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,s.bigIntToUnpaddedBuffer)(this.nonce),(0,s.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return n.d.Buffer.from(t.RLP.encode((0,s.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(a.KECCAK256_NULL)}isEmpty(){return this.balance===u&&this.nonce===u&&this.codeHash.equals(a.KECCAK256_NULL)}}e.Account=d;e.isValidAddress=function(e){try{(0,l.assertIsString)(e)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};e.toChecksumAddress=function(e,t){(0,l.assertIsHexString)(e);const o=(0,c.stripHexPrefix)(e).toLowerCase();let a="";void 0!==t&&(a=(0,s.bufferToBigInt)((0,s.toBuffer)(t)).toString()+"0x");const u=n.d.Buffer.from(a+o,"utf8"),d=(0,i.bytesToHex)((0,r.keccak256)(u));let f="0x";for(let r=0;r<o.length;r++)parseInt(d[r],16)>=8?f+=o[r].toUpperCase():f+=o[r];return f};e.isValidChecksumAddress=function(t,r){return(0,e.isValidAddress)(t)&&(0,e.toChecksumAddress)(t,r)===t};e.generateAddress=function(e,o){return(0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(o),(0,s.bufferToBigInt)(o)===BigInt(0)?n.d.Buffer.from((0,r.keccak256)(t.RLP.encode((0,s.bufArrToArr)([e,null])))).slice(-20):n.d.Buffer.from((0,r.keccak256)(t.RLP.encode((0,s.bufArrToArr)([e,o])))).slice(-20)};e.generateAddress2=function(e,t,o){if((0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(t),(0,l.assertIsBuffer)(o),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==t.length)throw new Error("Expected salt to be of length 32");const i=(0,r.keccak256)(n.d.Buffer.concat([n.d.Buffer.from("ff","hex"),e,t,(0,r.keccak256)(o)]));return(0,s.toBuffer)(i).slice(-20)};e.isValidPrivate=function(e){return o.secp256k1.utils.isValidPrivateKey(e)};e.isValidPublic=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,l.assertIsBuffer)(e),64===e.length)try{return o.secp256k1.ProjectivePoint.fromHex(n.d.Buffer.concat([n.d.Buffer.from([4]),e])),!0}catch{return!1}if(!t)return!1;try{return o.secp256k1.ProjectivePoint.fromHex(e),!0}catch{return!1}};e.pubToAddress=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,l.assertIsBuffer)(e),t&&64!==e.length&&(e=n.d.Buffer.from(o.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return n.d.Buffer.from((0,r.keccak256)(e)).slice(-20)},e.publicToAddress=e.pubToAddress;e.privateToPublic=function(e){return(0,l.assertIsBuffer)(e),n.d.Buffer.from(o.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};e.privateToAddress=function(t){return(0,e.publicToAddress)((0,e.privateToPublic)(t))};e.importPublic=function(e){return(0,l.assertIsBuffer)(e),64!==e.length&&(e=n.d.Buffer.from(o.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};e.zeroAddress=function(){const e=(0,s.zeros)(20);return(0,s.bufferToHex)(e)};function f(e){const[t,r,n,o]=e;return[t,r,0===(0,s.arrToBufArr)(n).length?a.KECCAK256_RLP:n,0===(0,s.arrToBufArr)(o).length?a.KECCAK256_NULL:o]}e.isZeroAddress=function(t){try{(0,l.assertIsString)(t)}catch{return!1}return(0,e.zeroAddress)()===t},e.accountBodyFromSlim=f;const h=new Uint8Array(0);e.accountBodyToSlim=function(e){const[t,r,n,o]=e;return[t,r,(0,s.arrToBufArr)(n).equals(a.KECCAK256_RLP)?h:n,(0,s.arrToBufArr)(o).equals(a.KECCAK256_NULL)?h:o]},e.accountBodyToRLP=function(e){const r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?f(e):e;return(0,s.arrToBufArr)(t.RLP.encode(r))}}(Od);var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.Address=void 0;const Yf=Od,Qf=qf;class eh{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new eh((0,Qf.zeros)(20))}static fromString(e){if(!(0,Yf.isValidAddress)(e))throw new Error("Invalid address");return new eh((0,Qf.toBuffer)(e))}static fromPublicKey(e){if(!n.d.Buffer.isBuffer(e))throw new Error("Public key should be Buffer");const t=(0,Yf.pubToAddress)(e);return new eh(t)}static fromPrivateKey(e){if(!n.d.Buffer.isBuffer(e))throw new Error("Private key should be Buffer");const t=(0,Yf.privateToAddress)(e);return new eh(t)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new eh((0,Yf.generateAddress)(e.buf,(0,Qf.bigIntToBuffer)(t)))}static generate2(e,t,r){if(!n.d.Buffer.isBuffer(t))throw new Error("Expected salt to be a Buffer");if(!n.d.Buffer.isBuffer(r))throw new Error("Expected initCode to be a Buffer");return new eh((0,Yf.generateAddress2)(e.buf,t,r))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(eh.zero())}isPrecompileOrSystemAddress(){const e=(0,Qf.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return n.d.Buffer.from(this.buf)}}Xf.Address=eh;var th={},rh={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=void 0;const t=qf,r=Zf;var n,o;(o=n=e.TypeOutput||(e.TypeOutput={}))[o.Number=0]="Number",o[o.BigInt=1]="BigInt",o[o.Buffer=2]="Buffer",o[o.PrefixedHexString=3]="PrefixedHexString",e.toType=function(e,o){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!(0,r.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const i=(0,t.toBuffer)(e);switch(o){case n.Buffer:return i;case n.BigInt:return(0,t.bufferToBigInt)(i);case n.Number:{const e=(0,t.bufferToBigInt)(i);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case n.PrefixedHexString:return(0,t.bufferToHex)(i);default:throw new Error("unknown outputType")}}}(rh),Object.defineProperty(th,"__esModule",{value:!0}),th.Withdrawal=void 0;const nh=Xf,oh=qf,ih=rh;class sh{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:n,amount:o}=e,i=(0,ih.toType)(t,ih.TypeOutput.BigInt),s=(0,ih.toType)(r,ih.TypeOutput.BigInt),a=new nh.Address((0,ih.toType)(n,ih.TypeOutput.Buffer)),l=(0,ih.toType)(o,ih.TypeOutput.BigInt);return new sh(i,s,a,l)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,o]=e;return sh.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:o})}static toBufferArray(e){const{index:t,validatorIndex:r,address:o,amount:i}=e,s=(0,ih.toType)(t,ih.TypeOutput.BigInt)===BigInt(0)?n.d.Buffer.alloc(0):(0,ih.toType)(t,ih.TypeOutput.Buffer),a=(0,ih.toType)(r,ih.TypeOutput.BigInt)===BigInt(0)?n.d.Buffer.alloc(0):(0,ih.toType)(r,ih.TypeOutput.Buffer);let l;l=o instanceof nh.Address?o.buf:(0,ih.toType)(o,ih.TypeOutput.Buffer);return[s,a,l,(0,ih.toType)(i,ih.TypeOutput.BigInt)===BigInt(0)?n.d.Buffer.alloc(0):(0,ih.toType)(i,ih.TypeOutput.Buffer)]}raw(){return sh.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,oh.bigIntToHex)(this.index),validatorIndex:(0,oh.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,oh.bigIntToHex)(this.amount)}}}th.Withdrawal=sh;var ah={};Object.defineProperty(ah,"__esModule",{value:!0}),ah.hashPersonalMessage=ah.isValidSignature=ah.fromRpcSig=ah.toCompactSig=ah.toRpcSig=ah.ecrecover=ah.ecsign=void 0;const lh=Vd,ch=Xc,uh=qf,dh=Kc,fh=Vf;function hh(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function ph(e){return e===BigInt(0)||e===BigInt(1)}ah.ecsign=function(e,t,r){const o=ch.secp256k1.sign(e,t),i=o.toCompactRawBytes();return{r:n.d.Buffer.from(i.slice(0,32)),s:n.d.Buffer.from(i.slice(32,64)),v:void 0===r?BigInt(o.recovery+27):BigInt(o.recovery+35)+BigInt(r)*BigInt(2)}};ah.ecrecover=function(e,t,r,o,i){const s=n.d.Buffer.concat([(0,uh.setLengthLeft)(r,32),(0,uh.setLengthLeft)(o,32)],64),a=hh(t,i);if(!ph(a))throw new Error("Invalid signature v value");const l=ch.secp256k1.Signature.fromCompact(s).addRecoveryBit(Number(a)).recoverPublicKey(e);return n.d.Buffer.from(l.toRawBytes(!1).slice(1))};ah.toRpcSig=function(e,t,r,o){if(!ph(hh(e,o)))throw new Error("Invalid signature v value");return(0,uh.bufferToHex)(n.d.Buffer.concat([(0,uh.setLengthLeft)(t,32),(0,uh.setLengthLeft)(r,32),(0,uh.toBuffer)(e)]))};ah.toCompactSig=function(e,t,r,o){if(!ph(hh(e,o)))throw new Error("Invalid signature v value");let i=r;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(i=n.d.Buffer.from(r),i[0]|=128),(0,uh.bufferToHex)(n.d.Buffer.concat([(0,uh.setLengthLeft)(t,32),(0,uh.setLengthLeft)(i,32)]))};ah.fromRpcSig=function(e){const t=(0,uh.toBuffer)(e);let r,n,o;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),o=(0,uh.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),o=BigInt((0,uh.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return o<27&&(o+=BigInt(27)),{v:o,r:r,s:n}};ah.isValidSignature=function(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4?arguments[4]:void 0;if(32!==t.length||32!==r.length||!ph(hh(e,o)))return!1;const i=(0,uh.bufferToBigInt)(t),s=(0,uh.bufferToBigInt)(r);return!(i===BigInt(0)||i>=dh.SECP256K1_ORDER||s===BigInt(0)||s>=dh.SECP256K1_ORDER||n&&s>=dh.SECP256K1_ORDER_DIV_2)};ah.hashPersonalMessage=function(e){(0,fh.assertIsBuffer)(e);const t=n.d.Buffer.from(`\x19Ethereum Signed Message:\n${e.length}`,"utf-8");return n.d.Buffer.from((0,lh.keccak256)(n.d.Buffer.concat([t,e])))};var gh={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compactBytesToNibbles=e.bytesToNibbles=e.nibblesToCompactBytes=e.nibblesToBytes=e.hasTerminator=void 0;e.hasTerminator=e=>e.length>0&&16===e[e.length-1];e.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};e.nibblesToCompactBytes=t=>{let r=0;(0,e.hasTerminator)(t)&&(r=1,t=t.subarray(0,t.length-1));const n=new Uint8Array(t.length/2+1);return n[0]=r<<5,1===(1&t.length)&&(n[0]|=16,n[0]|=t[0],t=t.subarray(1)),(0,e.nibblesToBytes)(t,n.subarray(1)),n};e.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let n=0;n<e.length;n++){const t=e[n];r[2*n]=t/16,r[2*n+1]=t%16}return r[t-1]=16,r};e.compactBytesToNibbles=t=>{if(0===t.length)return t;let r=(0,e.bytesToNibbles)(t);r[0]<2&&(r=r.subarray(0,r.length-1));const n=2-(1&r[0]);return r.subarray(n)}}(gh);var bh={};Object.defineProperty(bh,"__esModule",{value:!0}),bh.AsyncEventEmitter=void 0;const mh=n.y;class yh extends mh.EventEmitter{emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let[o,i]=r;const s=this;let a=s._events[e]??[];return void 0===i&&"function"==typeof o&&(i=o,o=void 0),("newListener"===e||"removeListener"===e)&&(o={event:o,fn:i},i=void 0),a=Array.isArray(a)?a:[a],async function(e,t,r){let n;for await(const o of t)try{o.length<2?o.call(e,r):await new Promise(((t,n)=>{o.call(e,r,(e=>{e?n(e):t()}))}))}catch(s){n=s}if(n)throw n}(s,a.slice(),o).then(i).catch(i),s.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(o,i){r.removeListener(e,n),t(o,i)}:function(o){r.removeListener(e,n),t(o,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let o,i,s=this._events[e]??[];const a="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(s)||(this._events[e]=s=[s]),i=s.length,o=s.length;o--;)if(s[o]===t){i=o+a;break}return s.splice(i,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}bh.AsyncEventEmitter=yh;var wh={};Object.defineProperty(wh,"__esModule",{value:!0}),wh.Lock=void 0;wh.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}};var _h,vh,Eh={},Sh={},Rh={},Ah={};var Ih,Th={},xh={};function Oh(){return Ih||(Ih=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var o in n)r(n,o)&&(e[o]=n[o])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),o);else for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){var t,r,n,o,i,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),o=0,t=0,r=e.length;t<r;t++)i=e[t],s.set(i,o),o+=i.length;return s}},o={arraySet:function(e,t,r,n,o){for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(t)}(xh)),xh}var kh,Lh,Ph,Bh,Ch,Nh,jh,$h,Mh={};function Fh(){if(kh)return Mh;kh=1;var e=Oh(),t=0,r=1;function n(e){for(var t=e.length;--t>=0;)e[t]=0}var o=0,i=29,s=256,a=s+1+i,l=30,c=19,u=2*a+1,d=15,f=16,h=7,p=256,g=16,b=17,m=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(a+2));n(E);var S=new Array(2*l);n(S);var R=new Array(512);n(R);var A=new Array(256);n(A);var I=new Array(i);n(I);var T,x,O,k=new Array(l);function L(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function P(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function B(e){return e<256?R[e]:R[256+(e>>>7)]}function C(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function N(e,t,r){e.bi_valid>f-r?(e.bi_buf|=t<<e.bi_valid&65535,C(e,e.bi_buf),e.bi_buf=t>>f-e.bi_valid,e.bi_valid+=r-f):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function j(e,t,r){N(e,r[2*t],r[2*t+1])}function $(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function M(e,t,r){var n,o,i=new Array(d+1),s=0;for(n=1;n<=d;n++)i[n]=s=s+r[n-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=$(i[a]++,a))}}function F(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<c;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*p]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function D(e){e.bi_valid>8?C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function U(e,t,r,n){var o=2*t,i=2*r;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]}function z(e,t,r){for(var n=e.heap[r],o=r<<1;o<=e.heap_len&&(o<e.heap_len&&U(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!U(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n}function H(e,t,r){var n,o,i,a,l=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],o=e.pending_buf[e.l_buf+l],l++,0===n?j(e,o,t):(j(e,(i=A[o])+s+1,t),0!==(a=y[i])&&N(e,o-=I[i],a),j(e,i=B(--n),r),0!==(a=w[i])&&N(e,n-=k[i],a))}while(l<e.last_lit);j(e,p,t)}function W(e,t){var r,n,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=u,r=0;r<l;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)z(e,i,r);o=l;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],z(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*o]=i[2*r]+i[2*n],e.depth[o]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=o,e.heap[1]=o++,z(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,o,i,s,a,l=t.dyn_tree,c=t.max_code,f=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,b=t.stat_desc.max_length,m=0;for(i=0;i<=d;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<u;r++)(i=l[2*l[2*(n=e.heap[r])+1]+1]+1)>b&&(i=b,m++),l[2*n+1]=i,!(n>c)&&(e.bl_count[i]++,s=0,n>=g&&(s=p[n-g]),a=l[2*n],e.opt_len+=a*(i+s),h&&(e.static_len+=a*(f[2*n+1]+s)));if(0!==m){do{for(i=b-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[b]--,m-=2}while(m>0);for(i=b;0!==i;i--)for(n=e.bl_count[i];0!==n;)!((o=e.heap[--r])>c)&&(l[2*o+1]!==i&&(e.opt_len+=(i-l[2*o+1])*l[2*o],l[2*o+1]=i),n--)}}(e,t),M(i,c,e.bl_count)}function q(e,t,r){var n,o,i=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=s,s=t[2*(n+1)+1],!(++a<l&&o===s)&&(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*g]++):a<=10?e.bl_tree[2*b]++:e.bl_tree[2*m]++,a=0,i=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))}function V(e,t,r){var n,o,i=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=r;n++)if(o=s,s=t[2*(n+1)+1],!(++a<l&&o===s)){if(a<c)do{j(e,o,e.bl_tree)}while(0!==--a);else 0!==o?(o!==i&&(j(e,o,e.bl_tree),a--),j(e,g,e.bl_tree),N(e,a-3,2)):a<=10?(j(e,b,e.bl_tree),N(e,a-3,3)):(j(e,m,e.bl_tree),N(e,a-11,7));a=0,i=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}}n(k);var Z=!1;function G(t,r,n,i){N(t,(o<<1)+(i?1:0),3),function(t,r,n){D(t),C(t,n),C(t,~n),e.arraySet(t.pending_buf,t.window,r,n,t.pending),t.pending+=n}(t,r,n)}return Mh._tr_init=function(e){Z||(function(){var e,t,r,n,o,u=new Array(d+1);for(r=0,n=0;n<i-1;n++)for(I[n]=r,e=0;e<1<<y[n];e++)A[r++]=n;for(A[r-1]=n,o=0,n=0;n<16;n++)for(k[n]=o,e=0;e<1<<w[n];e++)R[o++]=n;for(o>>=7;n<l;n++)for(k[n]=o<<7,e=0;e<1<<w[n]-7;e++)R[256+o++]=n;for(t=0;t<=d;t++)u[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,u[8]++;for(;e<=255;)E[2*e+1]=9,e++,u[9]++;for(;e<=279;)E[2*e+1]=7,e++,u[7]++;for(;e<=287;)E[2*e+1]=8,e++,u[8]++;for(M(E,a+1,u),e=0;e<l;e++)S[2*e+1]=5,S[2*e]=$(e,5);T=new L(E,y,s+1,a,d),x=new L(S,w,0,l,d),O=new L(new Array(0),_,0,c,h)}(),Z=!0),e.l_desc=new P(e.dyn_ltree,T),e.d_desc=new P(e.dyn_dtree,x),e.bl_desc=new P(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,F(e)},Mh._tr_stored_block=G,Mh._tr_flush_block=function(e,n,o,i){var a,l,u=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,o=4093624447;for(n=0;n<=31;n++,o>>>=1)if(1&o&&0!==e.dyn_ltree[2*n])return t;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return r;for(n=32;n<s;n++)if(0!==e.dyn_ltree[2*n])return r;return t}(e)),W(e,e.l_desc),W(e,e.d_desc),u=function(e){var t;for(q(e,e.dyn_ltree,e.l_desc.max_code),q(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=c-1;t>=3&&0===e.bl_tree[2*v[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(l=e.static_len+3+7>>>3)<=a&&(a=l)):a=l=o+5,o+4<=a&&-1!==n?G(e,n,o,i):4===e.strategy||l===a?(N(e,2+(i?1:0),3),H(e,E,S)):(N(e,4+(i?1:0),3),function(e,t,r,n){var o;for(N(e,t-257,5),N(e,r-1,5),N(e,n-4,4),o=0;o<n;o++)N(e,e.bl_tree[2*v[o]+1],3);V(e,e.dyn_ltree,t-1),V(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),H(e,e.dyn_ltree,e.dyn_dtree)),F(e),i&&D(e)},Mh._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(A[r]+s+1)]++,e.dyn_dtree[2*B(t)]++),e.last_lit===e.lit_bufsize-1},Mh._tr_align=function(e){N(e,2,3),j(e,p,E),function(e){16===e.bi_valid?(C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)},Mh}function Dh(){if(Ph)return Lh;return Ph=1,Lh=function(e,t,r,n){for(var o=65535&e,i=e>>>16&65535,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{i=i+(o=o+t[n++]|0)|0}while(--s);o%=65521,i%=65521}return o|i<<16}}function Uh(){if(Ch)return Bh;Ch=1;var e=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();return Bh=function(t,r,n,o){var i=e,s=o+n;t^=-1;for(var a=o;a<s;a++)t=t>>>8^i[255&(t^r[a])];return~t}}function zh(){if($h)return Th;$h=1;var e,t=Oh(),r=Fh(),n=Dh(),o=Uh(),i=(jh||(jh=1,Nh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Nh),s=0,a=4,l=0,c=-2,u=-1,d=4,f=2,h=8,p=9,g=286,b=30,m=19,y=2*g+1,w=15,_=3,v=258,E=v+_+1,S=42,R=103,A=113,I=666,T=1,x=2,O=3,k=4;function L(e,t){return e.msg=i[t],t}function P(e){return(e<<1)-(e>4?9:0)}function B(e){for(var t=e.length;--t>=0;)e[t]=0}function C(e){var r=e.state,n=r.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(t.arraySet(e.output,r.pending_buf,r.pending_out,n,e.next_out),e.next_out+=n,r.pending_out+=n,e.total_out+=n,e.avail_out-=n,r.pending-=n,0===r.pending&&(r.pending_out=0))}function N(e,t){r._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,C(e.strm)}function j(e,t){e.pending_buf[e.pending++]=t}function $(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function M(e,r,i,s){var a=e.avail_in;return a>s&&(a=s),0===a?0:(e.avail_in-=a,t.arraySet(r,e.input,e.next_in,a,i),1===e.state.wrap?e.adler=n(e.adler,r,a,i):2===e.state.wrap&&(e.adler=o(e.adler,r,a,i)),e.next_in+=a,e.total_in+=a,a)}function F(e,t){var r,n,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-E?e.strstart-(e.w_size-E):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+v,h=c[i+s-1],p=c[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(r=t)+s]===p&&c[r+s-1]===h&&c[r]===c[i]&&c[++r]===c[i+1]){i+=2,r++;do{}while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(n=v-(f-i),i=f-v,n>s){if(e.match_start=t,s=n,n>=a)break;h=c[i+s-1],p=c[i+s]}}}while((t=d[t&u])>l&&0!==--o);return s<=e.lookahead?s:e.lookahead}function D(e){var r,n,o,i,s,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-E)){t.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,r=n=e.hash_size;do{o=e.head[--r],e.head[r]=o>=a?o-a:0}while(--n);r=n=a;do{o=e.prev[--r],e.prev[r]=o>=a?o-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=M(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=_)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+_-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<_)););}while(e.lookahead<E&&0!==e.strm.avail_in)}function U(e,t){for(var n,o;;){if(e.lookahead<E){if(D(e),e.lookahead<E&&t===s)return T;if(0===e.lookahead)break}if(n=0,e.lookahead>=_&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-E&&(e.match_length=F(e,n)),e.match_length>=_)if(o=r._tr_tally(e,e.strstart-e.match_start,e.match_length-_),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=_){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else o=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(N(e,!1),0===e.strm.avail_out))return T}return e.insert=e.strstart<_-1?e.strstart:_-1,t===a?(N(e,!0),0===e.strm.avail_out?O:k):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?T:x}function z(e,t){for(var n,o,i;;){if(e.lookahead<E){if(D(e),e.lookahead<E&&t===s)return T;if(0===e.lookahead)break}if(n=0,e.lookahead>=_&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=_-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-E&&(e.match_length=F(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===_&&e.strstart-e.match_start>4096)&&(e.match_length=_-1)),e.prev_length>=_&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-_,o=r._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-_),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=_-1,e.strstart++,o&&(N(e,!1),0===e.strm.avail_out))return T}else if(e.match_available){if((o=r._tr_tally(e,0,e.window[e.strstart-1]))&&N(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return T}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=r._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<_-1?e.strstart:_-1,t===a?(N(e,!0),0===e.strm.avail_out?O:k):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?T:x}function H(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=h,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(2*y),this.dyn_dtree=new t.Buf16(2*(2*b+1)),this.bl_tree=new t.Buf16(2*(2*m+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(w+1),this.heap=new t.Buf16(2*g+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*g+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=f,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S:A,e.adler=2===t.wrap?0:1,t.last_flush=s,r._tr_init(t),l):L(e,c)}function V(t){var r=q(t);return r===l&&function(t){t.window_size=2*t.w_size,B(t.head),t.max_lazy_match=e[t.level].max_lazy,t.good_match=e[t.level].good_length,t.nice_match=e[t.level].nice_length,t.max_chain_length=e[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=_-1,t.match_available=0,t.ins_h=0}(t.state),r}function Z(e,r,n,o,i,s){if(!e)return c;var a=1;if(r===u&&(r=6),o<0?(a=0,o=-o):o>15&&(a=2,o-=16),i<1||i>p||n!==h||o<8||o>15||r<0||r>9||s<0||s>d)return L(e,c);8===o&&(o=9);var l=new W;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+_-1)/_),l.window=new t.Buf8(2*l.w_size),l.head=new t.Buf16(l.hash_size),l.prev=new t.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new t.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=r,l.strategy=s,l.method=n,V(e)}return e=[new H(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(D(e),0===e.lookahead&&t===s)return T;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,N(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-E&&(N(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===a?(N(e,!0),0===e.strm.avail_out?O:k):(e.strstart>e.block_start&&(N(e,!1),e.strm.avail_out),T)})),new H(4,4,8,4,U),new H(4,5,16,8,U),new H(4,6,32,32,U),new H(4,4,16,16,z),new H(8,16,32,32,z),new H(8,16,128,128,z),new H(8,32,128,256,z),new H(32,128,258,1024,z),new H(32,258,258,4096,z)],Th.deflateInit=function(e,t){return Z(e,t,h,15,8,0)},Th.deflateInit2=Z,Th.deflateReset=V,Th.deflateResetKeep=q,Th.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,l):c},Th.deflate=function(t,n){var i,u,d,f;if(!t||!t.state||n>5||n<0)return t?L(t,c):c;if(u=t.state,!t.output||!t.input&&0!==t.avail_in||u.status===I&&n!==a)return L(t,0===t.avail_out?-5:c);if(u.strm=t,i=u.last_flush,u.last_flush=n,u.status===S)if(2===u.wrap)t.adler=0,j(u,31),j(u,139),j(u,8),u.gzhead?(j(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),j(u,255&u.gzhead.time),j(u,u.gzhead.time>>8&255),j(u,u.gzhead.time>>16&255),j(u,u.gzhead.time>>24&255),j(u,9===u.level?2:u.strategy>=2||u.level<2?4:0),j(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(j(u,255&u.gzhead.extra.length),j(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(t.adler=o(t.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69):(j(u,0),j(u,0),j(u,0),j(u,0),j(u,0),j(u,9===u.level?2:u.strategy>=2||u.level<2?4:0),j(u,3),u.status=A);else{var p=h+(u.w_bits-8<<4)<<8;p|=(u.strategy>=2||u.level<2?0:u.level<6?1:6===u.level?2:3)<<6,0!==u.strstart&&(p|=32),p+=31-p%31,u.status=A,$(u,p),0!==u.strstart&&($(u,t.adler>>>16),$(u,65535&t.adler)),t.adler=1}if(69===u.status)if(u.gzhead.extra){for(d=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>d&&(t.adler=o(t.adler,u.pending_buf,u.pending-d,d)),C(t),d=u.pending,u.pending!==u.pending_buf_size));)j(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>d&&(t.adler=o(t.adler,u.pending_buf,u.pending-d,d)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=73)}else u.status=73;if(73===u.status)if(u.gzhead.name){d=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>d&&(t.adler=o(t.adler,u.pending_buf,u.pending-d,d)),C(t),d=u.pending,u.pending===u.pending_buf_size)){f=1;break}f=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,j(u,f)}while(0!==f);u.gzhead.hcrc&&u.pending>d&&(t.adler=o(t.adler,u.pending_buf,u.pending-d,d)),0===f&&(u.gzindex=0,u.status=91)}else u.status=91;if(91===u.status)if(u.gzhead.comment){d=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>d&&(t.adler=o(t.adler,u.pending_buf,u.pending-d,d)),C(t),d=u.pending,u.pending===u.pending_buf_size)){f=1;break}f=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,j(u,f)}while(0!==f);u.gzhead.hcrc&&u.pending>d&&(t.adler=o(t.adler,u.pending_buf,u.pending-d,d)),0===f&&(u.status=R)}else u.status=R;if(u.status===R&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&C(t),u.pending+2<=u.pending_buf_size&&(j(u,255&t.adler),j(u,t.adler>>8&255),t.adler=0,u.status=A)):u.status=A),0!==u.pending){if(C(t),0===t.avail_out)return u.last_flush=-1,l}else if(0===t.avail_in&&P(n)<=P(i)&&n!==a)return L(t,-5);if(u.status===I&&0!==t.avail_in)return L(t,-5);if(0!==t.avail_in||0!==u.lookahead||n!==s&&u.status!==I){var g=2===u.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(D(e),0===e.lookahead)){if(t===s)return T;break}if(e.match_length=0,n=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(N(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===a?(N(e,!0),0===e.strm.avail_out?O:k):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?T:x}(u,n):3===u.strategy?function(e,t){for(var n,o,i,l,c=e.window;;){if(e.lookahead<=v){if(D(e),e.lookahead<=v&&t===s)return T;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=_&&e.strstart>0&&(o=c[i=e.strstart-1])===c[++i]&&o===c[++i]&&o===c[++i]){l=e.strstart+v;do{}while(o===c[++i]&&o===c[++i]&&o===c[++i]&&o===c[++i]&&o===c[++i]&&o===c[++i]&&o===c[++i]&&o===c[++i]&&i<l);e.match_length=v-(l-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=_?(n=r._tr_tally(e,1,e.match_length-_),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(N(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===a?(N(e,!0),0===e.strm.avail_out?O:k):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?T:x}(u,n):e[u.level].func(u,n);if((g===O||g===k)&&(u.status=I),g===T||g===O)return 0===t.avail_out&&(u.last_flush=-1),l;if(g===x&&(1===n?r._tr_align(u):5!==n&&(r._tr_stored_block(u,0,0,!1),3===n&&(B(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),C(t),0===t.avail_out))return u.last_flush=-1,l}return n!==a?l:u.wrap<=0?1:(2===u.wrap?(j(u,255&t.adler),j(u,t.adler>>8&255),j(u,t.adler>>16&255),j(u,t.adler>>24&255),j(u,255&t.total_in),j(u,t.total_in>>8&255),j(u,t.total_in>>16&255),j(u,t.total_in>>24&255)):($(u,t.adler>>>16),$(u,65535&t.adler)),C(t),u.wrap>0&&(u.wrap=-u.wrap),0!==u.pending?l:1)},Th.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==S&&69!==t&&73!==t&&91!==t&&t!==R&&t!==A&&t!==I?L(e,c):(e.state=null,t===A?L(e,-3):l):c},Th.deflateSetDictionary=function(e,r){var o,i,s,a,u,d,f,h,p=r.length;if(!e||!e.state||(2===(a=(o=e.state).wrap)||1===a&&o.status!==S||o.lookahead))return c;for(1===a&&(e.adler=n(e.adler,r,p,0)),o.wrap=0,p>=o.w_size&&(0===a&&(B(o.head),o.strstart=0,o.block_start=0,o.insert=0),h=new t.Buf8(o.w_size),t.arraySet(h,r,p-o.w_size,o.w_size,0),r=h,p=o.w_size),u=e.avail_in,d=e.next_in,f=e.input,e.avail_in=p,e.next_in=0,e.input=r,D(o);o.lookahead>=_;){i=o.strstart,s=o.lookahead-(_-1);do{o.ins_h=(o.ins_h<<o.hash_shift^o.window[i+_-1])&o.hash_mask,o.prev[i&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=i,i++}while(--s);o.strstart=i,o.lookahead=_-1,D(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=_-1,o.match_available=0,e.next_in=d,e.input=f,e.avail_in=u,o.wrap=a,l},Th.deflateInfo="pako deflate (from Nodeca project)",Th}var Hh,Wh,qh,Vh,Zh,Gh,Jh,Kh,Xh,Yh={};function Qh(){if(Zh)return Yh;Zh=1;var e=Oh(),t=Dh(),r=Uh(),n=Wh?Hh:(Wh=1,Hh=function(e,t){var r,n,o,i,s,a,l,c,u,d,f,h,p,g,b,m,y,w,_,v,E,S,R,A,I;r=e.state,n=e.next_in,A=e.input,o=n+(e.avail_in-5),i=e.next_out,I=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),l=r.dmax,c=r.wsize,u=r.whave,d=r.wnext,f=r.window,h=r.hold,p=r.bits,g=r.lencode,b=r.distcode,m=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(h+=A[n++]<<p,p+=8,h+=A[n++]<<p,p+=8),w=g[h&m];t:for(;;){if(h>>>=_=w>>>24,p-=_,0===(_=w>>>16&255))I[i++]=65535&w;else{if(!(16&_)){if(64&_){if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=g[(65535&w)+(h&(1<<_)-1)];continue t}for(v=65535&w,(_&=15)&&(p<_&&(h+=A[n++]<<p,p+=8),v+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=A[n++]<<p,p+=8,h+=A[n++]<<p,p+=8),w=b[h&y];;){if(h>>>=_=w>>>24,p-=_,16&(_=w>>>16&255)){if(E=65535&w,p<(_&=15)&&(h+=A[n++]<<p,(p+=8)<_&&(h+=A[n++]<<p,p+=8)),(E+=h&(1<<_)-1)>l){e.msg="invalid distance too far back",r.mode=30;break e}if(h>>>=_,p-=_,E>(_=i-s)){if((_=E-_)>u&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=0,R=f,0===d){if(S+=c-_,_<v){v-=_;do{I[i++]=f[S++]}while(--_);S=i-E,R=I}}else if(d<_){if(S+=c+d-_,(_-=d)<v){v-=_;do{I[i++]=f[S++]}while(--_);if(S=0,d<v){v-=_=d;do{I[i++]=f[S++]}while(--_);S=i-E,R=I}}}else if(S+=d-_,_<v){v-=_;do{I[i++]=f[S++]}while(--_);S=i-E,R=I}for(;v>2;)I[i++]=R[S++],I[i++]=R[S++],I[i++]=R[S++],v-=3;v&&(I[i++]=R[S++],v>1&&(I[i++]=R[S++]))}else{S=i-E;do{I[i++]=I[S++],I[i++]=I[S++],I[i++]=I[S++],v-=3}while(v>2);v&&(I[i++]=I[S++],v>1&&(I[i++]=I[S++]))}break}if(64&_){e.msg="invalid distance code",r.mode=30;break e}w=b[(65535&w)+(h&(1<<_)-1)]}}break}}while(n<o&&i<a);n-=v=p>>3,h&=(1<<(p-=v<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=i<a?a-i+257:257-(i-a),r.hold=h,r.bits=p}),o=function(){if(Vh)return qh;Vh=1;var e=Oh(),t=15,r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],i=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return qh=function(s,a,l,c,u,d,f,h){var p,g,b,m,y,w,_,v,E,S=h.bits,R=0,A=0,I=0,T=0,x=0,O=0,k=0,L=0,P=0,B=0,C=null,N=0,j=new e.Buf16(16),$=new e.Buf16(16),M=null,F=0;for(R=0;R<=t;R++)j[R]=0;for(A=0;A<c;A++)j[a[l+A]]++;for(x=S,T=t;T>=1&&0===j[T];T--);if(x>T&&(x=T),0===T)return u[d++]=20971520,u[d++]=20971520,h.bits=1,0;for(I=1;I<T&&0===j[I];I++);for(x<I&&(x=I),L=1,R=1;R<=t;R++)if(L<<=1,(L-=j[R])<0)return-1;if(L>0&&(0===s||1!==T))return-1;for($[1]=0,R=1;R<t;R++)$[R+1]=$[R]+j[R];for(A=0;A<c;A++)0!==a[l+A]&&(f[$[a[l+A]]++]=A);if(0===s?(C=M=f,w=19):1===s?(C=r,N-=257,M=n,F-=257,w=256):(C=o,M=i,w=-1),B=0,A=0,R=I,y=d,O=x,k=0,b=-1,m=(P=1<<x)-1,1===s&&P>852||2===s&&P>592)return 1;for(;;){_=R-k,f[A]<w?(v=0,E=f[A]):f[A]>w?(v=M[F+f[A]],E=C[N+f[A]]):(v=96,E=0),p=1<<R-k,I=g=1<<O;do{u[y+(B>>k)+(g-=p)]=_<<24|v<<16|E}while(0!==g);for(p=1<<R-1;B&p;)p>>=1;if(0!==p?(B&=p-1,B+=p):B=0,A++,0===--j[R]){if(R===T)break;R=a[l+f[A]]}if(R>x&&(B&m)!==b){for(0===k&&(k=x),y+=I,L=1<<(O=R-k);O+k<T&&!((L-=j[O+k])<=0);)O++,L<<=1;if(P+=1<<O,1===s&&P>852||2===s&&P>592)return 1;u[b=B&m]=x<<24|O<<16|y-d}}return 0!==B&&(u[y+B]=R-k<<24|64<<16),h.bits=x,0}}(),i=1,s=2,a=0,l=-2,c=1,u=12,d=30,f=852,h=592;function p(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(t){var r;return t&&t.state?(r=t.state,t.total_in=t.total_out=r.total=0,t.msg="",r.wrap&&(t.adler=1&r.wrap),r.mode=c,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new e.Buf32(f),r.distcode=r.distdyn=new e.Buf32(h),r.sane=1,r.back=-1,a):l}function m(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,b(e)):l}function y(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15))?l:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,m(e))}function w(e,t){var r,n;return e?(n=new g,e.state=n,n.window=null,(r=y(e,t))!==a&&(e.state=null),r):l}var _,v,E=!0;function S(t){if(E){var r;for(_=new e.Buf32(512),v=new e.Buf32(32),r=0;r<144;)t.lens[r++]=8;for(;r<256;)t.lens[r++]=9;for(;r<280;)t.lens[r++]=7;for(;r<288;)t.lens[r++]=8;for(o(i,t.lens,0,288,_,0,t.work,{bits:9}),r=0;r<32;)t.lens[r++]=5;o(s,t.lens,0,32,v,0,t.work,{bits:5}),E=!1}t.lencode=_,t.lenbits=9,t.distcode=v,t.distbits=5}function R(t,r,n,o){var i,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new e.Buf8(s.wsize)),o>=s.wsize?(e.arraySet(s.window,r,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>o&&(i=o),e.arraySet(s.window,r,n-o,i,s.wnext),(o-=i)?(e.arraySet(s.window,r,n-o,o,0),s.wnext=o,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}return Yh.inflateReset=m,Yh.inflateReset2=y,Yh.inflateResetKeep=b,Yh.inflateInit=function(e){return w(e,15)},Yh.inflateInit2=w,Yh.inflate=function(f,h){var g,b,m,y,w,_,v,E,A,I,T,x,O,k,L,P,B,C,N,j,$,M,F,D,U=0,z=new e.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!f||!f.state||!f.output||!f.input&&0!==f.avail_in)return l;(g=f.state).mode===u&&(g.mode=13),w=f.next_out,m=f.output,v=f.avail_out,y=f.next_in,b=f.input,_=f.avail_in,E=g.hold,A=g.bits,I=_,T=v,M=a;e:for(;;)switch(g.mode){case c:if(0===g.wrap){g.mode=13;break}for(;A<16;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(2&g.wrap&&35615===E){g.check=0,z[0]=255&E,z[1]=E>>>8&255,g.check=r(g.check,z,2,0),E=0,A=0,g.mode=2;break}if(g.flags=0,g.head&&(g.head.done=!1),!(1&g.wrap)||(((255&E)<<8)+(E>>8))%31){f.msg="incorrect header check",g.mode=d;break}if(8!==(15&E)){f.msg="unknown compression method",g.mode=d;break}if(A-=4,$=8+(15&(E>>>=4)),0===g.wbits)g.wbits=$;else if($>g.wbits){f.msg="invalid window size",g.mode=d;break}g.dmax=1<<$,f.adler=g.check=1,g.mode=512&E?10:u,E=0,A=0;break;case 2:for(;A<16;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(g.flags=E,8!==(255&g.flags)){f.msg="unknown compression method",g.mode=d;break}if(57344&g.flags){f.msg="unknown header flags set",g.mode=d;break}g.head&&(g.head.text=E>>8&1),512&g.flags&&(z[0]=255&E,z[1]=E>>>8&255,g.check=r(g.check,z,2,0)),E=0,A=0,g.mode=3;case 3:for(;A<32;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}g.head&&(g.head.time=E),512&g.flags&&(z[0]=255&E,z[1]=E>>>8&255,z[2]=E>>>16&255,z[3]=E>>>24&255,g.check=r(g.check,z,4,0)),E=0,A=0,g.mode=4;case 4:for(;A<16;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}g.head&&(g.head.xflags=255&E,g.head.os=E>>8),512&g.flags&&(z[0]=255&E,z[1]=E>>>8&255,g.check=r(g.check,z,2,0)),E=0,A=0,g.mode=5;case 5:if(1024&g.flags){for(;A<16;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}g.length=E,g.head&&(g.head.extra_len=E),512&g.flags&&(z[0]=255&E,z[1]=E>>>8&255,g.check=r(g.check,z,2,0)),E=0,A=0}else g.head&&(g.head.extra=null);g.mode=6;case 6:if(1024&g.flags&&((x=g.length)>_&&(x=_),x&&(g.head&&($=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Array(g.head.extra_len)),e.arraySet(g.head.extra,b,y,x,$)),512&g.flags&&(g.check=r(g.check,b,x,y)),_-=x,y+=x,g.length-=x),g.length))break e;g.length=0,g.mode=7;case 7:if(2048&g.flags){if(0===_)break e;x=0;do{$=b[y+x++],g.head&&$&&g.length<65536&&(g.head.name+=String.fromCharCode($))}while($&&x<_);if(512&g.flags&&(g.check=r(g.check,b,x,y)),_-=x,y+=x,$)break e}else g.head&&(g.head.name=null);g.length=0,g.mode=8;case 8:if(4096&g.flags){if(0===_)break e;x=0;do{$=b[y+x++],g.head&&$&&g.length<65536&&(g.head.comment+=String.fromCharCode($))}while($&&x<_);if(512&g.flags&&(g.check=r(g.check,b,x,y)),_-=x,y+=x,$)break e}else g.head&&(g.head.comment=null);g.mode=9;case 9:if(512&g.flags){for(;A<16;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(E!==(65535&g.check)){f.msg="header crc mismatch",g.mode=d;break}E=0,A=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),f.adler=g.check=0,g.mode=u;break;case 10:for(;A<32;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}f.adler=g.check=p(E),E=0,A=0,g.mode=11;case 11:if(0===g.havedict)return f.next_out=w,f.avail_out=v,f.next_in=y,f.avail_in=_,g.hold=E,g.bits=A,2;f.adler=g.check=1,g.mode=u;case u:if(5===h||6===h)break e;case 13:if(g.last){E>>>=7&A,A-=7&A,g.mode=27;break}for(;A<3;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}switch(g.last=1&E,A-=1,3&(E>>>=1)){case 0:g.mode=14;break;case 1:if(S(g),g.mode=20,6===h){E>>>=2,A-=2;break e}break;case 2:g.mode=17;break;case 3:f.msg="invalid block type",g.mode=d}E>>>=2,A-=2;break;case 14:for(E>>>=7&A,A-=7&A;A<32;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if((65535&E)!==(E>>>16^65535)){f.msg="invalid stored block lengths",g.mode=d;break}if(g.length=65535&E,E=0,A=0,g.mode=15,6===h)break e;case 15:g.mode=16;case 16:if(x=g.length){if(x>_&&(x=_),x>v&&(x=v),0===x)break e;e.arraySet(m,b,y,x,w),_-=x,y+=x,v-=x,w+=x,g.length-=x;break}g.mode=u;break;case 17:for(;A<14;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(g.nlen=257+(31&E),E>>>=5,A-=5,g.ndist=1+(31&E),E>>>=5,A-=5,g.ncode=4+(15&E),E>>>=4,A-=4,g.nlen>286||g.ndist>30){f.msg="too many length or distance symbols",g.mode=d;break}g.have=0,g.mode=18;case 18:for(;g.have<g.ncode;){for(;A<3;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}g.lens[H[g.have++]]=7&E,E>>>=3,A-=3}for(;g.have<19;)g.lens[H[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,F={bits:g.lenbits},M=o(0,g.lens,0,19,g.lencode,0,g.work,F),g.lenbits=F.bits,M){f.msg="invalid code lengths set",g.mode=d;break}g.have=0,g.mode=19;case 19:for(;g.have<g.nlen+g.ndist;){for(;P=(U=g.lencode[E&(1<<g.lenbits)-1])>>>16&255,B=65535&U,!((L=U>>>24)<=A);){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(B<16)E>>>=L,A-=L,g.lens[g.have++]=B;else{if(16===B){for(D=L+2;A<D;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(E>>>=L,A-=L,0===g.have){f.msg="invalid bit length repeat",g.mode=d;break}$=g.lens[g.have-1],x=3+(3&E),E>>>=2,A-=2}else if(17===B){for(D=L+3;A<D;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}A-=L,$=0,x=3+(7&(E>>>=L)),E>>>=3,A-=3}else{for(D=L+7;A<D;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}A-=L,$=0,x=11+(127&(E>>>=L)),E>>>=7,A-=7}if(g.have+x>g.nlen+g.ndist){f.msg="invalid bit length repeat",g.mode=d;break}for(;x--;)g.lens[g.have++]=$}}if(g.mode===d)break;if(0===g.lens[256]){f.msg="invalid code -- missing end-of-block",g.mode=d;break}if(g.lenbits=9,F={bits:g.lenbits},M=o(i,g.lens,0,g.nlen,g.lencode,0,g.work,F),g.lenbits=F.bits,M){f.msg="invalid literal/lengths set",g.mode=d;break}if(g.distbits=6,g.distcode=g.distdyn,F={bits:g.distbits},M=o(s,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,F),g.distbits=F.bits,M){f.msg="invalid distances set",g.mode=d;break}if(g.mode=20,6===h)break e;case 20:g.mode=21;case 21:if(_>=6&&v>=258){f.next_out=w,f.avail_out=v,f.next_in=y,f.avail_in=_,g.hold=E,g.bits=A,n(f,T),w=f.next_out,m=f.output,v=f.avail_out,y=f.next_in,b=f.input,_=f.avail_in,E=g.hold,A=g.bits,g.mode===u&&(g.back=-1);break}for(g.back=0;P=(U=g.lencode[E&(1<<g.lenbits)-1])>>>16&255,B=65535&U,!((L=U>>>24)<=A);){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(P&&!(240&P)){for(C=L,N=P,j=B;P=(U=g.lencode[j+((E&(1<<C+N)-1)>>C)])>>>16&255,B=65535&U,!(C+(L=U>>>24)<=A);){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}E>>>=C,A-=C,g.back+=C}if(E>>>=L,A-=L,g.back+=L,g.length=B,0===P){g.mode=26;break}if(32&P){g.back=-1,g.mode=u;break}if(64&P){f.msg="invalid literal/length code",g.mode=d;break}g.extra=15&P,g.mode=22;case 22:if(g.extra){for(D=g.extra;A<D;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}g.length+=E&(1<<g.extra)-1,E>>>=g.extra,A-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=23;case 23:for(;P=(U=g.distcode[E&(1<<g.distbits)-1])>>>16&255,B=65535&U,!((L=U>>>24)<=A);){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(!(240&P)){for(C=L,N=P,j=B;P=(U=g.distcode[j+((E&(1<<C+N)-1)>>C)])>>>16&255,B=65535&U,!(C+(L=U>>>24)<=A);){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}E>>>=C,A-=C,g.back+=C}if(E>>>=L,A-=L,g.back+=L,64&P){f.msg="invalid distance code",g.mode=d;break}g.offset=B,g.extra=15&P,g.mode=24;case 24:if(g.extra){for(D=g.extra;A<D;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}g.offset+=E&(1<<g.extra)-1,E>>>=g.extra,A-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){f.msg="invalid distance too far back",g.mode=d;break}g.mode=25;case 25:if(0===v)break e;if(x=T-v,g.offset>x){if((x=g.offset-x)>g.whave&&g.sane){f.msg="invalid distance too far back",g.mode=d;break}x>g.wnext?(x-=g.wnext,O=g.wsize-x):O=g.wnext-x,x>g.length&&(x=g.length),k=g.window}else k=m,O=w-g.offset,x=g.length;x>v&&(x=v),v-=x,g.length-=x;do{m[w++]=k[O++]}while(--x);0===g.length&&(g.mode=21);break;case 26:if(0===v)break e;m[w++]=g.length,v--,g.mode=21;break;case 27:if(g.wrap){for(;A<32;){if(0===_)break e;_--,E|=b[y++]<<A,A+=8}if(T-=v,f.total_out+=T,g.total+=T,T&&(f.adler=g.check=g.flags?r(g.check,m,T,w-T):t(g.check,m,T,w-T)),T=v,(g.flags?E:p(E))!==g.check){f.msg="incorrect data check",g.mode=d;break}E=0,A=0}g.mode=28;case 28:if(g.wrap&&g.flags){for(;A<32;){if(0===_)break e;_--,E+=b[y++]<<A,A+=8}if(E!==(4294967295&g.total)){f.msg="incorrect length check",g.mode=d;break}E=0,A=0}g.mode=29;case 29:M=1;break e;case d:M=-3;break e;case 31:return-4;default:return l}return f.next_out=w,f.avail_out=v,f.next_in=y,f.avail_in=_,g.hold=E,g.bits=A,(g.wsize||T!==f.avail_out&&g.mode<d&&(g.mode<27||4!==h))&&R(f,f.output,f.next_out,T-f.avail_out),I-=f.avail_in,T-=f.avail_out,f.total_in+=I,f.total_out+=T,g.total+=T,g.wrap&&T&&(f.adler=g.check=g.flags?r(g.check,m,T,f.next_out-T):t(g.check,m,T,f.next_out-T)),f.data_type=g.bits+(g.last?64:0)+(g.mode===u?128:0)+(20===g.mode||15===g.mode?256:0),(0===I&&0===T||4===h)&&M===a&&(M=-5),M},Yh.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,a},Yh.inflateGetHeader=function(e,t){var r;return e&&e.state&&2&(r=e.state).wrap?(r.head=t,t.done=!1,a):l},Yh.inflateSetDictionary=function(e,r){var n,o=r.length;return e&&e.state&&(0===(n=e.state).wrap||11===n.mode)?11===n.mode&&t(1,r,o,0)!==n.check?-3:R(e,r,o,o)?(n.mode=31,-4):(n.havedict=1,a):l},Yh.inflateInfo="pako inflate (from Nodeca project)",Yh}function ep(){return Kh||(Kh=1,function(e){var t=(0,n.c8)(),r=vh?_h:(vh=1,_h=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}),o=zh(),i=Qh(),s=(Jh||(Jh=1,Gh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),Gh);for(var a in s)e[a]=s[a];e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7;function l(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}l.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,t(this.init_done,"close before init"),t(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?o.deflateEnd(this.strm):(this.mode===e.INFLATE||this.mode===e.GUNZIP||this.mode===e.INFLATERAW||this.mode===e.UNZIP)&&i.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},l.prototype.write=function(e,t,r,n,o,i,s){return this._write(!0,e,t,r,n,o,i,s)},l.prototype.writeSync=function(e,t,r,n,o,i,s){return this._write(!1,e,t,r,n,o,i,s)},l.prototype._write=function(r,o,i,s,a,l,c,u){if(t.equal(arguments.length,8),t(this.init_done,"write before init"),t(this.mode!==e.NONE,"already finalized"),t.equal(!1,this.write_in_progress,"write already in progress"),t.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,t.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==e.Z_NO_FLUSH&&o!==e.Z_PARTIAL_FLUSH&&o!==e.Z_SYNC_FLUSH&&o!==e.Z_FULL_FLUSH&&o!==e.Z_FINISH&&o!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==i&&(i=n.d.Buffer.alloc(0),a=0,s=0),this.strm.avail_in=a,this.strm.input=i,this.strm.next_in=s,this.strm.avail_out=u,this.strm.output=l,this.strm.next_out=c,this.flush=o,!r)return this._process(),this._checkError()?this._afterSync():void 0;var d=this;return n.d.process.nextTick((function(){d._process(),d._after()})),this},l.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},l.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=o.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=i.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=i.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=i.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=i.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},l.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},l.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},l.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},l.prototype.init=function(r,n,o,i,s){t(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),t(r>=8&&r<=15,"invalid windowBits"),t(n>=-1&&n<=9,"invalid compression level"),t(o>=1&&o<=9,"invalid memlevel"),t(i===e.Z_FILTERED||i===e.Z_HUFFMAN_ONLY||i===e.Z_RLE||i===e.Z_FIXED||i===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,r,o,i,s),this._setDictionary()},l.prototype.params=function(){throw new Error("deflateParams Not supported")},l.prototype.reset=function(){this._reset(),this._setDictionary()},l.prototype._init=function(t,n,s,a,l){switch(this.level=t,this.windowBits=n,this.memLevel=s,this.strategy=a,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,(this.mode===e.GZIP||this.mode===e.GUNZIP)&&(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),(this.mode===e.DEFLATERAW||this.mode===e.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new r,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=o.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=i.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},l.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=o.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},l.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=o.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=i.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=l}(Ah)),Ah}Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.InvalidStatusCodeError=Sh.InvalidCertError=void 0;const tp=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class rp extends Error{constructor(e,t){super(e),this.fingerprint256=t}}Sh.InvalidCertError=rp;class np extends Error{constructor(e){super(`Request Failed. Status Code: ${e}`),this.statusCode=e}}function op(e,t){if(!t||"text"===t||"json"===t)try{let n=new TextDecoder("utf8",{fatal:!0}).decode(e);if("text"===t)return n;try{return JSON.parse(n)}catch(r){if("json"===t)throw r;return n}}catch(n){if("text"===t||"json"===t)throw n}return e}Sh.InvalidStatusCodeError=np;let ip={};function sp(e,t){var r;let i={...tp,...t};const s=o.s,a=o.h,l=(Xh||(Xh=1,function(e){var t=n.n.Buffer,r=(0,n.co)().Transform,o=ep(),i=n.cp,s=(0,n.c8)().ok,a=n.n.kMaxLength,l="Cannot create final Buffer. It would be larger than 0x"+a.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var c=Object.keys(o),u=0;u<c.length;u++){var d=c[u];d.match(/^Z/)&&Object.defineProperty(e,d,{enumerable:!0,value:o[d],writable:!1})}for(var f={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},h=Object.keys(f),p=0;p<h.length;p++){var g=h[p];f[f[g]]=g}function b(e,r,n){var o=[],i=0;function s(){for(var t;null!==(t=e.read());)o.push(t),i+=t.length;e.once("readable",s)}function c(){var r,s=null;i>=a?s=new RangeError(l):r=t.concat(o,i),o=[],e.close(),n(s,r)}e.on("error",(function(t){e.removeListener("end",c),e.removeListener("readable",s),n(t)})),e.on("end",c),e.end(r),s()}function m(e,r){if("string"==typeof r&&(r=t.from(r)),!t.isBuffer(r))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(r,n)}function y(e){if(!(this instanceof y))return new y(e);I.call(this,e,o.DEFLATE)}function w(e){if(!(this instanceof w))return new w(e);I.call(this,e,o.INFLATE)}function _(e){if(!(this instanceof _))return new _(e);I.call(this,e,o.GZIP)}function v(e){if(!(this instanceof v))return new v(e);I.call(this,e,o.GUNZIP)}function E(e){if(!(this instanceof E))return new E(e);I.call(this,e,o.DEFLATERAW)}function S(e){if(!(this instanceof S))return new S(e);I.call(this,e,o.INFLATERAW)}function R(e){if(!(this instanceof R))return new R(e);I.call(this,e,o.UNZIP)}function A(e){return e===o.Z_NO_FLUSH||e===o.Z_PARTIAL_FLUSH||e===o.Z_SYNC_FLUSH||e===o.Z_FULL_FLUSH||e===o.Z_FINISH||e===o.Z_BLOCK}function I(n,i){var s=this;if(this._opts=n=n||{},this._chunkSize=n.chunkSize||e.Z_DEFAULT_CHUNK,r.call(this,n),n.flush&&!A(n.flush))throw new Error("Invalid flush flag: "+n.flush);if(n.finishFlush&&!A(n.finishFlush))throw new Error("Invalid flush flag: "+n.finishFlush);if(this._flushFlag=n.flush||o.Z_NO_FLUSH,this._finishFlushFlag=typeof n.finishFlush<"u"?n.finishFlush:o.Z_FINISH,n.chunkSize&&(n.chunkSize<e.Z_MIN_CHUNK||n.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<e.Z_MIN_WINDOWBITS||n.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<e.Z_MIN_LEVEL||n.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<e.Z_MIN_MEMLEVEL||n.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=e.Z_FILTERED&&n.strategy!=e.Z_HUFFMAN_ONLY&&n.strategy!=e.Z_RLE&&n.strategy!=e.Z_FIXED&&n.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);if(n.dictionary&&!t.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(i);var a=this;this._hadError=!1,this._handle.onerror=function(t,r){T(a),a._hadError=!0;var n=new Error(t);n.errno=r,n.code=e.codes[r],a.emit("error",n)};var l=e.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(l=n.level);var c=e.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(c=n.strategy),this._handle.init(n.windowBits||e.Z_DEFAULT_WINDOWBITS,l,n.memLevel||e.Z_DEFAULT_MEMLEVEL,c,n.dictionary),this._buffer=t.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function T(e,t){t&&n.d.process.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function x(e){e.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),e.Deflate=y,e.Inflate=w,e.Gzip=_,e.Gunzip=v,e.DeflateRaw=E,e.InflateRaw=S,e.Unzip=R,e.createDeflate=function(e){return new y(e)},e.createInflate=function(e){return new w(e)},e.createDeflateRaw=function(e){return new E(e)},e.createInflateRaw=function(e){return new S(e)},e.createGzip=function(e){return new _(e)},e.createGunzip=function(e){return new v(e)},e.createUnzip=function(e){return new R(e)},e.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),b(new y(t),e,r)},e.deflateSync=function(e,t){return m(new y(t),e)},e.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),b(new _(t),e,r)},e.gzipSync=function(e,t){return m(new _(t),e)},e.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),b(new E(t),e,r)},e.deflateRawSync=function(e,t){return m(new E(t),e)},e.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),b(new R(t),e,r)},e.unzipSync=function(e,t){return m(new R(t),e)},e.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),b(new w(t),e,r)},e.inflateSync=function(e,t){return m(new w(t),e)},e.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),b(new v(t),e,r)},e.gunzipSync=function(e,t){return m(new v(t),e)},e.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),b(new S(t),e,r)},e.inflateRawSync=function(e,t){return m(new S(t),e)},i.inherits(I,r),I.prototype.params=function(t,r,i){if(t<e.Z_MIN_LEVEL||t>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(r!=e.Z_FILTERED&&r!=e.Z_HUFFMAN_ONLY&&r!=e.Z_RLE&&r!=e.Z_FIXED&&r!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==t||this._strategy!==r){var a=this;this.flush(o.Z_SYNC_FLUSH,(function(){s(a._handle,"zlib binding closed"),a._handle.params(t,r),a._hadError||(a._level=t,a._strategy=r,i&&i())}))}else n.d.process.nextTick(i)},I.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},I.prototype._flush=function(e){this._transform(t.alloc(0),"",e)},I.prototype.flush=function(e,r){var i=this,s=this._writableState;("function"==typeof e||void 0===e&&!r)&&(r=e,e=o.Z_FULL_FLUSH),s.ended?r&&n.d.process.nextTick(r):s.ending?r&&this.once("end",r):s.needDrain?r&&this.once("drain",(function(){return i.flush(e,r)})):(this._flushFlag=e,this.write(t.alloc(0),"",r))},I.prototype.close=function(e){T(this,e),n.d.process.nextTick(x,this)},I.prototype._transform=function(e,r,n){var i,s=this._writableState,a=(s.ending||s.ended)&&(!e||s.length===e.length);return null===e||t.isBuffer(e)?this._handle?(a?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=s.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(e,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},I.prototype._processChunk=function(e,r,n){var o=e&&e.length,i=this._chunkSize-this._offset,c=0,u=this,d="function"==typeof n;if(!d){var f,h=[],p=0;this.on("error",(function(e){f=e})),s(this._handle,"zlib binding closed");do{var g=this._handle.writeSync(r,e,c,o,this._buffer,this._offset,i)}while(!this._hadError&&y(g[0],g[1]));if(this._hadError)throw f;if(p>=a)throw T(this),new RangeError(l);var b=t.concat(h,p);return T(this),b}s(this._handle,"zlib binding closed");var m=this._handle.write(r,e,c,o,this._buffer,this._offset,i);function y(a,l){if(this&&(this.buffer=null,this.callback=null),!u._hadError){var f=i-l;if(s(f>=0,"have should not go down"),f>0){var g=u._buffer.slice(u._offset,u._offset+f);u._offset+=f,d?u.push(g):(h.push(g),p+=g.length)}if((0===l||u._offset>=u._chunkSize)&&(i=u._chunkSize,u._offset=0,u._buffer=t.allocUnsafe(u._chunkSize)),0===l){if(c+=o-a,o=a,!d)return!0;var b=u._handle.write(r,e,c,o,u._buffer,u._offset,u._chunkSize);return b.callback=y,void(b.buffer=e)}if(!d)return!1;n()}}m.buffer=e,m.callback=y},i.inherits(y,I),i.inherits(w,I),i.inherits(_,I),i.inherits(v,I),i.inherits(E,I),i.inherits(S,I),i.inherits(R,I)}(Rh)),Rh),{promisify:c}=n.cp,{resolve:u}=o.u,d=!!/^https/.test(e);let f={method:i.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}};const h=e=>e.replace(/:| /g,"").toLowerCase();if(i.keepAlive){const e={keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024},t=[d,d&&(null==(r=i.sslPinnedCertificates)?void 0:r.map((e=>h(e))).sort())].join();f.agent=ip[t]||(ip[t]=new(d?a:s).Agent(e))}"json"===i.type&&(f.headers["Content-Type"]="application/json"),i.data&&(i.method||(f.method="POST"),f.body="json"===i.type?JSON.stringify(i.data):i.data),f.headers={...f.headers,...i.headers},i.sslAllowSelfSigned&&(f.rejectUnauthorized=!1);return new Promise(((t,r)=>{var o;const p=async t=>{if(t&&"DEPTH_ZERO_SELF_SIGNED_CERT"===t.code)try{await sp(e,{...i,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch(n){n&&n.fingerprint256&&(t=new rp(`Self-signed SSL certificate: ${n.fingerprint256}`,n.fingerprint256))}r(t)},g=(d?a:s).request(e,f,(o=>{o.on("error",p),(async()=>{try{t(await(async t=>{const r=t.statusCode;if(i.redirect&&300<=r&&r<400&&t.headers.location){if(10==i._redirectCount)throw new Error("Request failed. Too much redirects.");return i._redirectCount+=1,await sp(u(e,t.headers.location),i)}if(i.expectStatusCode&&r!==i.expectStatusCode)throw t.resume(),new np(r);let o=[];for await(const e of t)o.push(e);let s=n.d.Buffer.concat(o);const a=t.headers["content-encoding"];"br"===a&&(s=await c(l.brotliDecompress)(s)),("gzip"===a||"deflate"===a)&&(s=await c(l.unzip)(s));const d=op(s,i.type);return i.full?{headers:t.headers,status:r,body:d}:d})(o))}catch(s){r(s)}})()}));g.on("error",p);const b=null==(o=i.sslPinnedCertificates)?void 0:o.map((e=>h(e))),m=e=>{var t;const r=h((null==(t=e.getPeerCertificate())?void 0:t.fingerprint256)||"");if((r||!e.isSessionReused())&&!b.includes(r))return g.emit("error",new rp(`Invalid SSL certificate: ${r} Expected: ${b}`,r)),g.abort()};i.sslPinnedCertificates&&g.on("socket",(e=>{e.listeners("secureConnect").map((e=>(e.name||"").replace("bound ",""))).includes("mfetchSecureConnect")||e.on("secureConnect",m.bind(null,e))})),i.keepAlive&&g.setNoDelay(!0),f.body&&g.write(f.body),g.end()}))}const ap=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map((e=>e.toLowerCase()))),lp=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map((e=>e.toLowerCase())));async function cp(e,t){let r={...tp,...t};const n=new Headers;"json"===r.type&&n.set("Content-Type","application/json");let o=new URL(e);if(o.username){const e=btoa(`${o.username}:${o.password}`);n.set("Authorization",`Basic ${e}`),o.username="",o.password=""}e=""+o;for(let l in r.headers){const e=l.toLowerCase();(ap.has(e)||r.cors&&!lp.has(e))&&n.set(l,r.headers[l])}let i={headers:n,redirect:r.redirect?"follow":"manual"};r.referrer||(i.referrerPolicy="no-referrer"),r.cors&&(i.mode="cors"),r.data&&(r.method||(i.method="POST"),i.body="json"===r.type?JSON.stringify(r.data):r.data);const s=await fetch(e,i);if(r.expectStatusCode&&s.status!==r.expectStatusCode)throw new np(s.status);const a=op(new Uint8Array(await s.arrayBuffer()),r.type);return r.full?{headers:Object.fromEntries(s.headers.entries()),status:s.status,body:a}:a}const up=!!("object"==typeof n.d.process&&n.d.process.versions&&n.d.process.versions.node&&n.d.process.versions.v8);Sh.default=function(e,t){return(up?sp:cp)(e,t)},Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.getProvider=Eh.fetchFromProvider=void 0;const dp=Sh;Eh.fetchFromProvider=async(e,t)=>(await(0,dp.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;Eh.getProvider=e=>{var t;if("string"==typeof e)return e;if(void 0!==(null==(t=null==e?void 0:e.connection)?void 0:t.url))return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")},function(e){var t=n.o&&n.o.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=n.o&&n.o.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.toAscii=e.stripHexPrefix=e.padToEven=e.isHexString=e.isHexPrefixed=e.getKeys=e.getBinarySize=e.fromUtf8=e.fromAscii=e.arrayContainsArray=void 0,r(Kc,e),r(xd,e),r(Od,e),r(Xf,e),r(th,e),r(ah,e),r(qf,e),r(rh,e),r(gh,e),r(bh,e);var o=Zf;Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return o.arrayContainsArray}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return o.fromAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return o.fromUtf8}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return o.getBinarySize}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return o.getKeys}}),Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return o.isHexPrefixed}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return o.isHexString}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return o.padToEven}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return o.stripHexPrefix}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return o.toAscii}}),r(wh,e),r(Eh,e)}({});var fp={exports:{}};!function(e){var t,r;t=n.o,r=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],o={},i=null;function s(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch{return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var r=this.getLevel(),o=0;o<n.length;o++){var i=n[o];this[i]=o<r?e:this.methodFactory(i,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(n,o,i){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?a:void 0!==console[n]?s(console,n):void 0!==console.log?s(console,"log"):e)}(n)||c.apply(this,arguments)}function d(e,r){var s,a,c,d=this,f="loglevel";function h(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch{}if(typeof e===t)try{var r=window.document.cookie,n=encodeURIComponent(f),o=r.indexOf(n+"=");-1!==o&&(e=/^([^;]+)/.exec(r.slice(o+n.length+1))[1])}catch{}return void 0===d.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=r||u,d.getLevel=function(){return c??a??s},d.setLevel=function(e,r){return c=p(e),!1!==r&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{return void(window.localStorage[f]=r)}catch{}try{window.document.cookie=encodeURIComponent(f)+"="+r+";"}catch{}}}(c),l.call(d)},d.setDefaultLevel=function(e){a=p(e),h()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,function(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch{}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(i!==d&&(s=p(i.getLevel())),l.call(d),i===d)for(var e in o)o[e].rebuild()},s=p(i?i.getLevel():"WARN");var g=h();null!=g&&(c=p(g)),l.call(d)}(i=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new d(e,i.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=f),i},i.getLoggers=function(){return o},i.default=i,i},e.exports?e.exports=r():t.log=r()}(fp);var hp=fp.exports;const pp=(0,n.g)(hp);var gp={exports:{}};!function(e,t){var r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",c="[object Null]",u="[object Object]",d="[object Proxy]",f="[object Undefined]",h=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[i]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g[a]=g["[object Map]"]=g["[object Number]"]=g[u]=g["[object RegExp]"]=g["[object Set]"]=g["[object String]"]=g["[object WeakMap]"]=!1;var b="object"==typeof n.o&&n.o&&n.o.Object===Object&&n.o,m="object"==typeof self&&self&&self.Object===Object&&self,y=b||m||Function("return this")(),w=t&&!t.nodeType&&t,_=w&&e&&!e.nodeType&&e,v=_&&_.exports===w,E=v&&b.process,S=function(){try{return _&&_.require&&_.require("util").types||E&&E.binding&&E.binding("util")}catch{}}(),R=S&&S.isTypedArray;var A=Array.prototype,I=Function.prototype,T=Object.prototype,x=y["__core-js_shared__"],O=I.toString,k=T.hasOwnProperty,L=function(){var e=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),P=T.toString,B=O.call(Object),C=RegExp("^"+O.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=v?y.Buffer:void 0,j=y.Symbol,$=y.Uint8Array;N&&N.allocUnsafe;var M,F,D=(M=Object.getPrototypeOf,F=Object,function(e){return M(F(e))}),U=Object.create,z=T.propertyIsEnumerable,H=A.splice,W=j?j.toStringTag:void 0,q=function(){try{var e=be(Object,"defineProperty");return e({},"",{}),e}catch{}}(),V=N?N.isBuffer:void 0,Z=Math.max,G=Date.now,J=be(y,"Map"),K=be(Object,"create"),X=function(){function e(){}return function(t){if(!xe(t))return{};if(U)return U(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function te(e){var t=this.__data__=new Q(e);this.size=t.size}function re(e,t){var r=Se(e),n=!r&&Ee(e),o=!r&&!n&&Ae(e),i=!r&&!n&&!o&&ke(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=a.length;for(var c in e)s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||me(c,l))||a.push(c);return a}function ne(e,t,r){(void 0!==r&&!ve(e[t],r)||void 0===r&&!(t in e))&&se(e,t,r)}function oe(e,t,r){var n=e[t];(!k.call(e,t)||!ve(n,r)||void 0===r&&!(t in e))&&se(e,t,r)}function ie(e,t){for(var r=e.length;r--;)if(ve(e[r][0],t))return r;return-1}function se(e,t,r){"__proto__"==t&&q?q(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}Y.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},Y.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Y.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return n===r?void 0:n}return k.call(t,e)?t[e]:void 0},Y.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:k.call(t,e)},Y.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=K&&void 0===t?r:t,this},Q.prototype.clear=function(){this.__data__=[],this.size=0},Q.prototype.delete=function(e){var t=this.__data__,r=ie(t,e);return!(r<0)&&(r==t.length-1?t.pop():H.call(t,r,1),--this.size,!0)},Q.prototype.get=function(e){var t=this.__data__,r=ie(t,e);return r<0?void 0:t[r][1]},Q.prototype.has=function(e){return ie(this.__data__,e)>-1},Q.prototype.set=function(e,t){var r=this.__data__,n=ie(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ee.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(J||Q),string:new Y}},ee.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},ee.prototype.get=function(e){return ge(this,e).get(e)},ee.prototype.has=function(e){return ge(this,e).has(e)},ee.prototype.set=function(e,t){var r=ge(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},te.prototype.clear=function(){this.__data__=new Q,this.size=0},te.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},te.prototype.get=function(e){return this.__data__.get(e)},te.prototype.has=function(e){return this.__data__.has(e)},te.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Q){var n=r.__data__;if(!J||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ee(n)}return r.set(e,t),this.size=r.size,this};var ae=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),s=i.length;s--;){var a=i[++n];if(!1===t(o[a],a,o))break}return e};function le(e){return null==e?void 0===e?f:c:W&&W in Object(e)?function(e){var t=k.call(e,W),r=e[W];try{e[W]=void 0;var n=!0}catch{}var o=P.call(e);return n&&(t?e[W]=r:delete e[W]),o}(e):function(e){return P.call(e)}(e)}function ce(e){return Oe(e)&&le(e)==i}function ue(e){return!(!xe(e)||function(e){return!!L&&L in e}(e))&&(Ie(e)?C:h).test(function(e){if(null!=e){try{return O.call(e)}catch{}try{return e+""}catch{}}return""}(e))}function de(e){if(!xe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ye(e),r=[];for(var n in e)"constructor"==n&&(t||!k.call(e,n))||r.push(n);return r}function fe(e,t,r,n,o){e!==t&&ae(t,(function(i,s){if(o||(o=new te),xe(i))!function(e,t,r,n,o,i,s){var a=we(e,r),l=we(t,r),c=s.get(l);if(c)return void ne(e,r,c);var d=i?i(a,l,r+"",e,t,s):void 0,f=void 0===d;if(f){var h=Se(l),p=!h&&Ae(l),g=!h&&!p&&ke(l);d=l,h||p||g?Se(a)?d=a:function(e){return Oe(e)&&Re(e)}(a)?d=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(a):p?(f=!1,d=function(e){return e.slice()}(l)):g?(f=!1,d=function(e){var t=function(e){var t=new e.constructor(e.byteLength);return new $(t).set(new $(e)),t}(e.buffer);return new e.constructor(t,e.byteOffset,e.length)}(l)):d=[]:function(e){if(!Oe(e)||le(e)!=u)return!1;var t=D(e);if(null===t)return!0;var r=k.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&O.call(r)==B}(l)||Ee(l)?(d=a,Ee(a)?d=function(e){return function(e,t,r){var n=!r;r||(r={});for(var o=-1,i=t.length;++o<i;){var s=t[o],a=void 0;void 0===a&&(a=e[s]),n?se(r,s,a):oe(r,s,a)}return r}(e,Le(e))}(a):(!xe(a)||Ie(a))&&(d=function(e){return"function"!=typeof e.constructor||ye(e)?{}:X(D(e))}(l))):f=!1}f&&(s.set(l,d),o(d,l,n,i,s),s.delete(l)),ne(e,r,d)}(e,t,s,r,fe,n,o);else{var a=n?n(we(e,s),i,s+"",e,t,o):void 0;void 0===a&&(a=i),ne(e,s,a)}}),Le)}function he(e,t){return _e(function(e,t,r){return t=Z(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Z(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,Ce),e+"")}var pe=q?function(e,t){return q(e,"toString",{configurable:!0,enumerable:!1,value:Be(t),writable:!0})}:Ce;function ge(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function be(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ue(r)?r:void 0}function me(e,t){var r=typeof e;return!!(t=t??o)&&("number"==r||"symbol"!=r&&p.test(e))&&e>-1&&e%1==0&&e<t}function ye(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||T)}function we(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _e=function(e){var t=0,r=0;return function(){var n=G(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(pe);function ve(e,t){return e===t||e!==e&&t!==t}var Ee=ce(function(){return arguments}())?ce:function(e){return Oe(e)&&k.call(e,"callee")&&!z.call(e,"callee")},Se=Array.isArray;function Re(e){return null!=e&&Te(e.length)&&!Ie(e)}var Ae=V||function(){return!1};function Ie(e){if(!xe(e))return!1;var t=le(e);return t==a||t==l||t==s||t==d}function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Oe(e){return null!=e&&"object"==typeof e}var ke=R?function(e){return function(t){return e(t)}}(R):function(e){return Oe(e)&&Te(e.length)&&!!g[le(e)]};function Le(e){return Re(e)?re(e):de(e)}var Pe=function(e){return he((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,t,r){if(!xe(r))return!1;var n=typeof t;return!!("number"==n?Re(r)&&me(t,r.length):"string"==n&&t in r)&&ve(r[t],e)}(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t}))}((function(e,t,r){fe(e,t,r)}));function Be(e){return function(){return e}}function Ce(e){return e}e.exports=Pe}(gp,gp.exports);pp.getLogger("http-helpers").setLevel(hp.levels.INFO),s();const bp="iframe_status",mp="create_window",yp="close_window",wp="user_logged_in",_p="user_logged_out",vp="logout",Ep="wallet_instance_id",Sp="user_info",Rp="set_provider",Ap="topup",Ip="iframe_status",Tp="opened_window",xp="closed_window",Op="get_provider_state",kp="wallet_get_provider_state",Lp="wallet_accounts_changed",Pp="wallet_chain_changed",Bp="wallet_unlock_state_changed";var Cp,Np;(Np=Cp||(Cp={})).approved="approved",Np.cancelled="cancelled",Np.confirmed="confirmed",Np.failed="failed",Np.finalized="finalized",Np.processed="processed",Np.rejected="rejected",Np.signed="signed",Np.submitted="submitted",Np.unapproved="unapproved",Np.dropped="dropped",Np.expired="expired";var jp=(0,n.c5)();const $p=(0,n.g)(jp);var Mp={},Fp={};Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.default=function(e){var t=e.length,r=t%4;if(!r)return e;var o=t,i=4-r,s=t+i,a=n.d.Buffer.alloc(s);for(a.write(e);i--;)a.write("=",o++);return a.toString()},Object.defineProperty(Mp,"__esModule",{value:!0});var Dp=Fp;function Up(e,t){return void 0===t&&(t="utf8"),n.d.Buffer.isBuffer(e)?Hp(e.toString("base64")):Hp(n.d.Buffer.from(e,t).toString("base64"))}function zp(e){return e=e.toString(),Dp.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Hp(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var Wp=Up;Wp.encode=Up,Wp.decode=function(e,t){return void 0===t&&(t="utf8"),n.d.Buffer.from(zp(e),"base64").toString(t)},Wp.toBase64=zp,Wp.fromBase64=Hp,Wp.toBuffer=function(e){return n.d.Buffer.from(zp(e),"base64")},Mp.default=Wp,function(e){e.exports=Mp.default,e.exports.default=e.exports}({exports:{}});function qp(){}const Vp="ACK";class Zp extends n.cq.Duplex{constructor(e){let{name:t,target:r,targetWindow:o=window,targetOrigin:i="*"}=e;if(super({objectMode:!0}),(0,n.ak)(this,"_init",void 0),(0,n.ak)(this,"_haveSyn",void 0),(0,n.ak)(this,"_name",void 0),(0,n.ak)(this,"_target",void 0),(0,n.ak)(this,"_targetWindow",void 0),(0,n.ak)(this,"_targetOrigin",void 0),(0,n.ak)(this,"_onMessage",void 0),(0,n.ak)(this,"_synIntervalId",void 0),!t||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=o,this._targetOrigin=i,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write("BRK",null,qp),this._haveSyn=!1,this._init=!1}_handShake(){this._write("SYN",null,qp),this.cork()}_onData(e){if(this._init)if("BRK"===e)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}else"SYN"===e?(this._haveSyn=!0,this._write(Vp,null,qp)):e===Vp&&(this._init=!0,this._haveSyn||this._write(Vp,null,qp),this.uncork())}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||"object"!=typeof t||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function Gp(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}class Jp extends n.y.EventEmitter{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(t){let e;if(o.length>0&&([e]=o),e instanceof Error)throw e;const t=new Error("Unhandled error."+(e?` (${e.message})`:""));throw t.context=e,t}const s=r[e];if(void 0===s)return!1;if("function"==typeof s)Gp(s,this,o);else{const e=s.length,t=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let r=0;r<e;r+=1)Gp(t[r],this,o)}return!0}}class Kp extends Error{constructor(e){let{code:t,message:r,data:o}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||"string"!=typeof r)throw new Error("message must be string");super(r),(0,n.ak)(this,"code",void 0),(0,n.ak)(this,"data",void 0),this.code=t,void 0!==o&&(this.data=o)}toString(){return x({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Xp=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n,o)=>{n||o.error?t(n||o.error):!r||Array.isArray(o)?e(o):e(o.result)}};function Yp(){const e={};const t=new Jp;const r=new n.cq.Duplex({objectMode:!0,read:function(){return!1},write:function(r,n,o){let i;try{r.id?function(t){const r=e[t.id];if(!r)throw new Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(r):function(e){t.emit("notification",e)}(r)}catch(s){i=s}o(i)}});return{events:t,middleware:(t,n,o,i)=>{r.push(t),e[t.id]={req:t,res:n,next:o,end:i}},stream:r}}function Qp(){return(e,t,r,n)=>{const o=e.id,i=$p(32).toString("hex");e.id=i,t.id=i,r((r=>{e.id=o,t.id=o,r()}))}}function eg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class tg extends Jp{constructor(){super(),(0,n.ak)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const n=[];let o=null,i=!1;for(const s of r)if([o,i]=await tg._runMiddleware(e,t,s,n),i)break;return[o,i,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((o=>{const i=e=>{const r=e||t.error;r&&(t.error=h.serializeError(r)),o([r,!0])},s=e=>{t.error?i(t.error):(e&&("function"!=typeof e&&i(new Kp({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),o([null,!1]))};try{r(e,t,s,i)}catch(a){i(a)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new Kp({code:-32603,message:"Response has no error or result for request"});if(!r)throw new Kp({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[o,i,s]=await tg._runAllMiddleware(e,t,this._middleware);return i?(await tg._runReturnHandlers(s),n(o)):r((async e=>{try{await tg._runReturnHandlers(s)}catch(t){return e(t)}return e()}))}catch(o){return n(o)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const e=new Kp({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!=typeof e.method){const r=new Kp({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(r),!0).forEach((function(t){(0,n.ak)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),o={id:r.id,jsonrpc:r.jsonrpc};let i=null;try{await this._processRequest(r,o)}catch(s){i=s}return i&&(delete o.result,o.error||(o.error=h.serializeError(i))),t(i,o)}async _processRequest(e,t){const[r,n,o]=await tg._runAllMiddleware(e,t,this._middleware);if(tg._checkForCompletion(e,t,n),await tg._runReturnHandlers(o),r)throw r}}class rg extends n.cq.Duplex{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),(0,n.ak)(this,"_parent",void 0),(0,n.ak)(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}function ng(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function og(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ng(Object(r),!0).forEach((function(t){(0,n.ak)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ng(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ig=Symbol("IGNORE_SUBSTREAM");class sg extends n.cq.Duplex{constructor(){super(og(og({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{objectMode:!0})),(0,n.ak)(this,"_substreams",void 0),(0,n.ak)(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new rg({parent:this,name:e});return this._substreams[e]=t,function(e,t){const r=Bc(t);Mc(e,{readable:!1},r),Mc(e,{writable:!1},r)}(this,(e=>t.destroy(e||void 0))),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=ig}_read(){}_write(e,t,r){const{name:n,data:o}=e;if(!n)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const i=this._substreams[n];return i?(i!==ig&&i.push(o),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}}const ag=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;ag.writable=e=>ag(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,ag.readable=e=>ag(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,ag.duplex=e=>ag.writable(e)&&ag.readable(e),ag.transform=e=>ag.duplex(e)&&"function"==typeof e._transform;var lg=ag,cg=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!==o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!==o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!==o--;){var s=i[o];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r};const ug=(0,n.g)(cg);var dg={disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},fg={connected:e=>`Torus: Connected to chain with ID "${e}".`};const hg={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},pg={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},gg={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"};var bg={supportedVerifierList:[gg.GOOGLE,gg.REDDIT,gg.DISCORD],api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7d99\u7d9a\u3059\u308b",actionRequired:"\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059",pendingAction:"\u7d9a\u884c\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7d9a\u884c\u3057\u307e\u3059",cookiesRequired:"\u5fc5\u8981\u306a\u30af\u30c3\u30ad\u30fc",enableCookies:"Torus\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u8a2d\u5b9a\u3067Cookie\u3092\u6709\u52b9\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",clickHere:"\u8a73\u3057\u304f\u306f"}},ko:{embed:{continue:"\uacc4\uc18d\ud558\ub2e4",actionRequired:"\uc2b9\uc778 \ud544\uc694",pendingAction:"\ud31d\uc5c5\uc5d0\uc11c \uc694\uccad\uc744 \uc9c4\ud589\ud558\ub824\uba74 \uacc4\uc18d\uc744 \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624.",cookiesRequired:"\ucfe0\ud0a4 \ud544\uc694",enableCookies:"\ube0c\ub77c\uc6b0\uc800 \ud658\uacbd \uc124\uc815\uc5d0\uc11c \ucfe0\ud0a4\ub97c \ud65c\uc131\ud654\ud558\uc5ec Torus\uc5d0 \uc561\uc138\uc2a4\ud558\uc2ed\uc2dc\uc624.",clickHere:"\ub354 \ub9ce\uc740 \uc815\ubcf4"}},zh:{embed:{continue:"\u7ee7\u7eed",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51fb\u7ee7\u7eed\u4ee5\u5728\u5f39\u51fa\u7a97\u53e3\u4e2d\u7ee7\u7eed\u60a8\u7684\u8bf7\u6c42",cookiesRequired:"\u5fc5\u586bCookie",enableCookies:"\u8bf7\u5728\u60a8\u7684\u6d4f\u89c8\u5668\u9996\u9009\u9879\u4e2d\u542f\u7528cookie\u4ee5\u8bbf\u95eeTorus\u3002",clickHere:"\u66f4\u591a\u4fe1\u606f"}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"},mg=pp.getLogger("solana-embed");const yg=()=>Math.random().toString(36).slice(2),wg=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error"}return{torusUrl:t,logLevel:r}},_g={height:660,width:375},vg={height:740,width:1315},Eg={height:700,width:1200},Sg={height:600,width:400};function Rg(e){let{width:t,height:r}=e;const n=void 0!==window.screenLeft?window.screenLeft:window.screenX,o=void 0!==window.screenTop?window.screenTop:window.screenY,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,a=Math.abs((i-t)/2/1+n);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/1},width=${t/1},top=${Math.abs((s-r)/2/1+o)},left=${a}`}class Ag extends Jp{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;if(super(),(0,n.ak)(this,"isTorus",void 0),(0,n.ak)(this,"_rpcEngine",void 0),(0,n.ak)(this,"jsonRpcConnectionEvents",void 0),(0,n.ak)(this,"_state",void 0),!lg.duplex(e))throw new Error(dg.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const i=new sg;Jc(e,i,e,this._handleStreamDisconnect.bind(this,"Torus")),i.ignoreStream("phishing");const s=Yp();Jc(s.stream,i.createStream(o),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const a=new tg;a.push(Qp()),a.push(((e,t,r)=>{("string"!=typeof e.method||!e.method)&&(t.error=h.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r((e=>{const{error:r}=t;return r&&mg.error(`Torus - RPC Error: ${r.message}`,r),e()}))})),a.push(function(e){return function(t,r,n){n((n=>{r.error&&pp.warn("Error in RPC response:\n",r),!t.isTorusInternal&&(pp.info(`RPC (${e.origin}):`,t,"->",r),n())}))}}({origin:location.origin})),a.push(s.middleware),this._rpcEngine=a,this.jsonRpcConnectionEvents=s.events}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw h.ethErrors.rpc.invalidRequest({message:dg.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw h.ethErrors.rpc.invalidRequest({message:dg.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw h.ethErrors.rpc.invalidRequest({message:dg.invalidRequestParams(),data:e});return new Promise(((e,n)=>{this._rpcRequest({method:t,params:r},Xp(e,n))}))}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise(((t,r)=>{this._rpcRequest(e,Xp(t,r))}))}_handleStreamDisconnect(e,t){(function(e,t,r){let n=`Torus: Lost connection to "${e}".`;null!=t&&t.stack&&(n+=`\n${t.stack}`),mg.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)})(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}async function Ig(){return new Promise((e=>{"loading"!==document.readyState?e():function(e,t,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];const s=()=>{r(...o),e.removeEventListener(t,s)};e.addEventListener(t,s)}(document,"DOMContentLoaded",e)}))}const Tg=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};function xg(e){return void 0===e.version}class Og extends Jp{constructor(e){let{url:t,target:r,features:o}=e;super(),(0,n.ak)(this,"url",void 0),(0,n.ak)(this,"target",void 0),(0,n.ak)(this,"features",void 0),(0,n.ak)(this,"window",void 0),(0,n.ak)(this,"windowTimer",void 0),(0,n.ak)(this,"iClosedWindow",void 0),this.url=t,this.target=r||"_blank",this.features=o||Rg(Eg),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval((()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)}),500))}open(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!=(e=this.window)&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}function kg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class Lg extends Ag{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:o}),(0,n.ak)(this,"embedTranslations",void 0),(0,n.ak)(this,"torusUrl",void 0),(0,n.ak)(this,"dappStorageKey",void 0),(0,n.ak)(this,"windowRefs",void 0),(0,n.ak)(this,"tryWindowHandle",void 0),(0,n.ak)(this,"torusAlertContainer",void 0),(0,n.ak)(this,"torusIframe",void 0),this._state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kg(Object(r),!0).forEach((function(t){(0,n.ak)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Lg._defaultState),this.torusUrl="",this.dappStorageKey="";const i=bg.translations[(()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(bg.translations,t[0])?t[0]:"en",e})()];this.embedTranslations=i.embed,this.windowRefs={},this.on("connect",(()=>{this._state.isConnected=!0}));this.jsonRpcConnectionEvents.on("notification",(e=>{const{method:t,params:r}=e;if(t===bp){const{isFullScreen:e,rid:t}=r;this._displayIframe({isFull:e,rid:t})}else if(t===mp){const{windowId:e,url:t}=r;this._createPopupBlockAlert(e,t)}else if(t===yp)this._handleCloseWindow(r);else if(t===wp){const{currentLoginProvider:e}=r;this._state.isLoggedIn=!0,this._state.currentLoginProvider=e}else t===_p&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())}))}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:r,torusAlertContainer:n,torusIframe:o}=e;this.torusUrl=t,this.dappStorageKey=r,this.torusAlertContainer=n,this.torusIframe=o,this.torusIframe.addEventListener("load",(()=>{this._state.isIFrameFullScreen||this._displayIframe()}));const{currentLoginProvider:i,isLoggedIn:s}=await this.request({method:Op,params:[]});this._handleConnect(i,s)}catch(t){mg.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{mg.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:r,features:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const i=new Og({url:o,target:r,features:n});i.open(),i.window?(this.windowRefs[e]=i,this.request({method:Tp,params:{windowId:e}}),i.once("close",(()=>{delete this.windowRefs[e],this.request({method:xp,params:{windowId:e}})}))):this._createPopupBlockAlert(e,o.href)}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r={};if(e)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case pg.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case pg.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case pg.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case pg.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto"}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=e,this.request({method:Ip,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const r=t,n=e;Array.isArray(n)||n.jsonrpc||(n.jsonrpc="2.0"),this.tryWindowHandle(n,r)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),mg.debug(fg.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new h.EthereumRpcError(1013,t||dg.disconnected()),mg.debug(r)):(r=new h.EthereumRpcError(1011,t||dg.permanentlyDisconnected()),mg.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const r=this.getLogoUrl(),n=Tg(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=Tg(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),i=Tg('<div id="torusAlert__btn-container"></div>');i.appendChild(o),n.appendChild(i);await Ig(),(()=>{this.torusAlertContainer.appendChild(n)})(),(()=>{o.addEventListener("click",(()=>{this._handleWindow(e,{url:t,target:"_blank",features:Rg(Sg)}),n.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")}))})(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}function Pg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(0,n.ak)(Lg,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Bg extends Ag{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:o}),(0,n.ak)(this,"chainId",void 0),(0,n.ak)(this,"selectedAddress",void 0),(0,n.ak)(this,"tryWindowHandle",void 0),this._state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pg(Object(r),!0).forEach((function(t){(0,n.ak)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Bg._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",(()=>{this._state.isConnected=!0}));this.jsonRpcConnectionEvents.on("notification",(e=>{const{method:t,params:r}=e;t===Lp?this._handleAccountsChanged(r):t===Bp?this._handleUnlockStateChanged(r):t===Pp&&this._handleChainChanged(r)}))}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r}=await this.request({method:kp,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){mg.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{mg.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t;const o=e;if(!Array.isArray(o))if(o.jsonrpc||(o.jsonrpc="2.0"),"solana_accounts"===o.method||"solana_requestAccounts"===o.method)n=(e,n)=>{this._handleAccountsChanged(n.result||[],"solana_accounts"===o.method,r),t(e,n)};else if("wallet_getProviderState"===o.method)return void this._rpcEngine.handle(e,n);this.tryWindowHandle(o,n)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),mg.debug(fg.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new h.EthereumRpcError(1013,t||dg.disconnected()),mg.debug(r)):(r=new h.EthereumRpcError(1011,t||dg.permanentlyDisconnected()),mg.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;Array.isArray(n)||(mg.error("Torus: Received non-array accounts parameter. Please report this bug.",n),n=[]);for(const o of e)if("string"!=typeof o){mg.error("Torus: Received non-string account. Please report this bug.",e),n=[];break}ug(this._state.accounts,n)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&mg.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',n),this._state.accounts=n,this.emit("accountsChanged",n)),this.selectedAddress!==n[0]&&(this.selectedAddress=n[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?"loading"===e?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):mg.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e})}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):mg.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t})}}function Cg(e){return new Promise(((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(n){r(n)}}))}(0,n.ak)(Bg,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const Ng=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function jg(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await Cg(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find((e=>!!e.href)),r&&await Cg(r.href))?r.href:""}catch{return""}}function $g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$g(Object(r),!0).forEach((function(t){(0,n.ak)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Fg=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Dg=[Rp],Ug=function(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){return r&&(22===r.code||1014===r.code||"QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name)&&t&&0!==t.length}}("localStorage");!async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await wg("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){mg.warn(e)}}();class zg{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.ak)(this,"isInitialized",void 0),(0,n.ak)(this,"torusAlert",void 0),(0,n.ak)(this,"modalZIndex",void 0),(0,n.ak)(this,"alertZIndex",void 0),(0,n.ak)(this,"requestedLoginProvider",void 0),(0,n.ak)(this,"provider",void 0),(0,n.ak)(this,"communicationProvider",void 0),(0,n.ak)(this,"dappStorageKey",void 0),(0,n.ak)(this,"isTopupHidden",!1),(0,n.ak)(this,"torusAlertContainer",void 0),(0,n.ak)(this,"torusUrl",void 0),(0,n.ak)(this,"torusIframe",void 0),(0,n.ak)(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return!!this.communicationProvider&&this.communicationProvider.isLoggedIn}async init(){let{buildEnv:e=hg.PRODUCTION,enableLogging:t=!1,network:r,showTorusButton:n=!1,useLocalStorage:o=!1,buttonPosition:i=pg.BOTTOM_LEFT,apiKey:s="torus-default",extraParams:a={},whiteLabel:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:c,logLevel:u}=await wg(e);mg.enableAll(),mg.info(c,"url loaded"),mg.info("Solana Embed Version :0.3.4"),this.torusUrl=c,mg.setDefaultLevel(u),t?mg.enableAll():mg.disableAll();const d=this.handleDappStorageKey(o),f=new URL(c);f.pathname.endsWith("/")?f.pathname+="frame":f.pathname+="/frame";const h=new URLSearchParams;d&&h.append("dappStorageKey",d),h.append("origin",window.location.origin),f.hash=h.toString(),this.torusIframe=Tg(`<iframe\n        id="torusIframe"\n        class="torusIframe"\n        src="${f.href}"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"\n      ></iframe>`),this.torusAlertContainer=Tg(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Tg(`<link href="${c}/css/widget.css" rel="stylesheet" type="text/css">`);await Ig(),await(async()=>new Promise(((e,t)=>{try{window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer),this.torusIframe.addEventListener("load",(async()=>{const t=await(async()=>({name:Ng(window),icon:await jg(window)}))();this.torusIframe.contentWindow.postMessage({buttonPosition:i,apiKey:s,network:r,dappMetadata:t,extraParams:a,whiteLabel:l},f.origin),await this._setupWeb3({torusUrl:c}),n&&this.showTorusButton(),null!=l&&l.topupHide?this.isTopupHidden=l.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,e()}))}catch(o){t(o)}})))()}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise(((t,r)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Xp(t,r))}));if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw mg.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:r}=e,{success:n}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:r}});if(!n)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:vp,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(e){return e instanceof Element||e instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:Rp,params:Mg({},e)})}async showWallet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await this.communicationProvider.request({method:Ep,params:[]}),n=e?`/${e}`:"",o=new URL(`${this.torusUrl}/wallet${n}`);o.searchParams.append("instanceId",r),Object.keys(t).forEach((e=>{o.searchParams.append(e,t[e])})),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new Og({url:o,features:Rg(vg)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:Sp,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=yg();return this.communicationProvider._handleWindow(r),await this.communicationProvider.request({method:Ap,params:{provider:e,params:t,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=xg(e),r=t?e.serialize({requireAllSignatures:!1}).toString("hex"):n.d.Buffer.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:r,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const r=xg(e),o=r?e.serialize({requireAllSignatures:!1}).toString("hex"):n.d.Buffer.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:o,options:t,isLegacyTransaction:r}})}}async signTransaction(e){const t=xg(e),r=t?e.serializeMessage().toString("hex"):n.d.Buffer.from(e.message.serialize()).toString("hex"),o=await this.provider.request({method:"sign_transaction",params:{message:r,messageOnly:!0,isLegacyTransaction:t}}),i=JSON.parse(o),s={publicKey:new n.a2(i.publicKey),signature:n.d.Buffer.from(i.signature,"hex")};return e.addSignature(s.publicKey,s.signature),e}async signAllTransactions(e){let t;const r=e.map((e=>(t=xg(e),t?e.serializeMessage().toString("hex"):n.d.Buffer.from(e.message.serialize()).toString("hex")))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:r,messageOnly:!0,isLegacyTransaction:t}})).map((e=>{const t=JSON.parse(e);return{publicKey:new n.a2(t.publicKey),signature:n.d.Buffer.from(t.signature,"hex")}}));return e.forEach(((e,t)=>(e.addSignature(o[t].publicKey,o[t].signature),e))),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${bg.localStorageKeyPrefix}${window.location.hostname}`;let r="";if(Ug&&e){const e=window.localStorage.getItem(t);if(e)r=e;else{const e=`torus-app-${yg()}`;window.localStorage.setItem(t,e),r=e}}return this.dappStorageKey=r,r}async _setupWeb3(e){mg.info("setupWeb3 running");const t=new Zp({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new Zp({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),n=new Bg(t,{}),o=new Lg(r,{});n.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&Fg.includes(r.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const e=yg();o._handleWindow(e,{target:"_blank",features:Rg(Sg)}),r.windowId=e}n._rpcEngine.handle(r,t)},o.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&Dg.includes(r.method)){const e=yg();o._handleWindow(e,{target:"_blank",features:Rg(_g)}),r.params.windowId=e}o._rpcEngine.handle(r,t)};const i=e=>{const t=n[e],r=this;n[e]=function(e,n){const{method:o,params:i=[]}=e;if("solana_requestAccounts"===o){if(!n)return r.login({loginProvider:i[0]});r.login({loginProvider:i[0]}).then((e=>n(null,e))).catch((e=>n(e)))}return t.apply(this,[e,n])}};i("request"),i("sendAsync"),i("send");const s=new Proxy(n,{deleteProperty:()=>!0}),a=new Proxy(o,{deleteProperty:()=>!0});this.provider=s,this.communicationProvider=a,await Promise.all([n._initializeState(),o._initializeState(Mg(Mg({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),mg.debug("Torus - injected provider")}}}}]);
//# sourceMappingURL=4079.70c46518.chunk.js.map